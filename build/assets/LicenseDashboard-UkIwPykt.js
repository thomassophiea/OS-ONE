import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as c}from"./vendor-react-BQC692LR.js";import{y as H,z as q,E as G,F as O,G as W,H as Z,a as w,w as u,t as I,C as o,b as x,c as m,d as h,h as z,e as j,v as J,L as Q,I as V}from"./index-CrdvL8SR.js";import{D as Y,T as b}from"./MobileOptimized-BTJ5PvfS.js";import{D as _,a as ee,b as se,c as ae,d as te}from"./dialog-BqYeg193.js";import{K as P,R as T,ac as re,S as F,a3 as D,x as L,v as U,a1 as K,y as le}from"./vendor-icons-DmoIqCnf.js";import"./vendor-charts-CCS-1Xlq.js";const ne={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl",full:"max-w-full"};function ie({open:r,onOpenChange:f,title:a,description:n,children:p,className:g="",maxWidth:v="lg"}){const i=H(),d=a||n?i?e.jsxs(O,{children:[a&&e.jsx(W,{children:a}),n&&e.jsx(Z,{children:n})]}):e.jsxs(se,{children:[a&&e.jsx(ae,{children:a}),n&&e.jsx(te,{children:n})]}):null;return i?e.jsx(q,{open:r,onOpenChange:f,children:e.jsxs(G,{side:"bottom",className:`h-[90vh] overflow-y-auto ${g}`,children:[d,e.jsx("div",{className:"mt-4",children:p})]})}):e.jsx(_,{open:r,onOpenChange:f,children:e.jsxs(ee,{className:`${ne[v]} ${g}`,children:[d,e.jsx("div",{className:a||n?"mt-4":"",children:p})]})})}function ue(){const[r,f]=c.useState(null),[a,n]=c.useState(null),[p,g]=c.useState(!0),[v,i]=c.useState(!1),[d,k]=c.useState(""),[N,S]=c.useState(!1);c.useEffect(()=>{y()},[]);const y=async()=>{g(!0);try{const[s,t]=await Promise.all([w.getLicenseInfo(),w.getLicenseUsage()]);f(s),n(t)}catch(s){console.error("Failed to load license data:",s),u.error("Failed to load license information")}finally{g(!1)}},$=s=>{const t=/^[A-Z0-9\-]+$/i;return s.trim().length>=10&&t.test(s)},C=async()=>{if(!d.trim()){u.error("Please enter a license key");return}if(!$(d)){u.error("Invalid license key format. Please check and try again.");return}S(!0);try{await w.installLicense(d),u.success("License installed successfully"),i(!1),k(""),await y()}catch(s){console.error("Failed to install license:",s),u.error("Failed to install license. Please check the license key.")}finally{S(!1)}},E=s=>{if(!s)return!1;const t=Math.ceil((new Date(s).getTime()-Date.now())/(1e3*60*60*24));return t>0&&t<=30},X=s=>s?new Date(s).getTime()<Date.now():!1,R=s=>{if(!s)return"Never";const t=new Date(s),l=Math.ceil((t.getTime()-Date.now())/(1e3*60*60*24));return l<0?"Expired":l===0?"Expires today":l===1?"Expires tomorrow":l<=7?`Expires in ${l} days`:l<=30?`Expires in ${l} days`:t.toLocaleDateString()},M=(s,t)=>X(t)?e.jsx(le,{className:"h-5 w-5 text-red-500"}):E(t)?e.jsx(L,{className:"h-5 w-5 text-yellow-500"}):s==="active"?e.jsx(D,{className:"h-5 w-5 text-green-500"}):e.jsx(K,{className:"h-5 w-5 text-muted-foreground"}),A=(s,t)=>X(t)?e.jsx(j,{variant:"destructive",children:"Expired"}):E(t)?e.jsx(j,{className:"bg-yellow-500",children:"Expiring Soon"}):s==="active"?e.jsx(j,{className:"bg-green-500",children:"Active"}):e.jsx(j,{variant:"outline",children:s});return p?e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx(I,{className:"h-8 w-64"}),e.jsx(I,{className:"h-96 w-full"})]}):e.jsxs("div",{className:"space-y-6 p-4 md:p-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:[e.jsx(P,{className:"h-6 w-6 md:h-8 md:w-8 text-primary"}),"License Management"]}),e.jsx(Y,{children:e.jsx("p",{className:"text-muted-foreground mt-2 text-base",children:"Manage and monitor system licenses"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:y,"aria-label":"Refresh license data",children:[e.jsx(T,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Refresh"})]}),e.jsxs(b,{size:"sm",onClick:()=>i(!0),"aria-label":"Install new license",children:[e.jsx(re,{className:"h-4 w-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Install License"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(o,{className:"border-2 hover:shadow-lg transition-all duration-300 hover:border-primary/50",children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Total Licenses"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary/10 rounded-xl",children:e.jsx(F,{className:"h-6 w-6 text-primary"})}),e.jsx("span",{className:"text-3xl font-bold bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent",children:r?.totalLicenses||0})]})})]}),e.jsxs(o,{className:"border-2 hover:shadow-lg transition-all duration-300 hover:border-green-300",children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Active Licenses"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-green-100 rounded-xl",children:e.jsx(D,{className:"h-6 w-6 text-green-600"})}),e.jsx("span",{className:"text-3xl font-bold text-green-600",children:r?.activeLicenses||0})]})})]}),e.jsxs(o,{className:"border-2 hover:shadow-lg transition-all duration-300 hover:border-yellow-300",children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Expiring Soon"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-yellow-100 rounded-xl",children:e.jsx(L,{className:"h-6 w-6 text-yellow-600"})}),e.jsx("span",{className:"text-3xl font-bold text-yellow-600",children:r?.expiringLicenses||0})]})})]}),e.jsxs(o,{className:"border-2 hover:shadow-lg transition-all duration-300 hover:border-blue-300 bg-gradient-to-br from-blue-50/30 to-transparent",children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-muted-foreground",children:"Utilization"})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-blue-100 rounded-xl",children:e.jsx(U,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:[a?.utilizationPercentage.toFixed(0)||0,"%"]})]})})]})]}),a&&e.jsxs(o,{className:"border-2 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[e.jsxs(x,{className:"pb-4",children:[e.jsxs(m,{className:"text-xl flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(U,{className:"h-5 w-5 text-blue-600"})}),"License Usage"]}),e.jsx(z,{className:"mt-1",children:"Device licensing status"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50/80 to-purple-50/40 p-5 rounded-2xl border-2 border-blue-100/50",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Device Licensing Status"}),e.jsxs("span",{className:"text-sm font-mono font-bold text-blue-700",children:[a.licensedDevices," / ",a.totalDevices]})]}),e.jsx("div",{className:"w-full bg-white/80 rounded-full h-4 overflow-hidden shadow-inner border border-gray-200",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":a.utilizationPercentage,"aria-label":"License utilization percentage",children:e.jsx("div",{className:`h-4 rounded-full transition-all duration-700 ease-out shadow-sm ${a.utilizationPercentage>90?"bg-gradient-to-r from-red-500 via-red-600 to-red-700":a.utilizationPercentage>70?"bg-gradient-to-r from-yellow-500 via-orange-500 to-orange-600":"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600"}`,style:{width:`${a.utilizationPercentage}%`}})}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-600",children:[a.utilizationPercentage.toFixed(1),"% utilized"]}),e.jsxs("span",{className:"text-xs font-semibold text-gray-600",children:[a.totalDevices-a.licensedDevices," remaining"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-5 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all shadow-sm hover:shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-gray-700 to-gray-600 bg-clip-text text-transparent",children:a.totalDevices}),e.jsx("div",{className:"text-sm font-medium text-gray-600 mt-1",children:"Total Devices"})]}),e.jsxs("div",{className:"text-center p-5 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 hover:border-green-300 transition-all shadow-sm hover:shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.licensedDevices}),e.jsx("div",{className:"text-sm font-medium text-green-700 mt-1",children:"Licensed"})]}),e.jsxs("div",{className:"text-center p-5 bg-gradient-to-br from-red-50 to-rose-50 rounded-xl border-2 border-red-200 hover:border-red-300 transition-all shadow-sm hover:shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:a.unlicensedDevices}),e.jsx("div",{className:"text-sm font-medium text-red-700 mt-1",children:"Unlicensed"})]})]}),a.unlicensedDevices>0&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:[e.jsx(L,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[a.unlicensedDevices," device(s) require licensing"]})]})]})})]}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(m,{children:"Installed Licenses"}),e.jsx(z,{children:"Detailed information about installed licenses"})]}),e.jsx(h,{children:!r||r.licenses.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(P,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No licenses installed"}),e.jsx("p",{className:"text-sm mt-2",children:"Install a license to get started"})]}):e.jsx("div",{className:"space-y-4",children:r.licenses.map((s,t)=>e.jsxs("div",{children:[e.jsx("div",{className:"flex items-start justify-between p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[M(s.status,s.expirationDate),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.type}),A(s.status,s.expirationDate)]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(K,{className:"h-3 w-3"}),e.jsx("span",{children:R(s.expirationDate)})]}),s.capacity&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(F,{className:"h-3 w-3"}),e.jsxs("span",{children:["Capacity: ",s.capacity," devices"]})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Features:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.features.map((l,B)=>e.jsx(j,{variant:"secondary",className:"text-xs",children:l},B))})]})]})]})]})}),t<r.licenses.length-1&&e.jsx(J,{className:"my-4"})]},t))})})]}),e.jsxs(ie,{open:v,onOpenChange:i,title:"Install License",description:"Enter the license key provided by Extreme Networks",children:[e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{htmlFor:"license-key",children:"License Key"}),e.jsx(V,{id:"license-key",value:d,onChange:s=>k(s.target.value),placeholder:"XXXX-XXXX-XXXX-XXXX-XXXX",onKeyPress:s=>s.key==="Enter"&&C(),"aria-describedby":"license-key-hint","aria-label":"Enter license key"}),e.jsx("p",{id:"license-key-hint",className:"text-xs text-muted-foreground",children:"Enter the complete license key including dashes"})]})}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[e.jsx(b,{variant:"outline",onClick:()=>i(!1),disabled:N,"aria-label":"Cancel license installation",children:"Cancel"}),e.jsx(b,{onClick:C,disabled:N,"aria-label":"Install license key",children:N?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4 mr-2 animate-spin"}),"Installing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Install License"]})})]})]})]})}export{ue as LicenseDashboard};
