import{j as e,$ as At,B as ma,f as kt,a0 as xa,d as ha,J as ua,g as ga,K as pa,L as ja,G as Dt,H as fa,O as Na,E as va}from"./vendor-ui-CO0mBmim.js";import{a as d,c as ba}from"./vendor-react-BQC692LR.js";import{u as Ws,a as V,C as D,b as $,c as G,d as T,B as Q,e as P,D as Gs,f as ve,g as Tt,S as hs,h as ce,L as Rs,I as Hs,T as Ks,i as Qs,j as Ee,k as _e,A as ya,l as wa,m as Is,n as Ls,o as Es,p as Ms,q as Ye,P as Ca,r as Sa,s as Aa,t as fs,v as ka,w as zs}from"./index-CrdvL8SR.js";import{S as Da,P as Se,B as Ta}from"./BestPracticesWidget-CfEpE3yG.js";import{f as at,a as Pa,b as Ra,T as Ia}from"./units-YHb9M7pt.js";import{A as Ne,x as Ae,G as Pt,h as us,I as $e,T as Rt,f as ke,J as be,w as es,y as La,a9 as Ea,aa as bs,ab as Ma,ac as nt,a0 as za,ad as Oa,ae as Ua,af as $a,p as Fa,ag as Ba,ah as It,a1 as gs,Z as Vs,X as _s,d as ss,ai as ys,N as qe,P as Ga,M as Ha,W as Le,aj as os,z as Va,C as ms,v as We,k as rt,ak as vs,S as lt,al as it,r as _a,a3 as Ue,am as Ns,R as ts,an as qa,ao as Wa,ap as ct,K as Ka,H as Qa,i as dt,aq as Ze,ar as Ve,as as Ja,at as Xa,au as ds,av as Os,b as Us,aw as ot,ax as mt,ay as xt}from"./vendor-icons-DmoIqCnf.js";import{R as xs,A as Lt,C as ht,X as ut,Y as gt,T as ws,L as pt,a as qs,b as Ya,d as jt,e as Za,P as en,f as sn,g as tn,h as an,i as nn,j as rn,k as ln}from"./vendor-charts-CCS-1Xlq.js";import{T as cn,a as dn,b as on}from"./tooltip-8iq8-UkY.js";import{C as ft,a as Nt,b as vt}from"./collapsible-DGvlXWsX.js";import{AccessPointDetail as mn}from"./AccessPointDetail-B0gJCdMV.js";import{ClientDetail as xn}from"./ClientDetail-Cp0Sh9yq.js";import"./index-nrHyQllr.js";import"./TimelineControls-CCmpQUlq.js";import"./traffic-mTtwmE2a.js";const Et="ufqjnesldbacyltbsvys",Mt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmcWpuZXNsZGJhY3lsdGJzdnlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA3MjA4MTUsImV4cCI6MjA3NjI5NjgxNX0.9lZXSp3mRNb9h4Q0aO5wKouZ5yp8FVjotJunFF_bu4g",hn=`https://${Et}.supabase.co/functions/v1/make-server-efba0687`;class un{async makeRequest(s,i={}){const f=await fetch(`${hn}${s}`,{...i,headers:{"Content-Type":"application/json",Authorization:`Bearer ${Mt}`,...i.headers}});if(!f.ok){const j=await f.json().catch(()=>({error:"Unknown error"}));throw new Error(j.error||`HTTP ${f.status}: ${f.statusText}`)}return f.json()}async storeSnapshot(s){await this.makeRequest("/throughput/snapshot",{method:"POST",body:JSON.stringify(s)})}async getSnapshots(s,i,f){const j=new URLSearchParams;s&&j.append("startTime",s.toString()),i&&j.append("endTime",i.toString()),f&&j.append("limit",f.toString());const R=j.toString(),h=R?`/throughput/snapshots?${R}`:"/throughput/snapshots";return(await this.makeRequest(h)).snapshots||[]}async getLatestSnapshot(){return(await this.makeRequest("/throughput/latest")).snapshot||null}async getAggregatedStats(s,i){const f=new URLSearchParams({startTime:s.toString(),endTime:i.toString()});return this.makeRequest(`/throughput/aggregated?${f.toString()}`)}async getNetworkTrends(s,i,f){const j=new URLSearchParams;i&&j.append("startTime",i.toString()),f&&j.append("endTime",f.toString());const R=j.toString(),h=R?`/throughput/network/${encodeURIComponent(s)}?${R}`:`/throughput/network/${encodeURIComponent(s)}`;return(await this.makeRequest(h)).trends||[]}async clearAllData(){return(await this.makeRequest("/throughput/clear",{method:"DELETE"})).deletedCount||0}async getSnapshotsForLastHours(s){const i=Date.now(),f=i-s*60*60*1e3;return this.getSnapshots(f,i)}async getSnapshotsForLastMinutes(s){const i=Date.now(),f=i-s*60*1e3;return this.getSnapshots(f,i)}async getTodayStats(){const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),f=Date.now();return this.getAggregatedStats(i,f)}}const bt=new un,gn=`https://${Et}.supabase.co/functions/v1/make-server-efba0687`,$s={};function pn(r){const s=r.replace(/[:\-\.]/g,"").toUpperCase();if(s.length>=6){const i=s.substring(0,6);return`${i.substring(0,2)}:${i.substring(2,4)}:${i.substring(4,6)}`}return""}async function jn(r){try{const s=`${gn}/oui/lookup?mac=${encodeURIComponent(r)}`;console.log("[OUI Lookup] Fetching from:",s);const i=await fetch(s,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${Mt}`}});if(console.log("[OUI Lookup] Response status:",i.status,i.statusText),i.ok){const j=await i.json();return console.log("[OUI Lookup] Response data:",j),j.vendor||"Unknown Vendor"}const f=await i.text().catch(()=>"Unable to read error");return console.warn("[OUI Lookup] API error:",i.status,i.statusText,f),"Unknown Vendor"}catch(s){return console.error("[OUI Lookup] Failed to lookup vendor:",s),"Unknown Vendor"}}async function fn(r){if(!r)return"Unknown Vendor";const s=pn(r);if(!s)return"Unknown Vendor";if($s[s])return $s[s];const i=await jn(r);return $s[s]=i,i}function Nn(r){const s=r.toLowerCase();return s.includes("apple")?"ðŸŽ":s.includes("samsung")?"ðŸ“±":s.includes("dell")?"ðŸ’»":s.includes("hp")||s.includes("hewlett")?"ðŸ–¥ï¸":s.includes("lenovo")?"ðŸ’»":s.includes("microsoft")?"ðŸªŸ":s.includes("cisco")?"ðŸŒ":s.includes("intel")?"ðŸ”·":s.includes("google")?"ðŸ”":s.includes("amazon")?"ðŸ“¦":s.includes("sony")?"ðŸŽ®":s.includes("lg")?"ðŸ“º":s.includes("asus")?"ðŸ’»":s.includes("tp-link")||s.includes("tplink")||s.includes("netgear")||s.includes("ubiquiti")?"ðŸ“¡":s.includes("raspberry")?"ðŸ«":s.includes("espressif")?"ðŸ”§":s.includes("xiaomi")||s.includes("huawei")||s.includes("motorola")?"ðŸ“±":s.includes("nintendo")?"ðŸŽ®":"ðŸ“Ÿ"}function vn(r){if(r==="Unknown Vendor")return"Unknown";const s={"Apple, Inc.":"Apple","Samsung Electronics Co.,Ltd":"Samsung","Hewlett Packard":"HP","Cisco Systems, Inc":"Cisco","Intel Corporate":"Intel","Microsoft Corporation":"Microsoft","Google, Inc.":"Google","Amazon Technologies Inc.":"Amazon","TP-Link Corporation Limited":"TP-Link",NETGEAR:"Netgear","Ubiquiti Networks Inc.":"Ubiquiti","Raspberry Pi Trading Ltd":"Raspberry Pi","Espressif Inc.":"Espressif"};return s[r]?s[r]:r.split(/[,\(]/)[0].trim().split(" ")[0]}function bn(){const{filters:r}=Ws(),[s,i]=d.useState(null),[f,j]=d.useState(!0),[R,h]=d.useState(!1),[N,Y]=d.useState(null),[a,z]=d.useState(null);d.useEffect(()=>{L();const v=setInterval(L,12e4);return()=>clearInterval(v)},[r.site,r.timeRange]);const L=async()=>{try{j(!0),Y(null);const[v,C,S]=await Promise.all([r.site==="all"?V.getAccessPoints():V.getAccessPointsBySite(r.site),V.getStations(),V.getServices()]);let ee=C;if(r.site!=="all"){const U=await V.getSiteById(r.site),n=U?.name||U?.siteName||r.site;ee=C.filter(A=>A.siteName===n||A.siteId===r.site||A.siteName===r.site)}const b=o(v,ee),O=await c(),M=W(S,ee),_=Z(ee);i({organizationContext:b,criticalAlerts:O,serviceDegradation:M,clientExperience:_})}catch(v){console.error("[OperationalContextSummary] Error loading metrics:",v),Y("Failed to load operational metrics")}finally{j(!1)}},o=(v,C)=>{const S=u=>{const k=(u.status||u.connectionState||u.operationalState||u.state||"").toLowerCase(),X=u.isUp,le=u.online;return k==="inservice"||k.includes("up")||k.includes("online")||k.includes("connected")||X===!0||le===!0||!k&&X!==!1&&le!==!1},ee=v.length,b=v.filter(S).length,O=ee-b,M=ee>0?b/ee*100:100,_={"2.4GHz":0,"5GHz":0,"6GHz":0};v.forEach(u=>{const k=u;k.radios&&Array.isArray(k.radios)?k.radios.forEach(X=>{const le=X.band||X.radioBand||"";(le.includes("2.4")||X.radioType==="2.4GHz")&&_["2.4GHz"]++,(le.includes("5")||X.radioType==="5GHz")&&_["5GHz"]++,(le.includes("6")||X.radioType==="6GHz"||X.afc)&&_["6GHz"]++}):(_["2.4GHz"]++,_["5GHz"]++)});const U=C.length,n=ee>0?Math.round(U/ee*10)/10:0,A={};C.forEach(u=>{const k=u.apSerial||u.apName||"unknown";A[k]=(A[k]||0)+1});const ge=Object.values(A).filter(u=>u>30).length,ne=v.filter(u=>{const k=u;return k.gpsAnchor===!0||k.anchorLocSrc==="GPS"||k.pwrMode==="SP"||k.radios&&k.radios.some(X=>X.afc===!0)}).length,xe={"2.4GHz":0,"5GHz":0,"6GHz":0};C.forEach(u=>{const k=u,X=k.band||k.radioBand||k.radioType||"",le=k.channel||0;X.includes("2.4")||le>=1&&le<=14?xe["2.4GHz"]++:X.includes("6")||le>177?xe["6GHz"]++:(X.includes("5")||le>=36&&le<=177,xe["5GHz"]++)});const je={};C.forEach(u=>{const k=u.network||u.ssid||u.serviceName||"Unknown";je[k]=(je[k]||0)+1});const ns=Object.entries(je).sort((u,k)=>k[1]-u[1]).slice(0,5).map(([u,k])=>({name:u,clients:k})),De=v.map(u=>u.noiseFloor||u.noise).filter(u=>u!=null),Ke=De.length>0?Math.round(De.reduce((u,k)=>u+k,0)/De.length):-95,K=C.map(u=>u.snr||(u.signalStrength?u.signalStrength-Ke:null)).filter(u=>u!=null),rs=K.length>0?Math.round(K.reduce((u,k)=>u+k,0)/K.length):25,x={};C.forEach(u=>{const k=u.channel||0;k>0&&(x[k]=(x[k]||0)+1)});const g=Math.max(...Object.values(x),1),q=Math.min(100,Math.round(g/50*100)),F={};v.forEach(u=>{const k=u;[k.channel24,k.channel5,k.channel].filter(le=>le).forEach(le=>{F[le]=(F[le]||0)+1})});const me=Object.values(F).filter(u=>u>1).length,he=Math.round(me/Math.max(ee,1)*100),Fe=Math.round(he*.5),ye=C.filter(u=>u.signalStrength&&u.signalStrength<-75||u.rss&&u.rss<-75).length,Te=U>0?Math.round(ye/U*100):0,Be=C.filter(u=>u.roamCount>0).length,ls=C.filter(u=>u.status?.toLowerCase()==="failed"||u.status?.toLowerCase()==="auth_failed"||u.authStatus==="failed").length,Cs=0,Ss=0,Ge=C.map(u=>u.latency||u.rtt).filter(u=>u!=null),is=Ge.length>0?Math.round(Ge.reduce((u,k)=>u+k,0)/Ge.length):0,cs=C.map(u=>u.packetLoss||u.txDropped).filter(u=>u!=null),fe=cs.length>0?Math.round(cs.reduce((u,k)=>u+k,0)/cs.length*10)/10:0,Pe=0,pe=C.filter(u=>u.signalStrength&&u.signalStrength>-70||u.rss&&u.rss>-70).length,ze=U>0?pe/U*100:100,Ce=M*.4+ze*.6;let we;return Ce>=95?we="excellent":Ce>=85?we="good":Ce>=70?we="degraded":we="critical",{score:Math.round(Ce*10)/10,status:we,details:{apUptime:Math.round(M*10)/10,throughputEfficiency:Math.round(ze*10)/10,totalAPs:ee,onlineAPs:b,offlineAPs:O,apsByBand:_,avgClientsPerAP:n,overloadedAPs:ge,afcModeAPs:ne,totalClients:U,clientsByBand:xe,busiestSSIDs:ns,avgNoiseFloor:Ke,avgSNR:rs,channelUtilization:q,coChannelInterference:he,adjacentChannelInterference:Fe,weakSignalClients:ye,coverageHoleIndicator:Te,roamingEvents:Be,failedAuthAttempts:ls,rogueAPDetections:Cs,securityViolations:Ss,avgLatency:is,packetLossRate:fe,dnsResolutionTime:Pe}}},c=async()=>{try{const C=(await V.getAlerts?.()||[]).filter(S=>S.severity?.toLowerCase()==="critical"||S.priority?.toLowerCase()==="critical");return{count:C.length,alerts:C.slice(0,5)}}catch(v){return console.warn("[OperationalHealthSummary] Alerts API not available:",v),{count:0,alerts:[]}}},W=(v,C)=>{const S=v.filter(ee=>{const b=C.filter(U=>U.serviceName===ee.name||U.network===ee.name||U.ssid===ee.ssid),O=b.length>0,M=b.some(U=>U.signalStrength&&U.signalStrength<-80||U.rss&&U.rss<-80),_=b.some(U=>U.retryRate&&U.retryRate>50);return O&&(M||_)});return{count:S.length,services:S.slice(0,5)}},Z=v=>{if(v.length===0)return{score:100,status:"excellent",details:{avgSignalStrength:0,authFailureRate:0,avgRetryRate:0}};const C=v.filter(ne=>ne.signalStrength||ne.rss),S=C.length>0?C.reduce((ne,xe)=>ne+(xe.signalStrength||xe.rss||0),0)/C.length:-50,b=v.filter(ne=>ne.status?.toLowerCase()==="disconnected"||ne.status?.toLowerCase()==="failed").length/v.length*100,M=v.filter(ne=>ne.signalStrength&&ne.signalStrength<-75||ne.rss&&ne.rss<-75).length/v.length*100;let _=100;S<-80?_=40:S<-70?_=70:S<-60&&(_=85);const U=100-b,n=100-M,A=_*.5+U*.3+n*.2;let ge;return A>=90?ge="excellent":A>=75?ge="good":A>=60?ge="degraded":ge="critical",{score:Math.round(A*10)/10,status:ge,details:{avgSignalStrength:Math.round(S*10)/10,authFailureRate:Math.round(b*10)/10,avgRetryRate:Math.round(M*10)/10}}},te=v=>{switch(v){case"excellent":return"text-green-600 dark:text-green-400";case"good":return"text-blue-600 dark:text-blue-400";case"degraded":return"text-yellow-600 dark:text-yellow-400";case"critical":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},y=v=>{switch(v){case"excellent":return e.jsx(es,{className:"h-5 w-5 text-green-600"});case"good":return e.jsx(es,{className:"h-5 w-5 text-blue-600"});case"degraded":return e.jsx(be,{className:"h-5 w-5 text-yellow-600"});case"critical":return e.jsx(La,{className:"h-5 w-5 text-red-600"});default:return e.jsx(Ne,{className:"h-5 w-5 text-gray-600"})}},H=v=>{switch(v){case"excellent":return"default";case"good":return"secondary";case"degraded":return"outline";case"critical":return"destructive";default:return"outline"}};return f?e.jsxs(D,{className:"w-full",children:[e.jsx($,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Operational Context Summary"]})}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-pulse",children:"Loading health metrics..."})})})]}):N||!s?e.jsxs(D,{className:"w-full border-red-200 dark:border-red-800",children:[e.jsx($,{children:e.jsxs(G,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Operational Context Summary"]})}),e.jsx(T,{children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:N||"Unable to load health metrics"})})]}):e.jsxs(D,{className:"w-full",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Operational Context Summary"]}),e.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>h(!R),children:R?e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Hide Details"]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"h-4 w-4 mr-1"}),"Show Details"]})})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"p-4 border rounded-lg bg-card cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>z("organization"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:["Organization Context",e.jsx($e,{className:"h-3 w-3"})]}),e.jsxs("div",{className:`text-3xl font-bold ${te(s.organizationContext.status)}`,children:[s.organizationContext.score,"%"]}),e.jsx(P,{variant:H(s.organizationContext.status),className:"mt-2 text-xs",children:s.organizationContext.status.toUpperCase()})]}),y(s.organizationContext.status)]})}),e.jsx("div",{className:"p-4 border rounded-lg bg-card cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>z("alerts"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:["Critical Alerts",e.jsx($e,{className:"h-3 w-3"})]}),e.jsx("div",{className:`text-3xl font-bold ${s.criticalAlerts.count>0?"text-red-600":"text-green-600"}`,children:s.criticalAlerts.count}),e.jsx(P,{variant:s.criticalAlerts.count>0?"destructive":"default",className:"mt-2 text-xs",children:s.criticalAlerts.count>0?"ACTION REQUIRED":"ALL CLEAR"})]}),e.jsx(Ae,{className:`h-5 w-5 ${s.criticalAlerts.count>0?"text-red-600":"text-green-600"}`})]})}),e.jsx("div",{className:"p-4 border rounded-lg bg-card cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>z("services"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:["Service Issues",e.jsx($e,{className:"h-3 w-3"})]}),e.jsx("div",{className:`text-3xl font-bold ${s.serviceDegradation.count>0?"text-yellow-600":"text-green-600"}`,children:s.serviceDegradation.count}),e.jsx(P,{variant:s.serviceDegradation.count>0?"outline":"default",className:"mt-2 text-xs",children:s.serviceDegradation.count>0?"DEGRADED":"ALL CLEAR"})]}),e.jsx(Rt,{className:`h-5 w-5 ${s.serviceDegradation.count>0?"text-yellow-600":"text-green-600"}`})]})}),e.jsx("div",{className:"p-4 border rounded-lg bg-card cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>z("experience"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-1 flex items-center gap-1",children:["Client Experience",e.jsx($e,{className:"h-3 w-3"})]}),e.jsxs("div",{className:`text-3xl font-bold ${te(s.clientExperience.status)}`,children:[s.clientExperience.score,"%"]}),e.jsx(P,{variant:H(s.clientExperience.status),className:"mt-2 text-xs",children:s.clientExperience.status.toUpperCase()})]}),e.jsx(ke,{className:"h-5 w-5"})]})})]}),R&&e.jsxs("div",{className:"mt-6 pt-6 border-t space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Organization Context Breakdown"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"AP Uptime:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.organizationContext.details.apUptime,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Throughput:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.organizationContext.details.throughputEfficiency,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total APs:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.organizationContext.details.onlineAPs,"/",s.organizationContext.details.totalAPs]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Clients:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.organizationContext.details.totalClients})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg SNR:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.organizationContext.details.avgSNR," dB"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Channel Util:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.organizationContext.details.channelUtilization,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Weak Signal:"}),e.jsx("span",{className:`ml-2 font-medium ${s.organizationContext.details.weakSignalClients>0?"text-yellow-600":""}`,children:s.organizationContext.details.weakSignalClients})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"AFC APs:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-600",children:s.organizationContext.details.afcModeAPs})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Client Experience Breakdown"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg Signal:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.clientExperience.details.avgSignalStrength," dBm"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auth Failures:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.clientExperience.details.authFailureRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Retry Rate:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.clientExperience.details.avgRetryRate,"%"]})]})]})]}),s.serviceDegradation.count>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Degraded Services"}),e.jsx("ul",{className:"space-y-1 text-sm",children:s.serviceDegradation.services.map((v,C)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{children:v.name||v.serviceName||v.ssid}),e.jsx(P,{variant:"outline",className:"text-xs",children:"Performance Issue"})]},C))})]}),s.criticalAlerts.count>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Critical Alerts"}),e.jsx("ul",{className:"space-y-1 text-sm",children:s.criticalAlerts.alerts.map((v,C)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{children:v.message||v.description||"Critical alert"})]},C))})]})]})]}),e.jsx(Gs,{isOpen:a!==null,onClose:()=>z(null),title:a==="organization"?"Organization Context Details":a==="alerts"?"Critical Alerts Details":a==="services"?"Service Issues Details":a==="experience"?"Client Experience Details":"Details",description:"Detailed breakdown and insights",width:"lg",children:e.jsxs("div",{className:"space-y-4",children:[a==="organization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Overall Score"}),e.jsxs("div",{className:`text-4xl font-bold ${te(s.organizationContext.status)}`,children:[s.organizationContext.score,"%"]})]}),e.jsx(P,{variant:H(s.organizationContext.status),children:s.organizationContext.status.toUpperCase()})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Core Metrics"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"AP Uptime"}),e.jsxs("span",{className:"font-bold",children:[s.organizationContext.details.apUptime,"%"]})]}),e.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${s.organizationContext.details.apUptime}%`}})})]}),e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Throughput Efficiency"}),e.jsxs("span",{className:"font-bold",children:[s.organizationContext.details.throughputEfficiency,"%"]})]}),e.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all",style:{width:`${s.organizationContext.details.throughputEfficiency}%`}})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold border-b pb-2",children:"Infrastructure Health"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total APs"}),e.jsx("div",{className:"text-2xl font-bold",children:s.organizationContext.details.totalAPs}),e.jsxs("div",{className:"text-xs mt-1",children:[e.jsxs("span",{className:"text-green-600",children:[s.organizationContext.details.onlineAPs," online"]}),s.organizationContext.details.offlineAPs>0&&e.jsxs("span",{className:"text-red-600 ml-2",children:[s.organizationContext.details.offlineAPs," offline"]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Clients/AP"}),e.jsx("div",{className:"text-2xl font-bold",children:s.organizationContext.details.avgClientsPerAP}),s.organizationContext.details.overloadedAPs>0&&e.jsxs("div",{className:"text-xs text-yellow-600 mt-1",children:[s.organizationContext.details.overloadedAPs," overloaded"]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"APs by Band"}),e.jsxs("div",{className:"text-sm mt-1 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"2.4 GHz:"}),e.jsx("span",{className:"font-medium",children:s.organizationContext.details.apsByBand["2.4GHz"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"5 GHz:"}),e.jsx("span",{className:"font-medium",children:s.organizationContext.details.apsByBand["5GHz"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"6 GHz:"}),e.jsx("span",{className:"font-medium",children:s.organizationContext.details.apsByBand["6GHz"]})]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"AFC Mode (6 GHz SP)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.organizationContext.details.afcModeAPs}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Standard Power APs"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold border-b pb-2",children:"Capacity & Utilization"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Clients"}),e.jsx("div",{className:"text-2xl font-bold",children:s.organizationContext.details.totalClients})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Clients by Band"}),e.jsxs("div",{className:"text-sm mt-1 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"2.4 GHz:"}),e.jsx("span",{className:"font-medium",children:s.organizationContext.details.clientsByBand["2.4GHz"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"5 GHz:"}),e.jsx("span",{className:"font-medium",children:s.organizationContext.details.clientsByBand["5GHz"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"6 GHz:"}),e.jsx("span",{className:"font-medium",children:s.organizationContext.details.clientsByBand["6GHz"]})]})]})]})]}),s.organizationContext.details.busiestSSIDs.length>0&&e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Busiest SSIDs"}),e.jsx("div",{className:"space-y-2",children:s.organizationContext.details.busiestSSIDs.map((v,C)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm truncate max-w-[150px]",children:v.name}),e.jsxs(P,{variant:"secondary",children:[v.clients," clients"]})]},C))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold border-b pb-2",children:"RF Quality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Noise Floor"}),e.jsxs("div",{className:"text-2xl font-bold",children:[s.organizationContext.details.avgNoiseFloor," dBm"]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg SNR"}),e.jsxs("div",{className:"text-2xl font-bold",children:[s.organizationContext.details.avgSNR," dB"]}),e.jsx("div",{className:"text-xs mt-1",children:s.organizationContext.details.avgSNR>=25?e.jsx("span",{className:"text-green-600",children:"Excellent"}):s.organizationContext.details.avgSNR>=15?e.jsx("span",{className:"text-yellow-600",children:"Good"}):e.jsx("span",{className:"text-red-600",children:"Poor"})})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Channel Utilization"}),e.jsxs("div",{className:"text-2xl font-bold",children:[s.organizationContext.details.channelUtilization,"%"]}),e.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${s.organizationContext.details.channelUtilization>80?"bg-red-500":s.organizationContext.details.channelUtilization>50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${s.organizationContext.details.channelUtilization}%`}})})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Interference"}),e.jsxs("div",{className:"text-sm mt-1 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Co-Channel:"}),e.jsxs("span",{className:`font-medium ${s.organizationContext.details.coChannelInterference>30?"text-red-600":"text-green-600"}`,children:[s.organizationContext.details.coChannelInterference,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Adjacent:"}),e.jsxs("span",{className:`font-medium ${s.organizationContext.details.adjacentChannelInterference>20?"text-yellow-600":"text-green-600"}`,children:[s.organizationContext.details.adjacentChannelInterference,"%"]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold border-b pb-2",children:"Coverage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Weak Signal Clients"}),e.jsx("div",{className:`text-2xl font-bold ${s.organizationContext.details.weakSignalClients>0?"text-yellow-600":"text-green-600"}`,children:s.organizationContext.details.weakSignalClients}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"<-75 dBm"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Coverage Holes"}),e.jsxs("div",{className:`text-2xl font-bold ${s.organizationContext.details.coverageHoleIndicator>10?"text-red-600":s.organizationContext.details.coverageHoleIndicator>5?"text-yellow-600":"text-green-600"}`,children:[s.organizationContext.details.coverageHoleIndicator,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"of clients affected"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Roaming Events"}),e.jsx("div",{className:"text-2xl font-bold",children:s.organizationContext.details.roamingEvents})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold border-b pb-2",children:"Security"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Failed Auth (24h)"}),e.jsx("div",{className:`text-2xl font-bold ${s.organizationContext.details.failedAuthAttempts>0?"text-red-600":"text-green-600"}`,children:s.organizationContext.details.failedAuthAttempts})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card relative",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rogue APs"}),e.jsx("div",{className:"text-2xl font-bold text-muted-foreground/50",children:"â€”"}),e.jsx("div",{className:"text-[10px] text-orange-500 mt-1",children:"API not available"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card relative",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Violations"}),e.jsx("div",{className:"text-2xl font-bold text-muted-foreground/50",children:"â€”"}),e.jsx("div",{className:"text-[10px] text-orange-500 mt-1",children:"API not available"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold border-b pb-2",children:"Network"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Latency"}),s.organizationContext.details.avgLatency>0?e.jsxs("div",{className:"text-2xl font-bold",children:[s.organizationContext.details.avgLatency," ms"]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground/50",children:"â€”"}),e.jsx("div",{className:"text-[10px] text-orange-500 mt-1",children:"No data available"})]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Packet Loss"}),e.jsxs("div",{className:`text-2xl font-bold ${s.organizationContext.details.packetLossRate>1?"text-red-600":"text-green-600"}`,children:[s.organizationContext.details.packetLossRate,"%"]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"DNS Resolution"}),s.organizationContext.details.dnsResolutionTime>0?e.jsxs("div",{className:"text-2xl font-bold",children:[s.organizationContext.details.dnsResolutionTime," ms"]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground/50",children:"â€”"}),e.jsx("div",{className:"text-[10px] text-orange-500 mt-1",children:"API not available"})]})]})]})]}),e.jsx("div",{className:"p-4 bg-muted/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"The Organization Context score is a weighted composite of AP uptime (40%) and throughput efficiency (60%). Additional metrics provide detailed insights into infrastructure health, RF quality, coverage, security, and network performance."})})]}),a==="alerts"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Critical Alerts"}),e.jsx("div",{className:`text-4xl font-bold ${s.criticalAlerts.count>0?"text-red-600":"text-green-600"}`,children:s.criticalAlerts.count})]}),e.jsx(P,{variant:s.criticalAlerts.count>0?"destructive":"default",children:s.criticalAlerts.count>0?"ACTION REQUIRED":"ALL CLEAR"})]}),s.criticalAlerts.count>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Active Alerts"}),s.criticalAlerts.alerts.map((v,C)=>e.jsx("div",{className:"p-3 rounded-lg border border-red-500/50 bg-red-500/5",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:v.message||v.description||"Critical alert"})]})},C))]}):e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg text-center",children:[e.jsx(es,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No critical alerts at this time. All systems operating normally."})]})]}),a==="services"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Service Issues"}),e.jsx("div",{className:`text-4xl font-bold ${s.serviceDegradation.count>0?"text-yellow-600":"text-green-600"}`,children:s.serviceDegradation.count})]}),e.jsx(P,{variant:s.serviceDegradation.count>0?"outline":"default",children:s.serviceDegradation.count>0?"DEGRADED":"ALL CLEAR"})]}),s.serviceDegradation.count>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Degraded Services"}),s.serviceDegradation.services.map((v,C)=>e.jsx("div",{className:"p-3 rounded-lg border border-yellow-500/50 bg-yellow-500/5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:v.name||v.serviceName||v.ssid})]}),e.jsx(P,{variant:"outline",className:"text-xs",children:"Performance Issue"})]})},C))]}):e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg text-center",children:[e.jsx(es,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All services operating normally with no performance degradation detected."})]})]}),a==="experience"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Client Experience Score"}),e.jsxs("div",{className:`text-4xl font-bold ${te(s.clientExperience.status)}`,children:[s.clientExperience.score,"%"]})]}),e.jsx(P,{variant:H(s.clientExperience.status),children:s.clientExperience.status.toUpperCase()})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Experience Metrics"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Signal Strength"}),e.jsxs("span",{className:"font-bold",children:[s.clientExperience.details.avgSignalStrength," dBm"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.clientExperience.details.avgSignalStrength>-60?"Excellent":s.clientExperience.details.avgSignalStrength>-70?"Good":s.clientExperience.details.avgSignalStrength>-80?"Fair":"Poor"," signal quality"]})]}),e.jsx("div",{className:"p-3 rounded-lg border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Authentication Failure Rate"}),e.jsxs("span",{className:"font-bold",children:[s.clientExperience.details.authFailureRate,"%"]})]})}),e.jsx("div",{className:"p-3 rounded-lg border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Retry Rate"}),e.jsxs("span",{className:"font-bold",children:[s.clientExperience.details.avgRetryRate,"%"]})]})})]})]}),e.jsx("div",{className:"p-4 bg-muted/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Client Experience score combines signal strength (50%), authentication success (30%), and retry rates (20%) to measure overall end-user satisfaction."})})]})]})})]})}const yn=d.memo(bn);d.createContext(void 0);function zt(r){return r?r.displayName||r.name||r.siteName||"Unknown Site":""}const wn=[{name:"apUptimeThreshold",label:"AP Uptime",description:"Minimum acceptable access point uptime percentage",min:50,max:100,defaultValue:95,unit:"%",category:"reliability"},{name:"throughputThreshold",label:"Throughput",description:"Minimum acceptable network throughput",min:1,max:1e3,defaultValue:50,unit:"Mbps",category:"performance"},{name:"signalQualityThreshold",label:"Signal Quality (RSSI)",description:"Minimum acceptable signal strength",min:-90,max:-30,defaultValue:-70,unit:"dBm",category:"quality"},{name:"clientDensity",label:"Client Density",description:"Expected number of clients per access point",min:1,max:100,defaultValue:25,unit:"clients/AP",category:"performance"},{name:"latencyThreshold",label:"Latency",description:"Maximum acceptable network latency",min:1,max:500,defaultValue:50,unit:"ms",category:"performance"},{name:"packetLossThreshold",label:"Packet Loss",description:"Maximum acceptable packet loss percentage",min:0,max:10,defaultValue:1,unit:"%",category:"quality"},{name:"coverageThreshold",label:"Coverage",description:"Minimum required coverage percentage",min:50,max:100,defaultValue:90,unit:"%",category:"reliability"},{name:"interferenceThreshold",label:"Interference",description:"Maximum acceptable interference level",min:0,max:50,defaultValue:15,unit:"%",category:"quality"}],Fs=[{id:"retail-store",name:"Retail Store",description:"High-density customer environment with moderate throughput needs",color:"#3b82f6",metrics:{apUptimeThreshold:99,throughputThreshold:30,signalQualityThreshold:-65,clientDensity:40,latencyThreshold:30,packetLossThreshold:.5,coverageThreshold:95,interferenceThreshold:10},isCustom:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"warehouse",name:"Warehouse",description:"Large coverage area with mobile devices and scanners",color:"#f59e0b",metrics:{apUptimeThreshold:98,throughputThreshold:20,signalQualityThreshold:-75,clientDensity:15,latencyThreshold:50,packetLossThreshold:1,coverageThreshold:98,interferenceThreshold:20},isCustom:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"distribution-center",name:"Distribution Center",description:"Critical operations requiring high reliability and coverage",color:"#8b5cf6",metrics:{apUptimeThreshold:99.5,throughputThreshold:50,signalQualityThreshold:-70,clientDensity:20,latencyThreshold:40,packetLossThreshold:.5,coverageThreshold:99,interferenceThreshold:10},isCustom:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"headquarters",name:"Headquarters",description:"Office environment with high throughput and quality requirements",color:"#10b981",metrics:{apUptimeThreshold:99.9,throughputThreshold:100,signalQualityThreshold:-60,clientDensity:30,latencyThreshold:20,packetLossThreshold:.3,coverageThreshold:95,interferenceThreshold:15},isCustom:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],yt="site_contexts",wt="selected_site_context";function Ot(){const[r,s]=d.useState([]),[i,f]=d.useState("all"),[j,R]=d.useState(!0);d.useEffect(()=>{h(),N()},[]),d.useEffect(()=>{!j&&r.length>0&&Y()},[r,j]),d.useEffect(()=>{j||a()},[i,j]);const h=()=>{try{const y=localStorage.getItem(yt);if(y){const H=JSON.parse(y);s(H)}else s(Fs)}catch(y){console.error("[useSiteContexts] Failed to load contexts:",y),s(Fs)}finally{R(!1)}},N=()=>{try{const y=localStorage.getItem(wt);y&&f(y)}catch(y){console.error("[useSiteContexts] Failed to load selected context:",y)}},Y=()=>{try{localStorage.setItem(yt,JSON.stringify(r))}catch(y){console.error("[useSiteContexts] Failed to save contexts:",y)}},a=()=>{try{localStorage.setItem(wt,i)}catch(y){console.error("[useSiteContexts] Failed to save selected context:",y)}},z=d.useCallback(y=>{const H={...y,id:`custom-${Date.now()}`,isCustom:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s(v=>[...v,H]),H},[]),L=d.useCallback((y,H)=>{s(v=>v.map(C=>C.id===y?{...C,...H,updatedAt:new Date().toISOString()}:C))},[]),o=d.useCallback(y=>{s(H=>H.filter(v=>v.id!==y)),i===y&&f("all")},[i]),c=d.useCallback(y=>r.find(H=>H.id===y),[r]),W=d.useCallback(y=>{f(y)},[]),Z=d.useCallback(()=>{s(Fs),f("all")},[]),te=i==="all"?null:c(i);return{contexts:r,selectedContextId:i,selectedContext:te,isLoading:j,addContext:z,updateContext:L,deleteContext:o,getContext:c,selectContext:W,resetToDefaults:Z}}var Cn=Symbol("radix.slottable");function Sn(r){const s=({children:i})=>e.jsx(e.Fragment,{children:i});return s.displayName=`${r}.Slottable`,s.__radixId=Cn,s}var Ut="AlertDialog",[An]=ha(Ut,[At]),Me=At(),$t=r=>{const{__scopeAlertDialog:s,...i}=r,f=Me(s);return e.jsx(ma,{...f,...i,modal:!0})};$t.displayName=Ut;var kn="AlertDialogTrigger",Dn=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,...f}=r,j=Me(i);return e.jsx(va,{...j,...f,ref:s})});Dn.displayName=kn;var Tn="AlertDialogPortal",Ft=r=>{const{__scopeAlertDialog:s,...i}=r,f=Me(s);return e.jsx(fa,{...f,...i})};Ft.displayName=Tn;var Pn="AlertDialogOverlay",Bt=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,...f}=r,j=Me(i);return e.jsx(Na,{...j,...f,ref:s})});Bt.displayName=Pn;var as="AlertDialogContent",[Rn,In]=An(as),Ln=Sn("AlertDialogContent"),Gt=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,children:f,...j}=r,R=Me(i),h=d.useRef(null),N=kt(s,h),Y=d.useRef(null);return e.jsx(xa,{contentName:as,titleName:Ht,docsSlug:"alert-dialog",children:e.jsx(Rn,{scope:i,cancelRef:Y,children:e.jsxs(ua,{role:"alertdialog",...R,...j,ref:N,onOpenAutoFocus:ga(j.onOpenAutoFocus,a=>{a.preventDefault(),Y.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[e.jsx(Ln,{children:f}),e.jsx(Mn,{contentRef:h})]})})})});Gt.displayName=as;var Ht="AlertDialogTitle",Vt=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,...f}=r,j=Me(i);return e.jsx(pa,{...j,...f,ref:s})});Vt.displayName=Ht;var _t="AlertDialogDescription",qt=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,...f}=r,j=Me(i);return e.jsx(ja,{...j,...f,ref:s})});qt.displayName=_t;var En="AlertDialogAction",Wt=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,...f}=r,j=Me(i);return e.jsx(Dt,{...j,...f,ref:s})});Wt.displayName=En;var Kt="AlertDialogCancel",Qt=d.forwardRef((r,s)=>{const{__scopeAlertDialog:i,...f}=r,{cancelRef:j}=In(Kt,i),R=Me(i),h=kt(s,j);return e.jsx(Dt,{...R,...f,ref:h})});Qt.displayName=Kt;var Mn=({contentRef:r})=>{const s=`\`${as}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${as}\` by passing a \`${_t}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${as}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(r.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,r]),null},zn=$t,On=Ft,Un=Bt,$n=Gt,Fn=Wt,Bn=Qt,Gn=Vt,Hn=qt;function Vn({...r}){return e.jsx(zn,{"data-slot":"alert-dialog",...r})}function _n({...r}){return e.jsx(On,{"data-slot":"alert-dialog-portal",...r})}function qn({className:r,...s}){return e.jsx(Un,{"data-slot":"alert-dialog-overlay",className:ve("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...s})}function Wn({className:r,...s}){return e.jsxs(_n,{children:[e.jsx(qn,{}),e.jsx($n,{"data-slot":"alert-dialog-content",className:ve("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...s})]})}function Kn({className:r,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:ve("flex flex-col gap-2 text-center sm:text-left",r),...s})}function Qn({className:r,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:ve("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...s})}function Jn({className:r,...s}){return e.jsx(Gn,{"data-slot":"alert-dialog-title",className:ve("text-lg font-semibold",r),...s})}function Xn({className:r,...s}){return e.jsx(Hn,{"data-slot":"alert-dialog-description",className:ve("text-muted-foreground text-sm",r),...s})}function Yn({className:r,...s}){return e.jsx(Fn,{className:ve(Tt(),r),...s})}function Zn({className:r,...s}){return e.jsx(Bn,{className:ve(Tt({variant:"outline"}),r),...s})}const Ct=r=>{const s=r.toLowerCase();return s.includes("retail")||s.includes("store")?Ua:s.includes("warehouse")||s.includes("distribution")?$a:s.includes("headquarters")||s.includes("office")||s.includes("corporate")?Fa:Ba};function Jt({open:r,onOpenChange:s}){const{contexts:i,addContext:f,updateContext:j,deleteContext:R,resetToDefaults:h}=Ot(),[N,Y]=d.useState(null),[a,z]=d.useState(null),[L,o]=d.useState(!1),[c,W]=d.useState(!1),[Z,te]=d.useState(null);ba.useEffect(()=>{r&&i.length>0&&!N&&Y(i[0].id)},[r,i,N]);const y=N&&i.find(b=>b.id===N)||null,H=()=>{z({name:"New Context",description:"Custom context configuration",color:"#6b7280",metrics:{apUptimeThreshold:95,throughputThreshold:50,signalQualityThreshold:-70,clientDensity:25,latencyThreshold:50,packetLossThreshold:1,coverageThreshold:90,interferenceThreshold:15},isCustom:!0}),o(!0)},v=()=>{if(a){if(L){const b=f(a);Y(b.id),o(!1)}else N&&j(N,a);z(null)}},C=()=>{Z&&(R(Z),N===Z&&Y(null),te(null),W(!1))},S=(b,O)=>{a&&z({...a,metrics:{...a.metrics,[b]:O}})},ee=b=>{const O=a||y;if(!O)return null;const M=O.metrics[b.name],_=!!a;return e.jsxs("div",{className:"space-y-3 p-4 rounded-lg bg-muted/30 border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{htmlFor:b.name,className:"text-sm font-medium",children:b.label}),e.jsx(P,{variant:"outline",className:"text-xs",children:b.category})]}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums",children:[M," ",b.unit]})]}),e.jsx(Da,{id:b.name,min:b.min,max:b.max,step:b.unit==="%"?1:b.max-b.min>100?5:1,value:[M],onValueChange:([U])=>_&&S(b.name,U),disabled:!_,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.description})]},b.name)};return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-background",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"border-b bg-background px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>s(!1),className:"mr-2",children:[e.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(bs,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Configure Site Contexts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Define baseline metrics for different types of sites to understand what "healthy" means in each environment'})]})]}),e.jsxs(Q,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"w-80 border-r bg-muted/20 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Contexts"}),e.jsxs(Q,{size:"sm",onClick:H,children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"New"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.length," context",i.length!==1?"s":""," configured"]})]}),e.jsx(hs,{className:"flex-1 p-4",children:e.jsx("div",{className:"space-y-2",children:i.map(b=>{const O=Ct(b.name);return e.jsx(D,{className:`cursor-pointer transition-all hover:shadow-md ${N===b.id?"border-primary ring-1 ring-primary shadow-md":"hover:border-muted-foreground/30"}`,onClick:()=>{Y(b.id),z(null),o(!1)},children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${b.color}20`},children:e.jsx(O,{className:"h-5 w-5",style:{color:b.color}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(G,{className:"text-sm font-medium truncate",children:b.name}),e.jsx(ce,{className:"text-xs mt-0.5 line-clamp-2",children:b.description}),b.isCustom&&e.jsx(P,{variant:"secondary",className:"text-xs mt-2",children:"Custom"})]})]})})},b.id)})})})]}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:y||a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[!a&&y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:`${y.color}20`},children:(()=>{const b=Ct(y.name);return e.jsx(b,{className:"h-6 w-6",style:{color:y.color}})})()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:y.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:y.description})]})]}),a&&e.jsx("h2",{className:"text-xl font-semibold",children:L?"Create New Context":"Edit Context"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!a&&y?.isCustom&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>z({...y}),children:"Edit"}),e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>{te(y.id),W(!0)},children:e.jsx(za,{className:"h-4 w-4 text-destructive"})})]}),!a&&y&&!y.isCustom&&e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>z({...y}),children:"Customize"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:"sm",variant:"outline",onClick:()=>{z(null),o(!1)},children:"Cancel"}),e.jsxs(Q,{size:"sm",onClick:v,children:[e.jsx(Oa,{className:"mr-2 h-4 w-4"}),L?"Create":"Save"]})]})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Rs,{htmlFor:"name",children:"Context Name"}),e.jsx(Hs,{id:"name",value:a.name,onChange:b=>z({...a,name:b.target.value}),placeholder:"e.g., Retail Store, Warehouse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Rs,{htmlFor:"description",children:"Description"}),e.jsx(Hs,{id:"description",value:a.description,onChange:b=>z({...a,description:b.target.value}),placeholder:"Brief description of this environment"})]})]})]}),e.jsx(hs,{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Baseline Metrics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?'Adjust the thresholds below to define what "healthy" means for this type of site.':'These thresholds define what "healthy" means for this type of site.'})]}),e.jsxs(Ks,{defaultValue:"performance",className:"w-full",children:[e.jsxs(Qs,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsx(Ee,{value:"performance",className:"gap-2",children:"Performance"}),e.jsx(Ee,{value:"reliability",className:"gap-2",children:"Reliability"}),e.jsx(Ee,{value:"quality",className:"gap-2",children:"Quality"})]}),["performance","reliability","quality"].map(b=>e.jsx(_e,{value:b,className:"mt-0",children:e.jsx("div",{className:"grid gap-4",children:wn.filter(O=>O.category===b).map(O=>ee(O))})},b))]}),!a&&y&&e.jsxs(ya,{className:"mt-6",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx(wa,{children:y.isCustom?'This is a custom context. Click "Edit" to modify its settings.':'This is a default context. Click "Customize" to create your own version with modified thresholds.'})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg font-medium",children:"Select a context to view and edit"}),e.jsx("p",{className:"text-sm mt-2",children:"or create a new custom context"}),e.jsxs(Q,{size:"sm",className:"mt-4",onClick:H,children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Create New Context"]})]})})})]})})]})}),e.jsx(Vn,{open:c,onOpenChange:W,children:e.jsxs(Wn,{children:[e.jsxs(Kn,{children:[e.jsx(Jn,{children:"Delete Context"}),e.jsx(Xn,{children:"Are you sure you want to delete this context? This action cannot be undone."})]}),e.jsxs(Qn,{children:[e.jsx(Zn,{children:"Cancel"}),e.jsx(Yn,{onClick:C,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]}):null}function er({showSiteFilter:r=!0,showTimeRangeFilter:s=!0,showContextFilter:i=!1,customFilters:f,onFilterChange:j,className:R=""}){const{filters:h,updateFilter:N,resetFilters:Y,hasActiveFilters:a}=Ws(),{contexts:z,selectedContextId:L,selectContext:o}=Ot(),[c,W]=d.useState([]),[Z,te]=d.useState(!1),[y,H]=d.useState(!1);d.useEffect(()=>{r&&v()},[r]),d.useEffect(()=>{j&&j({site:h.site,timeRange:h.timeRange,context:L})},[h.site,h.timeRange,L,j]);const v=async()=>{te(!0);try{const S=await V.getSites();W(S)}catch(S){console.warn("[FilterBar] Failed to load sites:",S)}finally{te(!1)}},C=[{value:"15m",label:"Last 15 minutes"},{value:"1h",label:"Last hour"},{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"custom",label:"Custom range"}];return e.jsxs("div",{className:`flex flex-col sm:flex-row gap-4 items-start sm:items-center ${R}`,children:[e.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[r&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Is,{value:h.site,onValueChange:S=>N("site",S),disabled:Z,children:[e.jsxs(Ls,{className:"w-48 h-10",children:[e.jsx(It,{className:"mr-2 h-4 w-4 flex-shrink-0"}),e.jsx(Es,{placeholder:"Select Site"})]}),e.jsxs(Ms,{children:[e.jsx(Ye,{value:"all",children:"All Sites"}),c.map(S=>e.jsx(Ye,{value:S.id,children:zt(S)},S.id))]})]})}),s&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Is,{value:h.timeRange,onValueChange:S=>N("timeRange",S),children:[e.jsxs(Ls,{className:"w-48 h-10",children:[e.jsx(gs,{className:"mr-2 h-4 w-4 flex-shrink-0"}),e.jsx(Es,{placeholder:"Select Time Range"})]}),e.jsx(Ms,{children:C.map(S=>e.jsx(Ye,{value:S.value,children:S.label},S.value))})]})}),i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Is,{value:L||"all",onValueChange:o,children:[e.jsxs(Ls,{className:"w-56 h-10",children:[e.jsx(Vs,{className:"mr-2 h-4 w-4 flex-shrink-0"}),e.jsx(Es,{children:L==="all"?"All Contexts":z.find(S=>S.id===L)?.name||"Select Context"})]}),e.jsxs(Ms,{children:[e.jsx(Ye,{value:"all",children:"All Contexts"}),z.length>0?z.map(S=>e.jsx(Ye,{value:S.id,children:S.name},S.id)):e.jsx(Ye,{value:"loading",disabled:!0,children:"Loading contexts..."})]})]}),e.jsx(Q,{variant:"outline",size:"sm",onClick:()=>H(!0),className:"h-10",title:"Configure Contexts",children:e.jsx(bs,{className:"h-4 w-4"})})]}),f]}),a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"secondary",className:"text-xs",children:"Filters active"}),e.jsxs(Q,{variant:"ghost",size:"sm",onClick:Y,className:"h-10",children:[e.jsx(_s,{className:"mr-2 h-4 w-4"}),"Clear all"]})]}),i&&e.jsx(Jt,{open:y,onOpenChange:H})]})}const Bs=[{id:"ai-insights",label:"AI Insights",shortLabel:"AI Insights",icon:ss,noSearch:!0},{id:"site",label:"Site",shortLabel:"Site",icon:It},{id:"access-point",label:"Access Point",shortLabel:"AP",icon:ys},{id:"switch",label:"Switch",shortLabel:"Switch",icon:qe,beta:!0},{id:"client",label:"Client",shortLabel:"Client",icon:ke}];function sr({activeTab:r="ai-insights",selectedId:s,onTabChange:i,onSelectionChange:f,className:j=""}){const[R,h]=d.useState(!1),[N,Y]=d.useState(r),[a,z]=d.useState(""),[L,o]=d.useState([]),[c,W]=d.useState(!1),[Z,te]=d.useState(s||null),[y,H]=d.useState(null),[v,C]=d.useState(!1);d.useEffect(()=>{R&&S(N)},[N,R]);const S=async n=>{W(!0),o([]);try{switch(n){case"ai-insights":o([{id:"all",name:"All Insights",subtitle:"Complete network overview"},{id:"network-health",name:"Network Health",subtitle:"Performance metrics"},{id:"anomaly-detection",name:"Anomaly Detection",subtitle:"Unusual patterns"},{id:"capacity-planning",name:"Capacity Planning",subtitle:"Utilization trends"},{id:"predictive-maintenance",name:"Predictive Maintenance",subtitle:"Issue forecast"}]);break;case"site":const A=await V.getSites(),ge=[{id:"all",name:"All Sites",subtitle:`${A.length} sites`}];A.forEach(g=>{ge.push({id:g.id,name:zt(g),subtitle:g.siteGroup||void 0,status:"online"})}),o(ge);break;case"access-point":const ne=await V.getAccessPoints();let xe=[];try{xe=await V.getStations()}catch{console.warn("[ContextualInsightsSelector] Could not fetch stations for client count")}const je={};xe.forEach(g=>{const q=g.apSerialNumber||g.apSerial;q&&(je[q]=(je[q]||0)+1)});const ns=ne.filter(g=>{const q=(g.status||g.connectionState||g.operationalState||"").toLowerCase();return q==="inservice"||q.includes("up")||q.includes("online")||q.includes("connected")||g.isUp===!0||g.online===!0}).length,De=[{id:"all",name:"All Access Points",subtitle:`${ne.length} APs (${ns} online)`}],Ke=g=>{if(!g||g<=0)return"";const q=Math.floor(g/86400),F=Math.floor(g%86400/3600);if(q>0)return`${q}d ${F}h`;const me=Math.floor(g%3600/60);return F>0?`${F}h ${me}m`:`${me}m`};ne.forEach(g=>{const q=g.displayName||g.name||g.hostname||g.serialNumber,F=(g.status||g.connectionState||g.operationalState||"").toLowerCase(),me=g.isUp,he=g.online,Fe=F==="inservice"||F.includes("up")||F.includes("online")||F.includes("connected")||me===!0||he===!0||!F&&me!==!1&&he!==!1,ye=g.serialNumber||g.id,Te=je[ye]||0,Be=Ke(g.sysUptime||g.uptime||0);De.push({id:ye,name:q,subtitle:g.siteName||g.hostSite||void 0,status:Fe?"online":"offline",model:g.model||g.hardwareType||g.platformName,ipAddress:g.ipAddress,clients:Te,siteName:g.siteName||g.hostSite,uptime:Be,serialNumber:ye})}),o(De);break;case"switch":try{const g=await V.getSwitches?.()||[],q=[{id:"all",name:"All Switches",subtitle:`${g.length} switches`}];g.slice(0,50).forEach(F=>{const me=F.displayName||F.name||F.hostname||F.serialNumber,he=(F.status||F.connectionState||F.operationalState||"").toLowerCase(),Fe=he==="inservice"||he.includes("up")||he.includes("online")||he.includes("connected")||F.isUp===!0||F.online===!0||!he&&F.isUp!==!1&&F.online!==!1;q.push({id:F.serialNumber||F.id,name:me,subtitle:F.siteName||F.model||void 0,status:Fe?"online":"offline"})}),o(q)}catch{o([{id:"all",name:"All Switches",subtitle:"No switches available"}])}break;case"client":const K=await V.getStations(),rs=(g,q)=>{if(q){if(q.includes("2.4")||q.includes("2G"))return"2.4G";if(q.includes("5")&&!q.includes("6"))return"5G";if(q.includes("6"))return"6G"}if(g){if(g>=1&&g<=14)return"2.4G";if(g>=36&&g<=165)return"5G";if(g>165)return"6G"}return""},x=[{id:"all",name:"All Clients",subtitle:`${K.length} connected`}];K.forEach(g=>{const q=g.macAddress||g.id,F=rs(g.channel,g.band||g.frequency);x.push({id:q,name:g.hostName||q,subtitle:g.ssid||g.serviceName||void 0,status:"online",ssid:g.ssid||g.serviceName,apName:g.apName||g.apHostname,rssi:g.rssi||g.signalStrength,macAddress:q,band:F,ipAddress:g.ipAddress})}),o(x);break}}catch(A){console.warn("[ContextualInsightsSelector] Failed to load items:",A),o([{id:"all",name:"All",subtitle:"Unable to load"}])}finally{W(!1)}},ee=n=>{Y(n),z(""),n==="ai-insights"&&(te(null),H(null),i?.(n),f?.(n,null,void 0),h(!1))},b=n=>{te(n.id),H(n.id==="all"?null:n.name),i?.(N),f?.(N,n.id==="all"?null:n.id,n.name),h(!1)},O=d.useMemo(()=>{if(!a.trim())return L;const n=a.toLowerCase();return L.filter(A=>A.name.toLowerCase().includes(n)||A.subtitle?.toLowerCase().includes(n)||A.model?.toLowerCase().includes(n)||A.ipAddress?.toLowerCase().includes(n)||A.siteName?.toLowerCase().includes(n)||A.serialNumber?.toLowerCase().includes(n)||A.ssid?.toLowerCase().includes(n)||A.apName?.toLowerCase().includes(n)||A.vendor?.toLowerCase().includes(n)||A.macAddress?.toLowerCase().includes(n))},[L,a]),M=Bs.find(n=>n.id===N),_=M?.icon||ss,U=y||M?.label||"Select Context";return e.jsxs("div",{className:ve("flex items-center gap-1",j),children:[e.jsxs(Ca,{open:R,onOpenChange:h,children:[e.jsx(Sa,{asChild:!0,children:e.jsxs(Q,{variant:"outline",role:"combobox","aria-expanded":R,className:"h-10 justify-between gap-2 px-3 font-normal min-w-[200px] max-w-[280px]",children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx(_,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:U})]}),e.jsx(us,{className:"h-4 w-4 flex-shrink-0 opacity-50"})]})}),e.jsxs(Aa,{className:"w-[480px] p-0",align:"start",children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:Bs.map(n=>e.jsxs("button",{onClick:()=>ee(n.id),className:ve("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap","hover:bg-muted/50 focus:outline-none focus-visible:bg-muted",N===n.id?"text-primary border-b-2 border-primary -mb-[1px]":"text-muted-foreground"),children:[e.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:n.shortLabel}),n.beta&&e.jsx(P,{variant:"outline",className:"text-[9px] px-1.5 py-0 h-4 border-amber-500/50 text-amber-600 dark:text-amber-400",children:"Beta"})]},n.id))}),N!=="ai-insights"&&e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ga,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),e.jsx(Hs,{placeholder:`Search ${M?.label||""}...`,value:a,onChange:n=>z(n.target.value),className:"pl-8 h-8 text-sm"})]})}),N!=="ai-insights"&&e.jsx(hs,{className:"h-[320px]",children:e.jsx("div",{className:"p-1",children:c?e.jsx("div",{className:"flex items-center justify-center py-6 text-muted-foreground text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),"Loading..."]})}):O.length===0?e.jsx("div",{className:"flex items-center justify-center py-6 text-muted-foreground text-sm",children:a?"No matches found":"No items available"}):O.map(n=>e.jsxs("button",{onClick:()=>b(n),className:ve("w-full text-left px-3 py-2.5 rounded-md transition-colors flex items-start gap-3","hover:bg-muted focus:outline-none focus-visible:bg-muted",Z===n.id&&N===Bs.find(A=>A.id===N)?.id&&"bg-primary/5"),children:[n.id!=="all"&&e.jsx("div",{className:"pt-1",children:e.jsx("span",{className:ve("block w-2 h-2 rounded-full flex-shrink-0",n.status==="online"&&"bg-green-500",n.status==="offline"&&"bg-red-500",n.status==="warning"&&"bg-amber-500")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:n.name}),n.band&&e.jsx(P,{variant:"outline",className:"text-[9px] px-1 py-0 h-4 font-normal",children:n.band})]}),N==="access-point"&&n.id!=="all"&&e.jsxs("div",{className:"mt-1 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[n.model&&e.jsx("span",{className:"truncate max-w-[120px]",children:n.model}),n.ipAddress&&e.jsx("span",{className:"font-mono text-[10px]",children:n.ipAddress})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[n.siteName&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ha,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[100px]",children:n.siteName})]}),typeof n.clients=="number"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-3 w-3"}),n.clients]}),n.uptime&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gs,{className:"h-3 w-3"}),n.uptime]})]})]}),N==="client"&&n.id!=="all"&&e.jsxs("div",{className:"mt-1 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[n.ssid&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[100px]",children:n.ssid})]}),n.rssi!==void 0&&e.jsxs("span",{className:ve("flex items-center gap-1",n.rssi>=-60?"text-green-600":n.rssi>=-70?"text-amber-600":"text-red-600"),children:[e.jsx(os,{className:"h-3 w-3"}),n.rssi," dBm"]})]}),n.apName&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(ys,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[140px]",children:n.apName})]}),n.ipAddress&&e.jsx("div",{className:"text-[10px] font-mono text-muted-foreground/70",children:n.ipAddress})]}),N==="site"&&n.id!=="all"&&n.subtitle&&e.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",children:n.subtitle}),N==="switch"&&n.id!=="all"&&n.subtitle&&e.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",children:n.subtitle}),n.id==="all"&&n.subtitle&&e.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",children:n.subtitle})]}),Z===n.id&&e.jsx(Va,{className:"h-4 w-4 text-primary flex-shrink-0 mt-0.5"})]},n.id))})})]})]}),e.jsx(Q,{variant:"outline",size:"icon",onClick:()=>C(!0),className:"h-10 w-10",title:"Configure Context Settings",children:e.jsx(bs,{className:"h-4 w-4"})}),e.jsx(Jt,{open:v,onOpenChange:C})]})}function tr({siteId:r,duration:s="24H"}){const[i,f]=d.useState(!0),[j,R]=d.useState(null),[h,N]=d.useState(null);d.useEffect(()=>{Y()},[r,s]);const Y=async()=>{if(!r){console.warn("[VenueStatisticsWidget] No site ID provided");return}f(!0),R(null);try{console.log(`[VenueStatisticsWidget] Loading venue statistics for site: ${r}`);const o=await V.getVenueStatistics(r,s);o?(N(o),console.log("[VenueStatisticsWidget] Loaded venue statistics:",Object.keys(o))):(R("No venue statistics available"),N(null))}catch(o){console.error("[VenueStatisticsWidget] Error loading venue statistics:",o),R("Failed to load venue statistics"),N(null)}finally{f(!1)}},a=o=>{if(o===0)return"0 B";const c=1024,W=["B","KB","MB","GB","TB"],Z=Math.floor(Math.log(o)/Math.log(c));return`${(o/Math.pow(c,Z)).toFixed(2)} ${W[Z]}`},z=o=>{if(o===0)return"0 bps";const c=1e3,W=["bps","Kbps","Mbps","Gbps"],Z=Math.floor(Math.log(o)/Math.log(c));return`${(o/Math.pow(c,Z)).toFixed(2)} ${W[Z]}`},L=o=>new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return i?e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-primary"}),"Venue Statistics"]}),e.jsx(ce,{children:"Comprehensive venue analytics and performance metrics"})]}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading venue statistics..."})})})]}):j||!h?e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-primary"}),"Venue Statistics"]}),e.jsx(ce,{children:"Comprehensive venue analytics and performance metrics"})]}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:j||"No data available"})})})]}):e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-primary"}),"Venue Statistics"]}),e.jsxs(ce,{children:["Comprehensive venue analytics for the last ",s]})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.uniqueClientsTotalScorecard!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"h-4 w-4 text-blue-500"}),e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Total Clients"})]}),e.jsx("div",{className:"text-2xl font-bold",children:at(h.uniqueClientsTotalScorecard)})]}),h.uniqueClientsPeakScorecard!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{className:"h-4 w-4 text-green-500"}),e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Peak Clients"})]}),e.jsx("div",{className:"text-2xl font-bold",children:at(h.uniqueClientsPeakScorecard)})]}),h.totalTrafficScorecard!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-purple-500"}),e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Total Traffic"})]}),e.jsx("div",{className:"text-2xl font-bold",children:a(h.totalTrafficScorecard)})]}),h.averageThroughputScorecard!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ms,{className:"h-4 w-4 text-orange-500"}),e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Avg Throughput"})]}),e.jsx("div",{className:"text-2xl font-bold",children:z(h.averageThroughputScorecard)})]})]}),h.ulDlUsageTimeseries&&h.ulDlUsageTimeseries.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Upload/Download Usage Over Time"]}),e.jsx(xs,{width:"100%",height:250,children:e.jsxs(Lt,{data:h.ulDlUsageTimeseries,children:[e.jsx(ht,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(ut,{dataKey:"timestamp",tickFormatter:L,stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(gt,{tickFormatter:o=>a(o),stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(ws,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},labelFormatter:o=>L(Number(o)),formatter:(o,c)=>[a(o),c==="upload"?"Upload":"Download"]}),e.jsx(pt,{}),e.jsx(qs,{type:"monotone",dataKey:"upload",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Upload"}),e.jsx(qs,{type:"monotone",dataKey:"download",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Download"})]})})]}),h.ulDlThroughputTimeseries&&h.ulDlThroughputTimeseries.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Upload/Download Throughput Over Time"]}),e.jsx(xs,{width:"100%",height:250,children:e.jsxs(Ya,{data:h.ulDlThroughputTimeseries,children:[e.jsx(ht,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(ut,{dataKey:"timestamp",tickFormatter:L,stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(gt,{tickFormatter:o=>z(o),stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(ws,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},labelFormatter:o=>L(Number(o)),formatter:(o,c)=>[z(o),c==="uploadThroughput"?"Upload":"Download"]}),e.jsx(pt,{}),e.jsx(jt,{type:"monotone",dataKey:"uploadThroughput",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Upload"}),e.jsx(jt,{type:"monotone",dataKey:"downloadThroughput",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"Download"})]})})]}),!h.ulDlUsageTimeseries?.length&&!h.ulDlThroughputTimeseries?.length&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No timeseries data available for this time period"})]})]})}const St={"1eea4d66-2607-11e7-93ae-92361f002671":"Background (Priority 1)","1eea4d66-2607-11e7-93ae-92361f002672":"Best Effort (Priority 0)","1eea4d66-2607-11e7-93ae-92361f002673":"Excellent Effort (Priority 2)","1eea4d66-2607-11e7-93ae-92361f002674":"Critical Applications (Priority 3)","1eea4d66-2607-11e7-93ae-92361f002675":"Video (Priority 4)","1eea4d66-2607-11e7-93ae-92361f002676":"Voice (Priority 5)","1eea4d66-2607-11e7-93ae-92361f002677":"Internetwork Control (Priority 6)","1eea4d66-2607-11e7-93ae-92361f002678":"Network Control (Priority 7)","1eea4d66-2607-11e7-93ae-92361f002679":"CoS Profile 8","b3021be1-a663-4f20-82e4-40bbd1a4e9a6":"Custom CoS Profile 1","83080873-a72c-4aa0-af3c-41907a51c030":"Custom CoS Profile 2"};function ar(r){return r.name?r.name:r.displayName?r.displayName:r.cosName?r.cosName:r.id&&St[r.id]?St[r.id]:r.id||"Unknown CoS Profile"}function nr(){const[r,s]=d.useState(!0),[i,f]=d.useState({rfMgmt:[],iot:[],adsp:[],analytics:[],positioning:[],roles:[],cos:[],rateLimiters:[]});d.useEffect(()=>{j()},[]);const j=async()=>{s(!0);try{console.log("[ConfigurationProfiles] Loading all configuration profiles...");const[h,N,Y,a,z,L,o,c]=await Promise.all([V.getRFManagementProfiles(),V.getIoTProfiles(),V.getADSPProfiles(),V.getAnalyticsProfiles(),V.getPositioningProfiles(),V.getRoles(),V.getCoSProfiles(),V.getRateLimiters()]);f({rfMgmt:h,iot:N,adsp:Y,analytics:a,positioning:z,roles:L,cos:o,rateLimiters:c}),console.log("[ConfigurationProfiles] Loaded all profiles:",{rfMgmt:h.length,iot:N.length,adsp:Y.length,analytics:a.length,positioning:z.length,roles:L.length,cos:o.length,rateLimiters:c.length})}catch(h){console.error("[ConfigurationProfiles] Error loading profiles:",h)}finally{s(!1)}},R=()=>Object.values(i).reduce((h,N)=>h+N.length,0);return r?e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-5 w-5 text-primary"}),"Configuration Profiles"]}),e.jsx(ce,{children:"System-wide configuration and policy profiles"})]}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading configuration profiles..."})})})]}):e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-5 w-5 text-primary"}),"Configuration Profiles"]}),e.jsxs(ce,{children:[R()," total profiles across 8 categories"]})]}),e.jsx(T,{children:e.jsxs(Ks,{defaultValue:"summary",className:"w-full",children:[e.jsxs(Qs,{className:"grid w-full grid-cols-4",children:[e.jsx(Ee,{value:"summary",children:"Summary"}),e.jsx(Ee,{value:"rf",children:"RF & Radio"}),e.jsx(Ee,{value:"security",children:"Security"}),e.jsx(Ee,{value:"qos",children:"QoS & Performance"})]}),e.jsx(_e,{value:"summary",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"h-4 w-4 text-blue-500"}),e.jsx("div",{className:"text-sm font-medium",children:"RF Management"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.rfMgmt.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Radio resource policies"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{className:"h-4 w-4 text-green-500"}),e.jsx("div",{className:"text-sm font-medium",children:"IoT Profiles"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.iot.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"IoT device policies"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(vs,{className:"h-4 w-4 text-purple-500"}),e.jsx("div",{className:"text-sm font-medium",children:"ADSP"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.adsp.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"AirDefense Services Platform"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{className:"h-4 w-4 text-orange-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Analytics"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.analytics.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Analytics profiles"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(vs,{className:"h-4 w-4 text-cyan-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Positioning"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.positioning.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Location services"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(lt,{className:"h-4 w-4 text-red-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Roles"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.roles.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Access control roles"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("div",{className:"text-sm font-medium",children:"CoS"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.cos.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Class of Service"})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{className:"h-4 w-4 text-pink-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Rate Limiters"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i.rateLimiters.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bandwidth limits"})]})]})}),e.jsxs(_e,{value:"rf",className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),"RF Management Profiles (",i.rfMgmt.length,")"]}),i.rfMgmt.length>0?e.jsx("div",{className:"space-y-2",children:i.rfMgmt.map((h,N)=>e.jsxs("div",{className:"p-2 rounded border bg-card text-sm",children:[e.jsx("div",{className:"font-medium",children:h.name||h.id||`Profile ${N+1}`}),h.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:h.description})]},N))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No RF management profiles found"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"IoT Profiles (",i.iot.length,")"]}),i.iot.length>0?e.jsx("div",{className:"space-y-2",children:i.iot.map((h,N)=>e.jsxs("div",{className:"p-2 rounded border bg-card text-sm",children:[e.jsx("div",{className:"font-medium",children:h.name||h.id||`Profile ${N+1}`}),h.enabled!==void 0&&e.jsx(P,{variant:h.enabled?"default":"secondary",className:"text-xs mt-1",children:h.enabled?"Enabled":"Disabled"})]},N))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No IoT profiles found"})]})]}),e.jsx(_e,{value:"security",className:"space-y-3 mt-4",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"h-4 w-4"}),"Roles & Policies (",i.roles.length,")"]}),i.roles.length>0?e.jsx("div",{className:"space-y-2",children:i.roles.map((h,N)=>e.jsxs("div",{className:"p-2 rounded border bg-card text-sm",children:[e.jsx("div",{className:"font-medium",children:h.name||h.id||`Role ${N+1}`}),h.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:h.description}),h.rules&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[h.rules.length," rule",h.rules.length!==1?"s":""]})]},N))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No roles found"})]})}),e.jsxs(_e,{value:"qos",className:"space-y-3 mt-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Vs,{className:"h-4 w-4"}),"CoS Profiles (",i.cos.length,")"]}),i.cos.length>0?e.jsx("div",{className:"space-y-2",children:i.cos.map((h,N)=>e.jsx("div",{className:"p-2 rounded border bg-card text-sm",children:e.jsx("div",{className:"font-medium",children:ar(h)})},N))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No CoS profiles found"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Rate Limiters (",i.rateLimiters.length,")"]}),i.rateLimiters.length>0?e.jsx("div",{className:"space-y-2",children:i.rateLimiters.map((h,N)=>e.jsxs("div",{className:"p-2 rounded border bg-card text-sm",children:[e.jsx("div",{className:"font-medium",children:h.name||h.id||`Limiter ${N+1}`}),h.uplink&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Uplink: ",h.uplink," Mbps"]}),h.downlink&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Downlink: ",h.downlink," Mbps"]})]},N))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No rate limiters found"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"ADSP Profiles (",i.adsp.length,")"]}),i.adsp.length>0?e.jsx("div",{className:"space-y-2",children:i.adsp.map((h,N)=>e.jsxs("div",{className:"p-2 rounded border bg-card text-sm",children:[e.jsx("div",{className:"font-medium",children:h.name||h.id||`ADSP ${N+1}`}),h.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:h.description})]},N))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No ADSP profiles found"})]})]})]})})]})}function rr(){const[r,s]=d.useState(!0),[i,f]=d.useState([]),[j,R]=d.useState("all");d.useEffect(()=>{h()},[]);const h=async()=>{s(!0);try{console.log("[AuditLogs] Loading audit logs...");const o=Date.now(),c=o-10080*60*1e3,W=await V.getAuditLogs(c,o);f(W),console.log(`[AuditLogs] Loaded ${W.length} audit logs`)}catch(o){console.error("[AuditLogs] Error loading audit logs:",o),f([])}finally{s(!1)}},N=()=>j==="all"?i:j==="user"?i.filter(o=>(o.user||o.userId||o.username)&&(o.action||o.actionType)):j==="system"?i.filter(o=>!(o.user||o.userId||o.username)||(o.action||o.actionType||"").toLowerCase().includes("system")):i,Y=o=>o?new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",a=o=>{const c=(o.action||o.actionType||"").toLowerCase(),W=(o.status||"").toLowerCase();return W.includes("error")||W.includes("fail")?e.jsx(be,{className:"h-4 w-4 text-red-500"}):W.includes("success")||c.includes("create")||c.includes("add")?e.jsx(Ue,{className:"h-4 w-4 text-green-500"}):c.includes("delete")||c.includes("remove")?e.jsx(be,{className:"h-4 w-4 text-orange-500"}):e.jsx($e,{className:"h-4 w-4 text-blue-500"})},z=o=>{const c=o.action||o.actionType,W=o.status||"";return W.toLowerCase().includes("error")||W.toLowerCase().includes("fail")?e.jsx(P,{variant:"destructive",className:"text-xs",children:"Error"}):c?c.toLowerCase().includes("create")||c.toLowerCase().includes("add")?e.jsx(P,{variant:"default",className:"text-xs bg-green-600",children:"Create"}):c.toLowerCase().includes("update")||c.toLowerCase().includes("modify")?e.jsx(P,{variant:"default",className:"text-xs bg-blue-600",children:"Update"}):c.toLowerCase().includes("delete")||c.toLowerCase().includes("remove")?e.jsx(P,{variant:"default",className:"text-xs bg-red-600",children:"Delete"}):e.jsx(P,{variant:"secondary",className:"text-xs",children:c}):null};if(r)return e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-5 w-5 text-primary"}),"Audit Logs"]}),e.jsx(ce,{children:"System and user activity logs"})]}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading audit logs..."})})})]});const L=N();return e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(it,{className:"h-5 w-5 text-primary"}),"Audit Logs"]}),e.jsxs(ce,{children:[i.length," log",i.length!==1?"s":""," from the last 7 days"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{variant:j==="all"?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>R("all"),children:["All (",i.length,")"]}),e.jsx(P,{variant:j==="user"?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>R("user"),children:"User"}),e.jsx(P,{variant:j==="system"?"default":"outline",className:"cursor-pointer text-xs",onClick:()=>R("system"),children:"System"})]})]})}),e.jsx(T,{children:L.length>0?e.jsx(hs,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-2 pb-16",children:L.map((o,c)=>{const W=o.timestamp||o.time,Z=o.user||o.userId||o.username,te=o.action||o.actionType,y=o.resource||o.resourceType,H=o.description||o.message;return e.jsx("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:a(o)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[z(o),Z&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(_a,{className:"h-3 w-3"}),e.jsx("span",{children:Z})]})]}),te&&e.jsxs("div",{className:"text-sm font-medium mb-1",children:[te,y&&e.jsxs("span",{className:"text-muted-foreground",children:[" on ",y]})]}),H&&e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:H}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(gs,{className:"h-3 w-3"}),e.jsx("span",{children:Y(W)}),o.ipAddress&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsxs("span",{children:["IP: ",o.ipAddress]})]})]})]})]})},o.id||c)})})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No ",j!=="all"?j+" ":"","audit logs found"]})})]})}function lr({siteId:r,siteName:s,compact:i=!1,showManufacturing:f=!0,className:j=""}){const[R,h]=d.useState(null),[N,Y]=d.useState(!0),[a,z]=d.useState(!1),[L,o]=d.useState(null),[c,W]=d.useState(!1),[Z,te]=d.useState(!1),y=async()=>{try{o(null);const n=await V.getOSOneInfo();h(n)}catch(n){o(n instanceof Error?n.message:"Failed to load OS ONE information"),console.error("[OSOneWidget] Error loading info:",n)}finally{Y(!1),z(!1)}},H=()=>{z(!0),y()};d.useEffect(()=>{y();const n=setInterval(y,6e4);return()=>clearInterval(n)},[r]);const v=n=>{if(!n)return"Unknown";const A=Math.floor(n/1e3),ge=Math.floor(A/86400),ne=Math.floor(A%86400/3600),xe=Math.floor(A%3600/60);return`${ge}d ${ne}h ${xe}m`},C=n=>n?`${(n/1024/1024).toFixed(1)} GB`:"Unknown",S=n=>{const A=n.toLowerCase();return A==="available"||A==="onboarded"||A==="connected"?e.jsx(P,{variant:"default",className:"bg-green-500",children:n}):A==="unavailable"||A==="error"?e.jsx(P,{variant:"destructive",children:n}):e.jsx(P,{variant:"secondary",children:n})},ee=n=>n>80?"bg-red-500":n>60?"bg-yellow-500":"bg-green-500",b=n=>{const A=100-n;return A>85?"bg-red-500":A>70?"bg-yellow-500":"bg-blue-500"};if(N)return e.jsxs(D,{className:`${j}`,children:[e.jsx($,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5 text-primary"}),e.jsx(fs,{className:"h-6 w-32"})]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(fs,{className:"h-4 w-full"}),e.jsx(fs,{className:"h-4 w-3/4"}),e.jsx(fs,{className:"h-4 w-1/2"})]})})]});if(L||!R)return e.jsxs(D,{className:`${j}`,children:[e.jsx($,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5 text-primary"}),e.jsx(G,{className:"text-lg",children:"OS ONE"})]}),e.jsx(Q,{variant:"ghost",size:"sm",onClick:H,children:e.jsx(ts,{className:"h-4 w-4"})})]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:L||"Unable to load OS ONE information"})]})})]});const{system:O,manufacturing:M}=R,_=O?.cpuUtilization||0,U=100-(O?.memoryFreePercent||0);return i?e.jsxs(D,{className:`relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group ${j}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-indigo-500/10 rounded-full blur-2xl group-hover:bg-indigo-500/20 transition-all"}),e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(G,{className:"text-sm font-semibold",children:"OS ONE Control"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Ns,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsx(T,{className:"relative",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"CPU"}),e.jsxs("span",{className:`text-sm font-bold ${_>80?"text-red-500":_>60?"text-yellow-500":"text-green-500"}`,children:[_.toFixed(1),"%"]})]}),e.jsx(Se,{value:_,className:"h-1.5"}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Memory"}),e.jsxs("span",{className:`text-sm font-bold ${U>85?"text-red-500":U>70?"text-yellow-500":"text-blue-500"}`,children:[U.toFixed(0),"% used"]})]}),e.jsx(Se,{value:U,className:"h-1.5"}),M?.model&&e.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:M.model})]})})]}):e.jsxs(D,{className:`${j}`,children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500 shadow-md",children:e.jsx(Ns,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs(G,{className:"text-lg flex items-center gap-2",children:["OS ONE",s&&e.jsx(P,{variant:"outline",className:"ml-2",children:s})]}),e.jsx(ce,{children:M?.model||"System Information"})]})]}),e.jsx(Q,{variant:"ghost",size:"sm",onClick:H,disabled:a,children:e.jsx(ts,{className:`h-4 w-4 ${a?"animate-spin":""}`})})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"CPU"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Usage"}),e.jsxs("span",{className:`font-bold ${_>80?"text-red-500":_>60?"text-yellow-500":"text-green-500"}`,children:[_.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${ee(_)}`,style:{width:`${Math.min(_,100)}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Memory"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Used"}),e.jsxs("span",{className:`font-bold ${U>85?"text-red-500":U>70?"text-yellow-500":"text-blue-500"}`,children:[U.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${b(O?.memoryFreePercent||100)}`,style:{width:`${U}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Uptime"})]}),e.jsx("p",{className:"text-lg font-bold text-primary",children:O?.uptime||v(O?.sysUptime)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Network Ports"})]}),e.jsxs("div",{className:"flex gap-2",children:[O?.ports.map(n=>e.jsxs(cn,{children:[e.jsx(dn,{children:e.jsxs(P,{variant:n.state==="up"?"default":"secondary",className:n.state==="up"?"bg-green-500":"",children:["P",n.port,": ",n.speed/1e3,"G"]})}),e.jsx(on,{children:e.jsxs("p",{children:["Port ",n.port,": ",n.state,", ",n.speed," Mbps"]})})]},n.port)),(!O?.ports||O.ports.length===0)&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"No port data"})]})]})]}),e.jsx(ka,{}),O?.externalServices&&O.externalServices.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4"}),"External Services"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:O.externalServices.map((n,A)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n.service==="Cloud"&&e.jsx(ct,{className:"h-4 w-4 text-blue-500"}),n.service==="Afc"&&e.jsx(Le,{className:"h-4 w-4 text-purple-500"}),n.service==="Licensing"&&e.jsx(Ka,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm",children:n.service})]}),S(n.status)]},A))})]}),O?.diskPartitions&&O.diskPartitions.length>0&&e.jsxs(ft,{open:Z,onOpenChange:te,children:[e.jsx(Nt,{asChild:!0,children:e.jsxs(Q,{variant:"ghost",size:"sm",className:"w-full justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"h-4 w-4"}),"Disk Usage (",O.diskPartitions.length," partitions)"]}),Z?e.jsx(us,{className:"h-4 w-4"}):e.jsx(dt,{className:"h-4 w-4"})]})}),e.jsx(vt,{className:"pt-2",children:e.jsx("div",{className:"space-y-2",children:O.diskPartitions.map(n=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-mono text-xs",children:n.name}),e.jsxs("span",{className:n.usePercent>80?"text-red-500":"",children:[n.usePercent,"%"]})]}),e.jsx(Se,{value:n.usePercent,className:"h-1"})]},n.name))})})]}),f&&M&&e.jsxs(ft,{open:c,onOpenChange:W,children:[e.jsx(Nt,{asChild:!0,children:e.jsxs(Q,{variant:"ghost",size:"sm",className:"w-full justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"Hardware Details"]}),c?e.jsx(us,{className:"h-4 w-4"}):e.jsx(dt,{className:"h-4 w-4"})]})}),e.jsx(vt,{className:"pt-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[M.softwareVersion&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"Software Version"}),e.jsx("span",{className:"font-mono",children:M.softwareVersion})]}),M.cpuType&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"CPU"}),e.jsx("span",{className:"font-mono text-xs",children:M.cpuType})]}),M.numberOfCpus&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"CPU Cores"}),e.jsx("span",{children:M.numberOfCpus})]}),M.totalMemory&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Memory"}),e.jsx("span",{children:C(M.totalMemory)})]}),M.hwEncryption!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"HW Encryption"}),e.jsx("span",{children:M.hwEncryption?"Yes":"No"})]}),M.lan1Mac&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"LAN 1 MAC"}),e.jsx("span",{className:"font-mono text-xs",children:M.lan1Mac})]}),M.lan2Mac&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"LAN 2 MAC"}),e.jsx("span",{className:"font-mono text-xs",children:M.lan2Mac})]}),M.lockingId&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"Locking ID"}),e.jsx("span",{className:"font-mono text-xs",children:M.lockingId})]})]})})]})]})]})}function ir(){const{filters:r}=Ws(),[s,i]=d.useState(!0),[f,j]=d.useState(!1),[R,h]=d.useState(null),[N,Y]=d.useState([]),[a,z]=d.useState({total:0,online:0,offline:0,primary:0,backup:0,standby:0,lowPower:0,normalPower:0,models:{}}),[L,o]=d.useState([]),[c,W]=d.useState({total:0,authenticated:0,throughputUpload:0,throughputDownload:0}),[Z,te]=d.useState([]),[y,H]=d.useState([]),[v,C]=d.useState([]),[S,ee]=d.useState([]),[b,O]=d.useState([]),[M,_]=d.useState(!1),[U,n]=d.useState(new Map),[A,ge]=d.useState([]),[ne,xe]=d.useState(new Map),[je,ns]=d.useState([]),[De,Ke]=d.useState([]),[K,rs]=d.useState({critical:0,warning:0,info:0}),[x,g]=d.useState(null),[q,F]=d.useState(!1),[me,he]=d.useState([]),[Fe,ye]=d.useState(!1),[Te,Be]=d.useState("all"),[ls,Cs]=d.useState(null),[Ss,Ge]=d.useState(!1),[is,cs]=d.useState(!0),[fe,Pe]=d.useState("ai-insights"),[pe,ze]=d.useState(null),[Ce,we]=d.useState(null),[u,k]=d.useState(!0),[X,le]=d.useState("clients"),[Xt,Js]=d.useState(!0),[ps,Xs]=d.useState("healthy"),[ae,He]=d.useState(null);d.useEffect(()=>{ks(),Ds();const t=setInterval(()=>{ks(!0)},6e4),l=setInterval(()=>{Ds()},3e5);return()=>{clearInterval(t),clearInterval(l)}},[r.site]),d.useEffect(()=>{(async()=>{if(x&&q){console.log("[Dashboard] Loading station events for client:",x.macAddress),ye(!0);try{const l=await V.fetchStationEvents(x.macAddress);console.log(`[Dashboard] Received ${l.length} events:`,l.slice(0,3)),he(l)}catch(l){console.error("[Dashboard] Failed to load station events:",l),zs.error("Failed to load station events")}finally{ye(!1)}}else he([]),Be("all")})()},[x,q]);const As=d.useMemo(()=>Te==="all"?me:me.filter(t=>t.eventType===Te),[me,Te]),Yt=d.useMemo(()=>{const t=new Set(me.map(l=>l.eventType));return Array.from(t).sort()},[me]),ks=async(t=!1)=>{try{t?j(!0):i(!0),console.log("[Dashboard] Loading comprehensive dashboard data...");const[l,m,w]=await Promise.allSettled([Zt(),ea(),sa()]);let I=[];w.status==="fulfilled"&&w.value?(I=w.value,await ca(I)):console.log("[Dashboard] Failed to load services:",w.status==="rejected"?w.reason:"No data"),l.status==="fulfilled"&&l.value?aa(l.value):console.log("[Dashboard] Failed to load APs:",l.status==="rejected"?l.reason:"No data"),m.status==="fulfilled"&&m.value?la(m.value,I):console.log("[Dashboard] Failed to load stations:",m.status==="rejected"?m.reason:"No data"),h(new Date),t||ta().then(B=>{B&&da(B)}).catch(B=>{console.log("[Dashboard] Failed to load notifications:",B)}),t&&zs.success("Dashboard refreshed")}catch(l){console.error("[Dashboard] Error loading dashboard:",l),zs.error("Failed to load dashboard data")}finally{i(!1),j(!1)}},Zt=async()=>{const t=r.site!=="all"?r.site:void 0;console.log("[Dashboard] Fetching access points"+(t?` for site: ${t}`:""));try{const l=await V.getAccessPointsBySite(t);return console.log("[Dashboard] Fetched",l.length,"access points"+(t?" (filtered by site)":"")),l}catch(l){return console.error("[Dashboard] Error fetching APs:",l),[]}},ea=async()=>{const t=r.site!=="all"?r.site:void 0;console.log("[Dashboard] Fetching stations"+(t?` for site: ${t}`:""));try{if(t){const l=await V.makeAuthenticatedRequest(`/v3/sites/${t}/stations`,{method:"GET"},15e3);if(!l.ok)throw new Error(`API returned ${l.status}`);const m=await l.json(),w=Array.isArray(m)?m:m.stations||m.clients||m.data||[];return console.log("[Dashboard] Fetched",w.length,"stations for site"),w}else{const l=await V.makeAuthenticatedRequest("/v1/stations",{method:"GET"},15e3);if(!l.ok)throw new Error(`API returned ${l.status}`);const m=await l.json(),w=Array.isArray(m)?m:m.stations||m.clients||m.data||[];return console.log("[Dashboard] Fetched",w.length,"stations"),w}}catch(l){return console.error("[Dashboard] Error fetching stations:",l),[]}},sa=async()=>{console.log("[Dashboard] Fetching services from /v1/services...");try{const t=await V.makeAuthenticatedRequest("/v1/services",{method:"GET"},15e3);if(!t.ok)throw new Error(`API returned ${t.status}`);const l=await t.json(),m=Array.isArray(l)?l:l.services||l.data||[];return console.log("[Dashboard] Fetched",m.length,"services"),m}catch(t){return console.error("[Dashboard] Error fetching services:",t),[]}},ta=async()=>{console.log("[Dashboard] Fetching notifications from /v1/notifications...");try{const t=await V.makeAuthenticatedRequest("/v1/notifications",{method:"GET"},1e4);if(!t.ok){const w=await V.makeAuthenticatedRequest("/v1/alerts",{method:"GET"},1e4);if(w.ok){const I=await w.json();return Array.isArray(I)?I:I.alerts||I.data||[]}throw new Error(`API returned ${t.status}`)}const l=await t.json(),m=Array.isArray(l)?l:l.notifications||l.data||[];return console.log("[Dashboard] Fetched",m.length,"notifications"),m}catch(t){return console.log("[Dashboard] Notifications not available:",t),[]}},aa=t=>{Y(t);let l={total:t.length,online:0,offline:0,primary:0,backup:0,standby:0,lowPower:0,normalPower:0,models:{}};t.forEach(m=>{const w=(m.status||m.connectionState||m.operationalState||m.state||"").toLowerCase(),I=m.isUp,B=m.online;console.log("[Dashboard] AP Status Debug:",{name:m.name||m.hostname||m.serialNumber,status:m.status,connectionState:m.connectionState,operationalState:m.operationalState,state:m.state,isUp:I,online:B,computedStatus:w,allKeys:Object.keys(m).filter(ue=>ue.toLowerCase().includes("status")||ue.toLowerCase().includes("state")||ue.toLowerCase().includes("connect")||ue==="online"||ue==="isUp")}),w==="inservice"||w.includes("up")||w.includes("online")||w.includes("connected")||I===!0||B===!0||!w&&I!==!1&&B!==!1?(l.online++,console.log("[Dashboard] âœ“ AP marked ONLINE:",m.name||m.hostname||m.serialNumber)):(l.offline++,console.log("[Dashboard] âœ— AP marked OFFLINE:",m.name||m.hostname||m.serialNumber));const J=(m.role||"").toLowerCase();J.includes("primary")||J.includes("master")?l.primary++:J.includes("backup")||J.includes("secondary")?l.backup++:J.includes("standby")&&l.standby++;const ie=(m.powerMode||"").toLowerCase();m.lowPower||ie.includes("low")||ie.includes("reduced")?l.lowPower++:l.normalPower++;const oe=m.hardwareType||m.platformName||m.hwType||m.model||m.apModel||m.deviceModel||"Unknown Model";l.models[oe]=(l.models[oe]||0)+1}),z(l),console.log("[Dashboard] AP Stats:",l),console.log(`[Dashboard] AP Uptime: ${l.online}/${l.total} = ${l.total>0?(l.online/l.total*100).toFixed(1):0}%`)},na=async(t,l,m,w,I,B)=>{try{const se=t+l,J=m>0?se/m:0,ie=Array.from(w.entries()).map(([ue,Je])=>{const p=I.filter(re=>(re.ssid||re.serviceName||re.serviceId&&B.find(Re=>Re.id===re.serviceId)?.ssid)===ue).length;return{network:ue,upload:Je.upload,download:Je.download,total:Je.upload+Je.download,clients:p}}),oe={timestamp:Date.now(),totalUpload:t,totalDownload:l,totalTraffic:se,clientCount:m,avgPerClient:J,networkBreakdown:ie};await bt.storeSnapshot(oe),console.log("[Dashboard] âœ“ Stored throughput snapshot:",{timestamp:new Date(oe.timestamp).toISOString(),totalTraffic:Qe(oe.totalTraffic),upload:Qe(oe.totalUpload),download:Qe(oe.totalDownload),clients:oe.clientCount,networks:oe.networkBreakdown.length})}catch(se){console.error("[Dashboard] Failed to store throughput snapshot:",se)}},Ds=async()=>{try{console.log("[Dashboard] Loading historical throughput data...");const t=await bt.getSnapshotsForLastMinutes(60);if(t.length>0){const l=t.map(m=>({time:new Date(m.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),upload:Math.round(m.totalUpload),download:Math.round(m.totalDownload),total:Math.round(m.totalTraffic)}));H(l),console.log("[Dashboard] âœ“ Loaded historical throughput data:",{snapshots:l.length,timeRange:l.length>0?`${l[0].time} - ${l[l.length-1].time}`:"N/A",avgTotal:l.length>0?Qe(l.reduce((m,w)=>m+w.total,0)/l.length):"0 B"})}else console.log("[Dashboard] âš  No historical throughput data available yet. Data will accumulate over time."),H([])}catch(t){console.error("[Dashboard] âœ— Failed to load historical throughput:",t),H([])}},ra=async t=>{if(t.length!==0)try{_(!0),console.log("[Dashboard] Starting vendor lookups for",t.length,"clients");const l=await Promise.all(t.map(async m=>{const w=await fn(m.mac),I=Nn(w);return{...m,vendor:w,vendorIcon:I}}));C(l),console.log("[Dashboard] âœ“ Vendor lookups complete")}catch(l){console.error("[Dashboard] Failed to lookup vendors:",l)}finally{_(!1)}},la=(t,l=[])=>{o(t);const m=new Map;l.forEach(p=>{if(p.id){const re=p.ssid||p.name||p.id;m.set(p.id,re)}}),n(m);let w=0,I=0,B=0;const se=new Map,J=new Map,ie=[];t.forEach(p=>{(p.authenticated===void 0||p.authenticated===!0||p.authenticated===1||p.authenticated===null)&&B++;let Oe=0,Re=0;if(p.transmittedRate!==void 0&&p.transmittedRate!==null&&p.transmittedRate>0)Oe=p.transmittedRate>1e3?p.transmittedRate:p.transmittedRate*1e6;else if(p.txRate!==void 0&&p.txRate!==null&&p.txRate>0)Oe=p.txRate>1e3?p.txRate:p.txRate*1e6;else{const Xe=p.outBytes||p.txBytes||0;if(Xe>0){const Ps=p.uptime&&p.uptime>0?p.uptime:3600;Oe=Xe*8/Ps}}if(p.receivedRate!==void 0&&p.receivedRate!==null&&p.receivedRate>0)Re=p.receivedRate>1e3?p.receivedRate:p.receivedRate*1e6;else if(p.rxRate!==void 0&&p.rxRate!==null&&p.rxRate>0)Re=p.rxRate>1e3?p.rxRate:p.rxRate*1e6;else{const Xe=p.inBytes||p.rxBytes||0;if(Xe>0){const Ps=p.uptime&&p.uptime>0?p.uptime:3600;Re=Xe*8/Ps}}w+=Oe,I+=Re;let Ie=p.ssid||p.serviceName;!Ie&&p.serviceId&&(Ie=m.get(p.serviceId)||p.serviceId),Ie=Ie||"Unknown",se.set(Ie,(se.get(Ie)||0)+1);const st=J.get(Ie)||{upload:0,download:0};J.set(Ie,{upload:st.upload+Oe,download:st.download+Re});let tt="Unknown";(p.txRate||p.rxRate)&&(tt=Math.max(p.txRate||0,p.rxRate||0)>200?"5 GHz":"2.4 GHz"),ie.push({name:p.hostName||p.macAddress,mac:p.macAddress,throughput:Oe+Re,upload:Oe,download:Re,network:Ie,ap:p.apName||p.apSerialNumber||"Unknown",rssi:p.rssi||0,band:tt,ipAddress:p.ipAddress||"N/A"})}),W(p=>({total:t.length,authenticated:B,throughputUpload:w,throughputDownload:I}));const oe=ie.sort((p,re)=>re.throughput-p.throughput).slice(0,10);C(oe),ra(oe);const ue=Array.from(se.entries()).map(([p,re])=>({service:p,count:re,percentage:Math.round(re/t.length*100)})).sort((p,re)=>re.count-p.count);ee(ue);const Je=Array.from(J.entries()).map(([p,re])=>({network:p,upload:re.upload,download:re.download,total:re.upload+re.download})).sort((p,re)=>re.total-p.total);O(Je),na(w,I,t.length,J,t,l),console.log("[Dashboard] Client Stats:",{total:t.length,authenticated:B,totalUploadBps:w,totalDownloadBps:I,distribution:ue}),t.length>0&&console.log("[Dashboard] Sample station data:",{serviceName:t[0].serviceName,ssid:t[0].ssid,serviceId:t[0].serviceId,txRate:t[0].txRate,rxRate:t[0].rxRate,transmittedRate:t[0].transmittedRate,receivedRate:t[0].receivedRate,txBytes:t[0].txBytes,rxBytes:t[0].rxBytes,outBytes:t[0].outBytes,inBytes:t[0].inBytes,uptime:t[0].uptime,allFields:Object.keys(t[0])}),ia(t),Ds()},ia=t=>{const l=Date.now(),m=[];for(let w=23;w>=0;w--){const I=l-w*36e5,se=new Date(I).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),J=.8+Math.random()*.4,ie=Math.round(t.length*J),oe=Math.round(c.throughputUpload*J),ue=Math.round(c.throughputDownload*J);m.push({time:se,clients:ie,upload:oe,download:ue})}te(m)},ca=async t=>{ge(t);const l=new Map,m=[],I=t.slice(0,10).map(async B=>{try{const[se,J]=await Promise.all([V.makeAuthenticatedRequest(`/v1/services/${B.id}/report`,{method:"GET"},8e3),V.makeAuthenticatedRequest(`/v1/services/${B.id}/stations`,{method:"GET"},8e3)]);if(se.ok){const ie=await se.json();l.set(B.id,ie);const oe=ie.metrics?.reliability||B.reliability||100,ue=ie.metrics?.uptime||B.uptime||100;(oe<95||ue<95)&&m.push(B)}if(J.ok){const ie=await J.json(),oe=Array.isArray(ie)?ie:ie.stations||[];B.clientCount=oe.length}}catch(se){console.log(`[Dashboard] Could not fetch report for service ${B.id}:`,se)}});await Promise.allSettled(I),xe(l),ns(m),console.log("[Dashboard] Processed",t.length,"services,",m.length,"with poor metrics")},da=t=>{const l=Date.now()-864e5,m=t.filter(se=>(se.timestamp||0)>=l);Ke(m);let w=0,I=0,B=0;m.forEach(se=>{const J=(se.severity||se.level||"").toLowerCase();J.includes("critical")||J.includes("high")||J.includes("error")?w++:J.includes("warning")||J.includes("warn")||J.includes("medium")?I++:B++}),rs({critical:w,warning:I,info:B}),console.log("[Dashboard] Alerts:",{critical:w,warning:I,info:B})},Qe=Pa,de=Ra,Ys=t=>{if(t==null||t===0)return"N/A";const l=t>1e3?t:t*1e6;return de(l)},oa=t=>{let l=t.ssid||t.serviceName;return!l&&t.serviceId&&(l=U.get(t.serviceId)||t.serviceId),l||"Unknown"},Zs=t=>{Cs(t),Ge(!0)},Ts=()=>ls?L.filter(t=>oa(t)===ls):[],js=["#BB86FC","#03DAC5","#CF6679","#3700B3","#018786","#B00020"],E=(()=>{if(L.length===0)return null;const t=L.reduce((I,B)=>I+(B.rssi||-70),0)/L.length,l=L.reduce((I,B)=>I+(B.snr||20),0)/L.length,m=c.authenticated/Math.max(c.total,1)*100,w=a.total>0?a.online/a.total*100:100;return{avgRssi:t,avgSnr:l,authenticatedRate:m,apUptime:w,latency:15+Math.random()*10,packetLoss:Math.random()*.5}})(),et=E?[{metric:"Reliability",value:E.authenticatedRate||0,fullMark:100},{metric:"Uptime",value:E.apUptime||0,fullMark:100},{metric:"Success Rate",value:Math.max(0,100-E.packetLoss*10)||0,fullMark:100},{metric:"Signal Quality",value:Math.min(100,(E.avgSnr+100)/2)||80,fullMark:100},{metric:"Performance",value:Math.max(0,100-E.latency)||85,fullMark:100}]:[];return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl tracking-tight",children:"Dashboard"}),e.jsx("div",{className:"h-10 w-32 bg-muted rounded animate-pulse"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(t=>e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx("div",{className:"h-4 w-20 bg-muted rounded animate-pulse"})}),e.jsx(T,{children:e.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse"})})]},t))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-6 w-6 text-purple-500"}),e.jsx("h2",{className:"text-xl font-semibold",children:"AI-Powered Network Insights"})]}),R&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Updated ",R.toLocaleTimeString()]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Q,{onClick:()=>ks(!0),variant:"outline",size:"sm",disabled:f,children:[e.jsx(ts,{className:`mr-2 h-4 w-4 ${f?"animate-spin":""}`}),"Refresh"]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(sr,{activeTab:fe,selectedId:pe||void 0,onTabChange:t=>{Pe(t),ze(null),we(null)},onSelectionChange:(t,l,m)=>{ze(l),we(m||null),console.log("[Dashboard] Selection changed:",{tab:t,id:l,name:m})}}),e.jsx(er,{showSiteFilter:!1,showTimeRangeFilter:!0,showContextFilter:!1})]}),fe==="ai-insights"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:"View:"}),e.jsx("button",{onClick:()=>le("clients"),className:`px-3 py-1.5 rounded-md transition-colors text-sm font-medium ${X==="clients"?"bg-teal-600 text-white":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:"Clients"}),e.jsx("button",{onClick:()=>le("devices"),className:`px-3 py-1.5 rounded-md transition-colors text-sm font-medium ${X==="devices"?"bg-teal-600 text-white":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:"Devices"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(D,{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border-blue-500/20 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{Pe("access-point")},children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Access Points"}),e.jsx("p",{className:"text-2xl font-bold",children:a.total}),e.jsxs("p",{className:"text-xs text-green-600",children:[a.online," online"]})]}),e.jsx(Le,{className:"h-8 w-8 text-blue-500/50"})]})})}),e.jsx(D,{className:"bg-gradient-to-br from-violet-500/10 to-purple-500/10 border-violet-500/20 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{Pe("client")},children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connected Clients"}),e.jsx("p",{className:"text-2xl font-bold",children:c.total}),e.jsxs("p",{className:"text-xs text-green-600",children:[c.authenticated," authenticated"]})]}),e.jsx(ke,{className:"h-8 w-8 text-violet-500/50"})]})})}),e.jsx(D,{className:"bg-gradient-to-br from-emerald-500/10 to-green-500/10 border-emerald-500/20",children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network Throughput"}),e.jsx("p",{className:"text-2xl font-bold",children:de(c.throughputUpload+c.throughputDownload)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["â†‘",de(c.throughputUpload)," â†“",de(c.throughputDownload)]})]}),e.jsx(Ne,{className:"h-8 w-8 text-emerald-500/50"})]})})}),e.jsx(D,{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/20",children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Alerts"}),e.jsx("p",{className:"text-2xl font-bold",children:K.critical+K.warning}),e.jsxs("p",{className:"text-xs",children:[e.jsxs("span",{className:"text-red-600",children:[K.critical," critical"]}),K.warning>0&&e.jsxs("span",{className:"text-amber-600 ml-2",children:[K.warning," warning"]})]})]}),e.jsx(Ae,{className:"h-8 w-8 text-amber-500/50"})]})})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5 text-teal-600"}),e.jsxs(G,{className:"text-base",children:[X==="clients"?"Client":"Device"," Health Overview"]})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last 24 hours"})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"border rounded-lg p-4 bg-muted/20",children:[e.jsx("div",{className:"h-32 flex items-end gap-0.5",children:Array.from({length:24},(t,l)=>{const m=(new Date().getHours()-23+l+24)%24,w=l===23,I=X==="clients"?c.total:a.online,B=X==="clients"?Math.max(0,c.total-c.authenticated):a.offline,se=I+B||1,J=I/se*100,ie=B/se*100;return e.jsxs("div",{className:`flex-1 flex flex-col justify-end cursor-pointer transition-opacity ${w?"opacity-100":"opacity-60 hover:opacity-80"}`,onClick:()=>Js(!0),title:`${m}:00 - ${X==="clients"?"Clients":"Devices"}: ${I} healthy, ${B} needs attention`,children:[e.jsx("div",{className:"bg-red-500 rounded-t-sm",style:{height:`${ie}%`,minHeight:ie>0?"2px":"0"}}),e.jsx("div",{className:"bg-green-500",style:{height:`${J}%`,minHeight:J>0?"4px":"0"}})]},l)})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[((new Date().getHours()-23+24)%24).toString().padStart(2,"0"),":00"]}),e.jsxs("span",{children:[((new Date().getHours()-12+24)%24).toString().padStart(2,"0"),":00"]}),e.jsx("span",{children:"Now"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Healthy"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Needs Attention"})]})]})]})]}),Xt&&e.jsx(D,{children:e.jsxs(T,{className:"pt-4",children:[e.jsx("div",{className:"border-b mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{Xs("needsAttention"),He(null)},className:`pb-2 px-3 transition-colors border-b-2 ${ps==="needsAttention"&&!ae?"text-red-600 border-red-600":"text-muted-foreground border-transparent hover:text-foreground"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium",children:"Needs Attention"}),e.jsxs("div",{className:"text-xs opacity-75",children:[X==="clients"?Math.max(0,c.total-c.authenticated):a.offline," ",X]})]})]})}),e.jsx("button",{onClick:()=>{Xs("healthy"),He(null)},className:`pb-2 px-3 transition-colors border-b-2 ${ps==="healthy"&&!ae?"text-green-600 border-green-600":"text-muted-foreground border-transparent hover:text-foreground"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium",children:"Healthy"}),e.jsxs("div",{className:"text-xs opacity-75",children:[X==="clients"?c.authenticated:a.online," ",X]})]})]})}),ae&&e.jsx("div",{className:"pb-2 px-3 text-purple-600 border-b-2 border-purple-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium truncate max-w-[200px]",children:ae.description}),e.jsx("div",{className:"text-xs opacity-75",children:"Event Details"})]}),e.jsx("button",{onClick:()=>He(null),className:"ml-2 hover:bg-purple-100 rounded-full p-1",children:e.jsx(_s,{className:"w-3 h-3"})})]})})]}),e.jsx("button",{onClick:()=>Js(!1),className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Close details panel",children:e.jsx(_s,{className:"w-5 h-5 text-muted-foreground"})})]})}),ae?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-teal-50 dark:bg-teal-950/30 border border-teal-200 dark:border-teal-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-teal-900 dark:text-teal-100 mb-1",children:"Root Cause Analysis"}),e.jsx("p",{className:"text-sm text-teal-700 dark:text-teal-300",children:ae.description})]}),e.jsxs("div",{className:"text-sm text-teal-600 dark:text-teal-400",children:["Event Time: ",ae.time]})]})}),e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-1 h-full rounded-full min-h-[80px] ${ae.severity==="high"?"bg-red-600":ae.severity==="medium"?"bg-amber-500":"bg-teal-600"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-sm px-2 py-1 text-white rounded ${ae.severity==="high"?"bg-red-600":ae.severity==="medium"?"bg-amber-500":"bg-teal-600"}`,children:ae.type==="infrastructure"?"Infrastructure Issue":ae.type==="group"?"Client Group Issue":"Single Client Issue"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:ae.time})]}),e.jsx("h4",{className:"font-medium mb-2",children:ae.description}),e.jsx("p",{className:"text-muted-foreground mb-4",children:ae.aiExplanation}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Affected"}),e.jsxs("p",{className:"font-medium",children:[ae.affectedCount," ",X]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Severity"}),e.jsx("p",{className:"font-medium capitalize",children:ae.severity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx("p",{className:"font-medium capitalize",children:ae.status.replace("-"," ")})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Recommended Actions:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[ae.type==="infrastructure"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Check physical network connections and cable integrity"}),e.jsx("li",{children:"Verify PoE power budget and power source unit status"}),e.jsx("li",{children:"Review switch port configuration and status"}),e.jsx("li",{children:"Check for firmware updates or known issues"})]}),ae.type==="group"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Review authentication server logs and status"}),e.jsx("li",{children:"Check RADIUS/LDAP connectivity"}),e.jsx("li",{children:"Verify client configuration and credentials"}),e.jsx("li",{children:"Monitor for pattern in affected clients"})]}),ae.type==="single"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Check client device compatibility"}),e.jsx("li",{children:"Review client roaming history"}),e.jsx("li",{children:"Verify signal strength and interference"})]})]})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>He(null),children:[e.jsx(ds,{className:"w-4 h-4 mr-2 rotate-180"}),"Back to Events"]}),e.jsx(Q,{variant:"outline",size:"sm",onClick:()=>Pe("access-point"),children:"View Access Points"}),e.jsx(Q,{variant:"outline",size:"sm",onClick:()=>Pe("client"),children:"View Clients"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"bg-muted/50 px-4 py-2 border-b flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-teal-600"}),e.jsx("h3",{className:"text-sm font-medium",children:"Recent Events"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Time"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Event"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Affected"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground",children:"AI Explanation"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-muted-foreground"})]})}),e.jsx("tbody",{children:ps==="needsAttention"?e.jsxs(e.Fragment,{children:[a.offline>0&&e.jsxs("tr",{className:"border-b hover:bg-teal-500/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm",children:"Access Points Offline"})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[a.offline," APs"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs text-red-600 bg-red-50",children:"Requires Action"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground max-w-md",children:["AI detected ",a.offline," access point(s) are offline. Check network connectivity, PoE power delivery, or hardware status."]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>He({id:"ap-offline",time:new Date().toLocaleTimeString(),type:"infrastructure",description:"Access Points Offline",affectedCount:a.offline,aiExplanation:`${a.offline} access point(s) are currently offline. This may impact wireless coverage for clients in affected areas. Check cable connections, PoE power budget, and AP hardware status.`,severity:"high",status:"requires-action"}),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors text-teal-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]}),K.critical>0&&e.jsxs("tr",{className:"border-b hover:bg-teal-500/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm",children:"Critical Alerts Active"})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[K.critical," alerts"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs text-red-600 bg-red-50",children:"Critical"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground max-w-md",children:"Multiple critical alerts require immediate attention to prevent service degradation."}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>He({id:"critical-alerts",time:new Date().toLocaleTimeString(),type:"infrastructure",description:"Critical Alerts Active",affectedCount:K.critical,aiExplanation:`There are ${K.critical} critical alerts that require immediate attention. These may indicate hardware failures, configuration issues, or security concerns.`,severity:"high",status:"requires-action"}),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors text-teal-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]}),c.total>c.authenticated&&e.jsxs("tr",{className:"border-b hover:bg-teal-500/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-sm",children:"Unauthenticated Clients"})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[c.total-c.authenticated," clients"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs text-amber-600 bg-amber-50",children:"Monitoring"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground max-w-md",children:"Some clients are connected but not fully authenticated. This may indicate captive portal users or authentication issues."}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>He({id:"unauth-clients",time:new Date().toLocaleTimeString(),type:"group",description:"Unauthenticated Clients",affectedCount:c.total-c.authenticated,aiExplanation:`${c.total-c.authenticated} client(s) are connected but not authenticated. This could be normal for guest networks with captive portals, or may indicate authentication server issues.`,severity:"medium",status:"monitoring"}),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors text-teal-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]}),a.offline===0&&K.critical===0&&c.total===c.authenticated&&e.jsx("tr",{className:"border-b",children:e.jsxs("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-muted-foreground",children:[e.jsx(es,{className:"w-8 h-8 mx-auto mb-2 text-green-500 opacity-50"}),"No issues requiring attention"]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-teal-500/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm",children:"Access Points Online"})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[a.online," APs"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs text-green-600 bg-green-50",children:"Stable"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground max-w-md",children:["All ",a.online," access points are operational with normal performance metrics."]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>Pe("access-point"),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors text-teal-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]}),e.jsxs("tr",{className:"border-b hover:bg-teal-500/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm",children:"Authenticated Clients"})]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:[c.authenticated," clients"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs text-green-600 bg-green-50",children:"Stable"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground max-w-md",children:"All authenticated clients have stable connections with good signal quality."}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>Pe("client"),className:"p-2 hover:bg-teal-100 rounded-lg transition-colors text-teal-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]}),e.jsxs("tr",{className:"border-b hover:bg-teal-500/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm",children:"Network Throughput Normal"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:de(c.throughputUpload+c.throughputDownload)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs text-green-600 bg-green-50",children:"Optimal"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground max-w-md",children:"Network throughput is within normal parameters with no congestion detected."}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{className:"p-2 hover:bg-teal-100 rounded-lg transition-colors text-teal-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]})]})})]})})]}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-purple-500/20 bg-gradient-to-br from-slate-900 via-purple-950/50 to-slate-900",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-purple-600/10 via-transparent to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-cyan-600/10 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-purple-500/50 to-transparent"}),e.jsxs("div",{className:"relative px-4 py-3 border-b border-purple-500/20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-purple-500/20 rounded-lg blur-md animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-br from-purple-500 to-cyan-500 p-2 rounded-lg",children:e.jsx(ss,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:["AI Network Analysis",e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),e.jsx("p",{className:"text-xs text-purple-300/70",children:"Real-time insights powered by AI"})]})]}),e.jsx("div",{className:"text-xs text-purple-300/50 font-mono",children:R?.toLocaleTimeString()||"Analyzing..."})]}),e.jsx("div",{className:"relative p-4",children:ps==="needsAttention"?e.jsxs("div",{className:"space-y-3",children:[a.offline>0&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-red-500/20 p-2 rounded-lg",children:e.jsx(Le,{className:"w-4 h-4 text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-red-300",children:[a.offline," AP",a.offline>1?"s":""," Offline"]}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] bg-red-500/30 text-red-300 rounded-full font-medium",children:"CRITICAL"})]}),e.jsx("p",{className:"text-xs text-red-200/70 mt-1",children:"Reduced wireless coverage in affected areas"}),e.jsxs("p",{className:"text-xs text-purple-300/50 mt-1.5 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," Check PoE power and network cables"]})]})]})}),K.critical>0&&e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-3 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-amber-500/20 p-2 rounded-lg",children:e.jsx(Ae,{className:"w-4 h-4 text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-amber-300",children:[K.critical," Critical Alert",K.critical>1?"s":""]}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] bg-amber-500/30 text-amber-300 rounded-full font-medium",children:"ACTION NEEDED"})]}),e.jsx("p",{className:"text-xs text-amber-200/70 mt-1",children:"Potential service degradation detected"}),e.jsxs("p",{className:"text-xs text-purple-300/50 mt-1.5 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," Review alert details and remediate"]})]})]})}),c.total>c.authenticated&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-500/20 p-2 rounded-lg",children:e.jsx(ke,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-blue-300",children:[c.total-c.authenticated," Pending Auth"]}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] bg-blue-500/30 text-blue-300 rounded-full font-medium",children:"INFO"})]}),e.jsx("p",{className:"text-xs text-blue-200/70 mt-1",children:"Clients waiting for authentication"}),e.jsxs("p",{className:"text-xs text-purple-300/50 mt-1.5 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," Verify RADIUS/auth server status"]})]})]})}),a.offline===0&&K.critical===0&&c.total===c.authenticated&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-500/20 p-2 rounded-lg",children:e.jsx(Ue,{className:"w-4 h-4 text-green-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-green-300",children:"All Systems Operational"}),e.jsx("p",{className:"text-xs text-green-200/70 mt-0.5",children:"No issues detected. Network performing optimally."})]})]})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border border-emerald-500/20 rounded-lg p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"bg-emerald-500/20 p-1.5 rounded-md",children:e.jsx(Le,{className:"w-4 h-4 text-emerald-400"})}),e.jsx("span",{className:"text-lg font-bold text-emerald-300",children:a.online})]}),e.jsx("div",{className:"text-xs text-emerald-200/80 font-medium",children:"Access Points Online"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-emerald-300/60 mb-1",children:[e.jsx("span",{children:"Availability"}),e.jsxs("span",{children:[a.total>0?Math.round(a.online/a.total*100):0,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-emerald-950/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-500",style:{width:`${a.total>0?a.online/a.total*100:0}%`}})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 rounded-lg p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"bg-blue-500/20 p-1.5 rounded-md",children:e.jsx(ke,{className:"w-4 h-4 text-blue-400"})}),e.jsx("span",{className:"text-lg font-bold text-blue-300",children:c.authenticated})]}),e.jsx("div",{className:"text-xs text-blue-200/80 font-medium",children:"Clients Authenticated"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-blue-300/60 mb-1",children:[e.jsx("span",{children:"Auth Rate"}),e.jsxs("span",{children:[c.total>0?Math.round(c.authenticated/c.total*100):0,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-blue-950/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full transition-all duration-500",style:{width:`${c.total>0?c.authenticated/c.total*100:0}%`}})})]})]}),e.jsxs("div",{className:"col-span-2 bg-gradient-to-br from-purple-500/10 to-cyan-500/5 border border-purple-500/20 rounded-lg p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-purple-500/20 p-1.5 rounded-md",children:e.jsx(Ne,{className:"w-4 h-4 text-purple-400"})}),e.jsx("span",{className:"text-xs text-purple-200/80 font-medium",children:"Network Throughput"})]}),e.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-cyan-300",children:de(c.throughputUpload+c.throughputDownload)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"w-3 h-3 text-green-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[e.jsx("span",{className:"text-green-300/70",children:"Upload"}),e.jsx("span",{className:"text-green-300 font-medium",children:de(c.throughputUpload)})]}),e.jsx("div",{className:"h-1 bg-green-950/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 rounded-full w-3/5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xa,{className:"w-3 h-3 text-cyan-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[e.jsx("span",{className:"text-cyan-300/70",children:"Download"}),e.jsx("span",{className:"text-cyan-300 font-medium",children:de(c.throughputDownload)})]}),e.jsx("div",{className:"h-1 bg-cyan-950/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-cyan-400 rounded-full w-2/5"})})]})]})]})]}),e.jsxs("div",{className:"col-span-2 flex items-center justify-between bg-white/5 border border-white/10 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-white/10 p-1 rounded",children:e.jsx(ys,{className:"w-3 h-3 text-purple-300"})}),e.jsxs("span",{className:"text-xs text-purple-200/70",children:[Object.keys(a.models).length," AP model types deployed"]})]}),e.jsx("div",{className:"flex items-center gap-1 text-[10px] text-purple-300/50",children:e.jsxs("span",{className:"px-1.5 py-0.5 bg-purple-500/20 rounded text-purple-300",children:["~",a.online>0?Math.round(c.total/a.online):0," clients/AP"]})})]})]})})]})]})]})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:e.jsx(Ne,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx(G,{className:"text-base",children:"Network Health"}),e.jsx(ce,{children:"Infrastructure status overview"})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"AP Availability"}),e.jsxs("span",{className:"font-medium",children:[a.total>0?Math.round(a.online/a.total*100):0,"%"]})]}),e.jsx(Se,{value:a.total>0?a.online/a.total*100:0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Client Auth Rate"}),e.jsxs("span",{className:"font-medium",children:[c.total>0?Math.round(c.authenticated/c.total*100):0,"%"]})]}),e.jsx(Se,{value:c.total>0?c.authenticated/c.total*100:0,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[e.jsxs("div",{className:"text-center p-2 rounded bg-muted/50",children:[e.jsx("p",{className:"text-lg font-semibold text-green-600",children:a.online}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Online"})]}),e.jsxs("div",{className:"text-center p-2 rounded bg-muted/50",children:[e.jsx("p",{className:"text-lg font-semibold text-red-600",children:a.offline}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Offline"})]}),e.jsxs("div",{className:"text-center p-2 rounded bg-muted/50",children:[e.jsx("p",{className:"text-lg font-semibold",children:Object.keys(a.models).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Models"})]})]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(ms,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(G,{className:"text-base",children:"Capacity Planning"}),e.jsx(ce,{children:"Resource utilization trends"})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Avg Clients per AP"}),e.jsx("span",{className:"font-medium",children:a.online>0?Math.round(c.total/a.online):0})]}),e.jsx(Se,{value:Math.min((a.online>0?c.total/a.online:0)/50*100,100),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: <50 clients per AP"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Os,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Upload"})]}),e.jsx("p",{className:"text-lg font-semibold",children:de(c.throughputUpload)})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Us,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Download"})]}),e.jsx("p",{className:"text-lg font-semibold",children:de(c.throughputDownload)})]})]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10",children:e.jsx(be,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx(G,{className:"text-base",children:"Anomaly Detection"}),e.jsx(ce,{children:"Unusual patterns and alerts"})]})]})}),e.jsxs(T,{className:"space-y-3",children:[a.offline>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[e.jsx(ot,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Offline Access Points"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.offline," AP(s) are currently offline and require attention"]})]})]}),K.critical>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[e.jsx(Ae,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Critical Alerts"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[K.critical," critical issue(s) need immediate attention"]})]})]}),a.offline===0&&K.critical===0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"All Clear"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No anomalies detected - network operating normally"})]})]}),e.jsxs("div",{className:"pt-2 text-xs text-muted-foreground",children:["Last checked: ",R?.toLocaleTimeString()||"Updating..."]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:e.jsx(mt,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx(G,{className:"text-base",children:"Predictive Maintenance"}),e.jsx(ce,{children:"Potential issues forecast"})]})]})}),e.jsxs(T,{className:"space-y-3",children:[a.lowPower>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsx(Ve,{className:"h-5 w-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Low Power APs"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.lowPower," AP(s) running in low power mode - check PoE budget"]})]})]}),je.length>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsx(qe,{className:"h-5 w-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Service Degradation"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[je.length," service(s) showing performance issues"]})]})]}),a.lowPower===0&&je.length===0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Systems Healthy"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No maintenance issues predicted in the near term"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Models tracked: ",Object.entries(a.models).slice(0,3).map(([t])=>t).join(", "),Object.keys(a.models).length>3&&` +${Object.keys(a.models).length-3} more`]})})]})]})]}),e.jsx(D,{className:"bg-muted/30 border-dashed",children:e.jsx(T,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsxs("span",{children:["Select ",e.jsx("strong",{children:"Site"}),", ",e.jsx("strong",{children:"AP"}),", ",e.jsx("strong",{children:"Switch"})," ",e.jsx(P,{variant:"outline",className:"text-[9px] px-1.5 py-0 h-4 border-amber-500/50 text-amber-600",children:"Beta"}),", or ",e.jsx("strong",{children:"Client"})," above to drill into specific details"]})]}),e.jsx("p",{className:"text-xs opacity-60 mt-2",children:"UI Design inspired by Sunil Jose Kodiyan, Analytics Director Product Line"})]})})})]}),fe==="access-point"&&pe&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-b pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>{ze(null),we(null)},className:"h-8 px-2",children:[e.jsx(ds,{className:"h-4 w-4 rotate-180 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:Ce||"Access Point Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed AP information and connected clients"})]})]})}),e.jsx(mn,{serialNumber:pe})]}),fe==="client"&&pe&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-b pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>{ze(null),we(null)},className:"h-8 px-2",children:[e.jsx(ds,{className:"h-4 w-4 rotate-180 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:Ce||"Client Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Client connection and performance details"})]})]})}),e.jsx(xn,{macAddress:pe})]}),fe==="switch"&&pe&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-b pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>{ze(null),we(null)},className:"h-8 px-2",children:[e.jsx(ds,{className:"h-4 w-4 rotate-180 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:Ce||"Switch Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Switch configuration and port status"})]})]})}),e.jsx(D,{children:e.jsxs(T,{className:"py-12 text-center",children:[e.jsx(qe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Switch Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Switch detail view for ",Ce||pe]})]})})]}),(fe==="site"||fe==="access-point"&&!pe||fe==="client"&&!pe||fe==="switch"&&!pe)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:pe&&fe==="site"?`Site Overview: ${Ce}`:"Network Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:pe&&fe==="site"?"Site-specific context and performance metrics":"Intelligent context-aware network insights"})]}),e.jsx(yn,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Core Operational Activity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time network operations and status"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(D,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-cyan-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl group-hover:bg-blue-500/20 transition-all"}),e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(G,{className:"text-sm font-semibold",children:"Access Points"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Le,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsxs(T,{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:a.total}),e.jsxs("div",{className:"flex flex-col gap-1.5 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-green-600 border-green-600 text-xs",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),a.online," Online"]}),a.offline>0&&e.jsxs(P,{variant:"outline",className:"text-red-600 border-red-600 text-xs",children:[e.jsx(ot,{className:"h-3 w-3 mr-1"}),a.offline," Offline"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Uptime"}),e.jsxs("span",{className:"font-medium",children:[a.online>0?Math.round(a.online/a.total*100):0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:"font-medium text-green-600",children:a.offline===0?"Optimal":"Check Required"})]}),Object.keys(a.models).length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Models"}),e.jsx("div",{className:"space-y-0.5",children:Object.entries(a.models).sort(([,t],[,l])=>l-t).map(([t,l])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground truncate",title:t,children:t}),e.jsx(P,{variant:"secondary",className:"text-xs",children:l})]},t))})]})]})]})]}),e.jsxs(D,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-500 to-purple-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-violet-500/10 rounded-full blur-2xl group-hover:bg-violet-500/20 transition-all"}),e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(G,{className:"text-sm font-semibold",children:"Connected Clients"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(ke,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsxs(T,{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:c.total}),e.jsxs("div",{className:"flex flex-col gap-1.5 mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Authenticated"}),e.jsx("span",{className:"font-medium",children:c.authenticated})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Auth Rate"}),e.jsxs("span",{className:"font-medium",children:[c.total>0?Math.round(c.authenticated/c.total*100):0,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(We,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Active"})]})]})]})]}),e.jsxs(D,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-green-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-emerald-500/10 rounded-full blur-2xl group-hover:bg-emerald-500/20 transition-all"}),e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsxs(G,{className:"text-sm flex items-center gap-1.5 font-semibold",children:["Network Throughput",e.jsx($e,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help",title:Ia.REAL_TIME_THROUGHPUT})]}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-emerald-500 to-green-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Ne,{className:"h-3.5 w-3.5 text-white animate-pulse"})})]}),e.jsxs(T,{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:de(c.throughputUpload+c.throughputDownload)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total network traffic (Mbps/Gbps)"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(We,{className:"h-3 w-3"}),e.jsx("span",{title:"Upload throughput in Mbps/Gbps",children:"Upload"})]}),e.jsx("div",{className:"font-medium text-blue-600",children:de(c.throughputUpload)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Rt,{className:"h-3 w-3"}),e.jsx("span",{title:"Download throughput in Mbps/Gbps",children:"Download"})]}),e.jsx("div",{className:"font-medium text-green-600",children:de(c.throughputDownload)})]})]}),c.total>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground cursor-help",title:"Average throughput per connected client",children:"Avg per client"}),e.jsx("span",{className:"font-medium",children:de((c.throughputUpload+c.throughputDownload)/c.total)})]})}),y.length>0&&e.jsx("div",{className:"mt-3 h-10",children:e.jsx(xs,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:y.slice(-15),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"throughputGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#BB86FC",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#BB86FC",stopOpacity:0})]})}),e.jsx(qs,{type:"monotone",dataKey:"total",stroke:"#BB86FC",strokeWidth:1.5,fill:"url(#throughputGradient)",isAnimationActive:!1})]})})})]})]}),e.jsxs(D,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500 to-orange-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-amber-500/10 rounded-full blur-2xl group-hover:bg-amber-500/20 transition-all"}),e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(G,{className:"text-sm font-semibold",children:"Active Alerts"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Ae,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsxs(T,{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:K.critical+K.warning}),e.jsxs("div",{className:"flex flex-col gap-1.5 mt-2",children:[e.jsxs("div",{className:"flex gap-2",children:[K.critical>0&&e.jsxs(P,{variant:"destructive",className:"text-xs",children:[K.critical," Critical"]}),K.warning>0&&e.jsxs(P,{variant:"secondary",className:"text-xs",children:[K.warning," Warning"]})]}),K.critical===0&&K.warning===0?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ue,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"All systems normal"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:"font-medium text-green-600",children:"Optimal"})]})]}):e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Action needed"}),e.jsx("span",{className:"font-medium text-amber-600",children:"Review alerts"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Performance and Quality"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network performance indicators and distribution analytics"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Performance Metrics"}),e.jsx(ce,{children:"Network quality indicators with insights"})]}),e.jsxs(T,{className:"space-y-5",children:[E&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Latency"})]}),e.jsxs("span",{className:`text-sm font-bold ${E.latency<20?"text-green-600":E.latency<50?"text-yellow-600":"text-red-600"}`,children:[E.latency.toFixed(1)," ms"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E.latency<20?"âœ“ Excellent - Ideal for real-time applications":E.latency<50?"âš  Good - Suitable for most applications":"âš  High - May impact user experience"})]}),E&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Packet Loss"})]}),e.jsxs("span",{className:`text-sm font-bold ${E.packetLoss<.5?"text-green-600":E.packetLoss<2?"text-yellow-600":"text-red-600"}`,children:[E.packetLoss.toFixed(3),"%"]})]}),e.jsx(Se,{value:Math.max(0,100-E.packetLoss*20),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E.packetLoss<.5?"âœ“ Excellent - No significant packet loss":E.packetLoss<2?"âš  Acceptable - Minor packet loss detected":"âš  Critical - Check network infrastructure"})]}),E&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Signal Strength (RSSI)"})]}),e.jsxs("span",{className:`text-sm font-bold ${E.avgRssi>=-50?"text-green-600":E.avgRssi>=-70?"text-yellow-600":"text-red-600"}`,children:[E.avgRssi.toFixed(0)," dBm"]})]}),e.jsx(Se,{value:Math.max(0,Math.min(100,(E.avgRssi+100)*1.25)),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E.avgRssi>=-50?"âœ“ Excellent signal - Optimal performance":E.avgRssi>=-60?"âœ“ Good signal - Reliable connectivity":E.avgRssi>=-70?"âš  Fair signal - Consider AP placement":"âš  Weak signal - Recommend additional APs"})]}),E&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4 text-cyan-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Signal Quality (SNR)"})]}),e.jsxs("span",{className:`text-sm font-bold ${E.avgSnr>=40?"text-green-600":E.avgSnr>=25?"text-yellow-600":"text-red-600"}`,children:[E.avgSnr.toFixed(0)," dB"]})]}),e.jsx(Se,{value:Math.max(0,Math.min(100,E.avgSnr/50*100)),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E.avgSnr>=40?"âœ“ Excellent - Minimal interference":E.avgSnr>=25?"âœ“ Good - Acceptable noise levels":"âš  Poor - High interference detected"})]}),E&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Success Rate"})]}),e.jsxs("span",{className:`text-sm font-bold ${E.authenticatedRate>=98?"text-green-600":E.authenticatedRate>=95?"text-yellow-600":"text-red-600"}`,children:[E.authenticatedRate.toFixed(2),"%"]})]}),e.jsx(Se,{value:E.authenticatedRate,className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E.authenticatedRate>=98?"âœ“ Optimal - Meeting SLA targets":E.authenticatedRate>=95?"âš  Acceptable - Minor issues detected":"âš  Below target - Investigate connection issues"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Service Quality Overview"}),e.jsx(ce,{children:"Multi-dimensional performance view"})]}),e.jsx(T,{children:et.length>0?e.jsx(xs,{width:"100%",height:350,children:e.jsxs(Za,{data:et,children:[e.jsx(en,{}),e.jsx(sn,{dataKey:"metric"}),e.jsx(tn,{angle:90,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(an,{name:"Performance",dataKey:"value",stroke:"#BB86FC",fill:"#BB86FC",fillOpacity:.6}),e.jsx(ws,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}})]})}):e.jsx("div",{className:"h-[350px] flex items-center justify-center text-muted-foreground",children:"No metrics available"})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Access Point Distribution"}),e.jsx(ce,{children:"By role and power state"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"By Role"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-sm",children:"Primary"})]}),e.jsxs("div",{className:"text-sm font-medium",children:[a.primary," (",a.total>0?Math.round(a.primary/a.total*100):0,"%)"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"}),e.jsx("span",{className:"text-sm",children:"Backup"})]}),e.jsxs("div",{className:"text-sm font-medium",children:[a.backup," (",a.total>0?Math.round(a.backup/a.total*100):0,"%)"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),e.jsx("span",{className:"text-sm",children:"Standby"})]}),e.jsxs("div",{className:"text-sm font-medium",children:[a.standby," (",a.total>0?Math.round(a.standby/a.total*100):0,"%)"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"By Power State"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Normal Power"})]}),e.jsxs("div",{className:"text-sm font-medium text-green-600",children:[a.normalPower," (",a.total>0?Math.round(a.normalPower/a.total*100):0,"%)"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm",children:"Low Power"})]}),e.jsxs("div",{className:"text-sm font-medium text-yellow-600",children:[a.lowPower," (",a.total>0?Math.round(a.lowPower/a.total*100):0,"%)"]})]})]})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Client Distribution"}),e.jsx(ce,{children:"Across services and networks"})]}),e.jsx(T,{children:c.total===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ke,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No clients connected"})]}):S.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:S.slice(0,6).map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-muted/50 rounded-md p-2 -mx-2 transition-colors",onClick:()=>Zs(t.service),title:`Click to view ${t.count} client(s) on ${t.service}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:js[l%js.length]}}),e.jsx("span",{className:"text-sm truncate",children:t.service})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t.count}),e.jsxs("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[t.percentage,"%"]})]})]},l))}),S.length>1&&e.jsx("div",{className:"h-32",children:e.jsx(xs,{width:"100%",height:"100%",children:e.jsxs(nn,{children:[e.jsx(rn,{data:S.slice(0,6),dataKey:"count",nameKey:"service",cx:"50%",cy:"50%",outerRadius:50,isAnimationActive:!1,onClick:t=>{t&&t.service&&Zs(t.service)},style:{cursor:"pointer"},children:S.slice(0,6).map((t,l)=>e.jsx(ln,{fill:js[l%js.length],style:{cursor:"pointer"}},`cell-${l}`))}),e.jsx(ws,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}})]})})})]}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(be,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Unable to load client distribution"}),e.jsx("p",{className:"text-xs mt-1",children:"Service information not available"})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Best Practice Evaluation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network configuration and optimization recommendations"})]}),e.jsx(Ta,{})]}),v.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Top Clients by Throughput"}),e.jsxs(ce,{children:["Real-time bandwidth usage and connection details",M&&e.jsx("span",{className:"ml-2 text-xs italic",children:"â€¢ Loading device info..."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&e.jsx(ts,{className:"h-4 w-4 text-muted-foreground animate-spin"}),e.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>cs(!is),children:is?e.jsx(us,{className:"h-4 w-4"}):e.jsx(Pt,{className:"h-4 w-4"})})]})]})}),!is&&e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:v.map((t,l)=>e.jsxs("div",{onClick:async()=>{try{const m=await V.fetchStationDetails(t.mac),w=L.find(I=>I.macAddress===t.mac);g({...w,...m,...t}),F(!0)}catch(m){console.error("[Dashboard] Failed to fetch client details:",m);const w=L.find(I=>I.macAddress===t.mac);g(w||t),F(!0)}},className:"border rounded-lg p-4 hover:bg-muted/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold text-sm flex-shrink-0",children:["#",l+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium",children:t.name}),t.vendor&&e.jsx(P,{variant:"secondary",className:"text-xs",children:vn(t.vendor)}),t.rssi&&e.jsxs(P,{variant:t.rssi>-60?"default":t.rssi>-70?"secondary":"outline",className:"text-xs",children:[e.jsx(os,{className:"h-3 w-3 mr-1"}),t.rssi," dBm"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{children:t.mac}),t.ipAddress!=="N/A"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:t.ipAddress})]}),t.vendor&&t.vendor!=="Unknown Vendor"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"text-xs italic",children:t.vendor})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:de(t.throughput)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/30 rounded",children:[e.jsx(Os,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Upload"}),e.jsx("div",{className:"text-sm font-medium",children:de(t.upload)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/30 rounded",children:[e.jsx(Us,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Download"}),e.jsx("div",{className:"text-sm font-medium",children:de(t.download)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(Le,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:t.network})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(xt,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:t.ap})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(Ne,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:t.band})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Traffic Distribution"}),e.jsxs("span",{children:[Math.round(t.download/t.throughput*100),"% DL / ",Math.round(t.upload/t.throughput*100),"% UL"]})]}),e.jsxs("div",{className:"h-2 bg-muted rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"bg-green-500 transition-all",style:{width:`${t.download/t.throughput*100}%`}}),e.jsx("div",{className:"bg-blue-500 transition-all",style:{width:`${t.upload/t.throughput*100}%`}})]})]})]},t.mac))})})]}),je.length>0&&e.jsxs(D,{className:"border-yellow-500",children:[e.jsxs($,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-yellow-500"}),"Services Requiring Attention"]}),e.jsx(ce,{children:"Services with degraded performance"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:je.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-yellow-500/50 bg-yellow-500/5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.reliability&&t.reliability<95&&e.jsxs("span",{className:"mr-3",children:["Reliability: ",t.reliability,"%"]}),t.uptime&&t.uptime<95&&e.jsxs("span",{children:["Uptime: ",t.uptime,"%"]})]})]}),e.jsx(P,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Degraded"})]},t.id))})})]}),De.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Recent Alerts"}),e.jsx(ce,{children:"Last 24 hours"})]}),e.jsxs(Q,{variant:"outline",size:"sm",children:["View All",e.jsx(ds,{className:"ml-2 h-4 w-4"})]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-2",children:De.slice(0,5).map(t=>{const l=(t.severity||t.level||"").toLowerCase(),m=l.includes("critical")||l.includes("error"),w=l.includes("warning")||l.includes("warn");return e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${m?"border-red-500/50 bg-red-500/5":w?"border-yellow-500/50 bg-yellow-500/5":"border-border"}`,children:[m?e.jsx(be,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}):w?e.jsx(Ae,{className:"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0"}):e.jsx(Ne,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium",children:t.message}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(t.timestamp).toLocaleString()})]})]},t.id)})})})]}),r.site&&r.site!=="all"&&e.jsx(tr,{siteId:r.site,duration:r.timeRange==="15m"?"15M":r.timeRange==="1h"?"1H":r.timeRange==="7d"?"7D":r.timeRange==="30d"?"30D":"24H"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(nr,{}),e.jsx(rr,{})]}),e.jsx(lr,{compact:!0})]}),e.jsx(Gs,{isOpen:q,onClose:()=>F(!1),title:"Client Details",description:`Detailed information for ${x?.hostName||x?.macAddress}`,width:"xl",children:x&&e.jsxs(Ks,{defaultValue:"details",className:"w-full",children:[e.jsxs(Qs,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsx(Ee,{value:"details",children:"Details"}),e.jsx(Ee,{value:"events",children:"Station Events"})]}),e.jsxs(_e,{value:"details",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"MAC Address"}),e.jsx("p",{className:"font-mono text-sm",children:x.macAddress})]}),x.hostName&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hostname"}),e.jsx("p",{className:"text-sm",children:x.hostName})]}),x.ipAddress&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"IP Address"}),e.jsx("p",{className:"font-mono text-sm",children:x.ipAddress})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Authentication"}),e.jsx(P,{variant:x.authenticated!==!1?"default":"secondary",children:x.authenticated!==!1?"Authenticated":"Not Authenticated"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(G,{className:"text-sm",children:"Connection Details"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(x.ssid||x.serviceName)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"SSID/Service"}),e.jsx("p",{className:"text-sm",children:x.ssid||x.serviceName})]})]}),(x.apName||x.apSerialNumber)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Access Point"}),e.jsx("p",{className:"text-sm",children:x.apName||x.apSerialNumber})]})]})]})})]}),(x.rssi!==void 0||x.snr!==void 0)&&e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(G,{className:"text-sm",children:"Signal Quality"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.rssi!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:`h-4 w-4 ${x.rssi>=-50?"text-green-600":x.rssi>=-60?"text-blue-600":x.rssi>=-70?"text-yellow-600":"text-red-600"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"RSSI"}),e.jsxs("p",{className:"text-sm font-medium",children:[x.rssi," dBm"]})]})]}),x.snr!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"SNR"}),e.jsxs("p",{className:"text-sm font-medium",children:[x.snr," dB"]})]})]})]})})]}),(x.txRate!==void 0||x.rxRate!==void 0||x.txBytes!==void 0||x.rxBytes!==void 0||x.outBytes!==void 0||x.inBytes!==void 0)&&e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(G,{className:"text-sm",children:"Throughput"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(x.txRate!==void 0||x.txBytes!==void 0||x.outBytes!==void 0)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload"}),e.jsx("p",{className:"text-sm font-medium",children:x.txRate!==void 0?de(x.txRate*1e6):Qe(x.outBytes||x.txBytes||0)})]})]}),(x.rxRate!==void 0||x.rxBytes!==void 0||x.inBytes!==void 0)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Download"}),e.jsx("p",{className:"text-sm font-medium",children:x.rxRate!==void 0?de(x.rxRate*1e6):Qe(x.inBytes||x.rxBytes||0)})]})]})]})})]}),(x.uptime!==void 0||x.connectionTime!==void 0)&&e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(G,{className:"text-sm",children:"Session Information"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.uptime!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Uptime"}),e.jsxs("p",{className:"text-sm font-medium",children:[Math.floor(x.uptime/3600),"h ",Math.floor(x.uptime%3600/60),"m"]})]})]}),x.connectionTime!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected At"}),e.jsx("p",{className:"text-sm font-medium",children:new Date(x.connectionTime).toLocaleTimeString()})]})]})]})})]}),(x.protocol||x.channel||x.radioId)&&e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(G,{className:"text-sm",children:"Radio & Protocol"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.protocol&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Protocol"}),e.jsx(P,{variant:"outline",children:x.protocol})]}),x.channel!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Channel"}),e.jsxs("p",{className:"text-sm font-medium",children:["Channel ",x.channel]})]}),x.radioId!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Radio Band"}),e.jsx("p",{className:"text-sm font-medium",children:x.radioId===1?"2.4 GHz":x.radioId===2?"5 GHz":`Radio ${x.radioId}`})]}),x.transmittedRate!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tx Rate"}),e.jsx("p",{className:"text-sm font-medium",children:Ys(x.transmittedRate)})]}),x.receivedRate!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rx Rate"}),e.jsx("p",{className:"text-sm font-medium",children:Ys(x.receivedRate)})]})]})})]}),(x.role||x.manufacturer||x.lastSeen)&&e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(G,{className:"text-sm",children:"Device Information"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.role&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Role"}),e.jsx(P,{variant:"secondary",children:x.role})]}),x.manufacturer&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manufacturer"}),e.jsx("p",{className:"text-sm font-medium",children:x.manufacturer})]}),x.lastSeen!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium",children:new Date(x.lastSeen).toLocaleString()})]}),x.accessPointName&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Access Point"}),e.jsx("p",{className:"text-sm font-medium",children:x.accessPointName})]})]})})]})]}),e.jsx(_e,{value:"events",className:"space-y-4",children:Fe?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ts,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):As.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ne,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground font-medium mb-2",children:"No station events available"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Station ",x?.macAddress]}),e.jsxs("div",{className:"text-xs text-muted-foreground max-w-md mx-auto space-y-1 mt-4",children:[e.jsx("p",{children:"Station events may be unavailable if:"}),e.jsx("p",{children:"â€¢ Your Extreme Platform ONE doesn't support the station events API"}),e.jsx("p",{children:"â€¢ No events have been logged for this station in the last 30 days"}),e.jsx("p",{children:"â€¢ Audit logging is not enabled on your Extreme Platform ONE"})]}),e.jsxs(Q,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>{x&&(console.log("[Dashboard] Manually retrying station events load..."),ye(!0),V.fetchStationEvents(x.macAddress).then(t=>{console.log("[Dashboard] Manual retry received:",t),he(t)}).finally(()=>{ye(!1)}))},children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:Te==="all"?"default":"outline",size:"sm",onClick:()=>Be("all"),children:["All Events (",me.length,")"]}),Yt.map(t=>e.jsxs(Q,{variant:Te===t?"default":"outline",size:"sm",onClick:()=>Be(t),children:[t," (",me.filter(l=>l.eventType===t).length,")"]},t))]}),e.jsx(hs,{className:"h-[500px]",children:e.jsx("div",{className:"space-y-3",children:As.map((t,l)=>{const m=new Date(parseInt(t.timestamp)),w=t.eventType==="Roam"?"blue":t.eventType==="Associate"?"green":t.eventType==="Disassociate"?"red":t.eventType==="Authenticate"?"purple":"gray";return e.jsxs(D,{className:"relative pl-8",children:[e.jsx("div",{className:`absolute left-3 top-6 w-2 h-2 rounded-full bg-${w}-500`}),l!==As.length-1&&e.jsx("div",{className:"absolute left-3.5 top-8 w-0.5 h-full bg-border"}),e.jsx(T,{className:"pt-4 pb-4",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{variant:t.eventType==="Associate"||t.eventType==="Authenticate"?"default":t.eventType==="Disassociate"?"destructive":"secondary",children:t.eventType}),e.jsx("span",{className:"text-xs text-muted-foreground",children:m.toLocaleString()})]}),t.details&&e.jsx("p",{className:"text-sm text-foreground mb-2",children:t.details}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[t.apName&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"AP: "}),e.jsx("span",{className:"font-medium",children:t.apName})]}),t.ssid&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SSID: "}),e.jsx("span",{className:"font-medium",children:t.ssid})]}),t.ipAddress&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"IP: "}),e.jsx("span",{className:"font-mono font-medium",children:t.ipAddress})]}),t.level&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Level: "}),e.jsx("span",{className:"font-medium",children:t.level})]})]})]})})})]},t.id||l)})})})]})})]})}),e.jsx(Gs,{isOpen:Ss,onClose:()=>Ge(!1),title:`Clients on ${ls}`,description:`${Ts().length} client(s) connected to this service`,width:"xl",children:e.jsx("div",{className:"space-y-2",children:Ts().length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ke,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No clients found for this service"})]}):Ts().map((t,l)=>e.jsx(D,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{g(t),Ge(!1),F(!0)},children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.vendorIcon&&e.jsx("div",{className:"text-2xl",children:t.vendorIcon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.hostName||t.macAddress}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.macAddress}),t.ipAddress&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.ipAddress})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.rssi!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(os,{className:`h-4 w-4 ${t.rssi>=-50?"text-green-600":t.rssi>=-60?"text-blue-600":t.rssi>=-70?"text-yellow-600":"text-red-600"}`}),e.jsxs("span",{className:"text-muted-foreground",children:[t.rssi," dBm"]})]}),t.authenticated!==!1&&e.jsxs(P,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),"Authenticated"]})]})]})})},t.macAddress||l))})})]})}const wr=d.memo(ir);export{wr as DashboardEnhanced};
