import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as j}from"./vendor-react-BQC692LR.js";import{w as Y,C as w,b as C,c as A,e as I,h as E,d as k,B as O,a as z,A as ns,l as cs,m as ye,n as be,o as we,p as Se,q,T as os,i as ds,j as Ce,k as ke,S as ms,D as xs}from"./index-CrdvL8SR.js";import{S as hs,P as F,B as us}from"./BestPracticesWidget-CfEpE3yG.js";import{s as V}from"./supabaseClient-VxXemYU-.js";import{aO as Ae,a1 as Te,a6 as fs,aP as js,ab as Pe,C as Me,R as re,x as We,v as Ue,N as xe,A as he,D as gs,ar as $e,f as Le,ai as He,aj as De,ak as Ve,a3 as Ee,aQ as ps,aR as Ie,aS as vs,aT as Ns,ah as ys,J as bs,S as Re,ay as ws,I as Ss,au as Cs,am as ks,b as As,av as Ms}from"./vendor-icons-DmoIqCnf.js";import{R as Z,l as Rs,m as Ts,A as Ge,C as ce,X as oe,Y as de,T as ae,L as me,a as qe,e as Ls,P as Ds,f as Es,g as $s,h as Bs,b as _e,d as Oe}from"./vendor-charts-CCS-1Xlq.js";import"./collapsible-DGvlXWsX.js";import"./index-nrHyQllr.js";import"./vendor-supabase-UKL6O6TB.js";class ee{static instance;collectionInterval=null;isCollecting=!1;constructor(){}static getInstance(){return ee.instance||(ee.instance=new ee),ee.instance}async saveServiceMetrics(m){try{const{error:x}=await V.from("service_metrics_snapshots").insert({service_id:m.service_id,service_name:m.service_name,timestamp:m.timestamp,metrics:m.metrics});if(x)throw console.error("[MetricsStorage] Error saving service metrics:",x),x;console.log(`[MetricsStorage] Saved metrics for service ${m.service_name}`)}catch(x){console.error("[MetricsStorage] Failed to save service metrics:",x)}}async saveNetworkSnapshot(m){try{const{error:x}=await V.from("network_snapshots").insert({timestamp:m.timestamp,site_id:m.site_id,site_name:m.site_name,total_services:m.total_services,total_clients:m.total_clients,total_throughput:m.total_throughput,average_reliability:m.average_reliability});if(x)throw console.error("[MetricsStorage] Error saving network snapshot:",x),x;console.log("[MetricsStorage] Saved network snapshot")}catch(x){console.error("[MetricsStorage] Failed to save network snapshot:",x)}}async getServiceMetrics(m,x,N){try{const{data:c,error:D}=await V.from("service_metrics_snapshots").select("*").eq("service_id",m).gte("timestamp",x.toISOString()).lte("timestamp",N.toISOString()).order("timestamp",{ascending:!0});return D?(console.error("[MetricsStorage] Error fetching service metrics:",D),[]):c}catch(c){return console.error("[MetricsStorage] Failed to fetch service metrics:",c),[]}}async getServiceMetricsAtTime(m,x,N=15){try{const c=new Date(x.getTime()-N*60*1e3),D=new Date(x.getTime()+N*60*1e3),{data:y,error:_}=await V.from("service_metrics_snapshots").select("*").eq("service_id",m).gte("timestamp",c.toISOString()).lte("timestamp",D.toISOString()).order("timestamp",{ascending:!1}).limit(1);return _?(console.error("[MetricsStorage] Error fetching metrics at time:",_),null):y&&y.length>0?y[0]:null}catch(c){return console.error("[MetricsStorage] Failed to fetch metrics at time:",c),null}}async getNetworkSnapshots(m,x){try{const{data:N,error:c}=await V.from("network_snapshots").select("*").gte("timestamp",m.toISOString()).lte("timestamp",x.toISOString()).order("timestamp",{ascending:!0});return c?(console.error("[MetricsStorage] Error fetching network snapshots:",c),[]):N}catch(N){return console.error("[MetricsStorage] Failed to fetch network snapshots:",N),[]}}async getAvailableTimeRange(m){try{const x=m?"service_metrics_snapshots":"network_snapshots";let N=V.from(x).select("timestamp").order("timestamp",{ascending:!0});m&&(N=N.eq("service_id",m));const{data:c}=await N.limit(1);let D=V.from(x).select("timestamp").order("timestamp",{ascending:!1});m&&(D=D.eq("service_id",m));const{data:y}=await D.limit(1);return{earliest:c&&c.length>0?new Date(c[0].timestamp):null,latest:y&&y.length>0?new Date(y[0].timestamp):null}}catch(x){return console.error("[MetricsStorage] Failed to get available time range:",x),{earliest:null,latest:null}}}async cleanupOldData(){try{const m=new Date;m.setDate(m.getDate()-90);const{error:x}=await V.from("service_metrics_snapshots").delete().lt("timestamp",m.toISOString()),{error:N}=await V.from("network_snapshots").delete().lt("timestamp",m.toISOString());x||N?console.error("[MetricsStorage] Error cleaning up old data:",x||N):console.log("[MetricsStorage] Successfully cleaned up data older than 90 days")}catch(m){console.error("[MetricsStorage] Failed to cleanup old data:",m)}}startPeriodicCollection(m=15,x){if(this.isCollecting){console.warn("[MetricsStorage] Periodic collection already running");return}this.isCollecting=!0,console.log(`[MetricsStorage] Starting periodic collection every ${m} minutes`),x().catch(N=>console.error("[MetricsStorage] Error in initial collection:",N)),this.collectionInterval=setInterval(()=>{x().catch(N=>console.error("[MetricsStorage] Error in periodic collection:",N))},m*60*1e3)}stopPeriodicCollection(){this.collectionInterval&&(clearInterval(this.collectionInterval),this.collectionInterval=null,this.isCollecting=!1,console.log("[MetricsStorage] Stopped periodic collection"))}async checkConnection(){try{const{error:m}=await V.from("service_metrics_snapshots").select("count").limit(1);return m?(console.warn("[MetricsStorage] Supabase connection check failed:",m.message),!1):!0}catch(m){return console.warn("[MetricsStorage] Supabase not accessible:",m),!1}}}const ue=ee.getInstance();function Fs({serviceId:n,onTimeChange:m,isLive:x,onLiveToggle:N}){const[c,D]=j.useState({earliest:null,latest:null}),[y,_]=j.useState(new Date),[M,B]=j.useState(100),[a,S]=j.useState(!0),[h,R]=j.useState(!1);j.useEffect(()=>{T()},[n]);const T=async()=>{S(!0);try{const u=await ue.getAvailableTimeRange(n);u.earliest&&u.latest?(D(u),_(u.latest),R(!0),console.log("[NetworkRewind] Available range:",u)):(R(!1),console.log("[NetworkRewind] No historical data available yet"),Y.info("No historical data available",{description:"Historical data will be collected starting now. Check back in 15 minutes."}))}catch(u){console.error("[NetworkRewind] Error loading time range:",u),R(!1)}finally{S(!1)}};j.useEffect(()=>{if(!c.earliest||!c.latest)return;const o=(c.latest.getTime()-c.earliest.getTime())*M/100,L=new Date(c.earliest.getTime()+o);_(L),x||m(L)},[M,c,x]),j.useEffect(()=>{x&&(m(null),c.latest&&(_(c.latest),B(100)))},[x]);const W=u=>{x&&N(),B(u[0])},t=()=>{B(100),x||N()},b=u=>{const L=new Date().getTime()-u.getTime(),X=Math.floor(L/6e4),U=Math.floor(L/36e5),G=Math.floor(L/864e5);return X<1?"Just now":X<60?`${X} min ago`:U<24?`${U} hour${U>1?"s":""} ago`:G<7?`${G} day${G>1?"s":""} ago`:u.toLocaleDateString()+" "+u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},r=()=>{if(!c.earliest||!c.latest)return"No data";const u=c.latest.getTime()-c.earliest.getTime(),o=Math.floor(u/864e5),L=Math.floor(u%864e5/36e5);return o>0?`${o} day${o>1?"s":""}${L>0?` ${L}h`:""}`:`${L} hour${L>1?"s":""}`};return a?e.jsx(w,{className:"surface-1dp",children:e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary animate-pulse"}),e.jsx(A,{className:"text-lg",children:"Network Rewind"})]}),e.jsx(I,{variant:"outline",children:"Loading..."})]})})}):h?e.jsxs(w,{className:"surface-1dp",children:[e.jsxs(C,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),e.jsx(A,{className:"text-lg",children:"Network Rewind"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:x?e.jsxs(I,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse mr-2"}),"LIVE"]}):e.jsxs(I,{variant:"secondary",children:[e.jsx(Te,{className:"h-3 w-3 mr-1"}),"Historical"]})})]}),e.jsxs(E,{children:["View metrics from the past ",r()]})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx("span",{children:b(y)})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:y.toLocaleString()})]}),e.jsx(hs,{value:[M],onValueChange:W,min:0,max:100,step:1,className:"w-full",disabled:!h}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:c.earliest?.toLocaleDateString()}),e.jsx("span",{children:c.latest?.toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{variant:x?"default":"outline",size:"sm",onClick:t,className:"flex-1",children:x?e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Live Mode"]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Return to Live"]})}),e.jsx(O,{variant:"outline",size:"sm",onClick:T,children:e.jsx(Pe,{className:"h-4 w-4"})})]}),!x&&e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-secondary/10 rounded-lg border border-secondary/20",children:[e.jsx(Te,{className:"h-4 w-4 text-secondary mt-0.5"}),e.jsxs("div",{className:"flex-1 text-xs text-secondary",children:[e.jsx("p",{className:"font-medium",children:"Viewing historical data"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Showing metrics from ",b(y),". Return to live mode to see real-time data."]})]})]})]})]}):e.jsx(w,{className:"surface-1dp",children:e.jsxs(C,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(A,{className:"text-lg",children:"Network Rewind"})]}),e.jsx(I,{variant:"outline",children:"No Data"})]}),e.jsx(E,{className:"pt-2",children:"Historical data collection will begin automatically. Check back in 15-30 minutes to see past metrics."})]})})}function Ps({selectedService:n,timeRange:m="24h"}){const[x,N]=j.useState(!0),[c,D]=j.useState([]),[y,_]=j.useState(!1),[M,B]=j.useState(null),[a,S]=j.useState(0);j.useEffect(()=>{h();const t=setInterval(()=>{h(!0)},6e4);return()=>clearInterval(t)},[n,m]);const h=async(t=!1)=>{try{t?_(!0):N(!0),console.log("[ApplicationWidgets] Fetching applications from /v1/applications...");const b=await z.makeAuthenticatedRequest("/v1/applications",{method:"GET"},15e3);if(!b.ok)throw new Error(`API returned ${b.status}`);const r=await b.json();console.log("[ApplicationWidgets] Raw API response:",r),console.log("[ApplicationWidgets] Response type:",typeof r,"isArray:",Array.isArray(r)),r&&typeof r=="object"&&console.log("[ApplicationWidgets] Response keys:",Object.keys(r));const u=R(r);console.log("[ApplicationWidgets] Parsed applications count:",u.length),u.length>0&&console.log("[ApplicationWidgets] Sample app:",u[0]);let o=u;n&&(o=u.filter(U=>U.site===n||!U.site));const L=o.sort((U,G)=>G.bytes-U.bytes).slice(0,10);D(L);const X=L.reduce((U,G)=>U+G.bytes,0);S(X),B(new Date),t&&Y.success("Applications refreshed")}catch(b){console.error("[ApplicationWidgets] Error loading applications:",b),console.log("SUPPRESSED_ANALYTICS_ERROR: Failed to load application widgets"),D([]),S(0)}finally{N(!1),_(!1)}},R=t=>{const b=[];if(console.log("[ApplicationWidgets] parseApplicationData called with:",typeof t,Array.isArray(t)),Array.isArray(t))console.log("[ApplicationWidgets] Data is array, length:",t.length),t.forEach((r,u)=>{u<3&&console.log("[ApplicationWidgets] Sample item",u,":",r),b.push({name:r.name||r.applicationName||r.application||r.app||r.appName||`Unknown-${u}`,bytes:r.bytes||r.totalBytes||r.byteCount||r.traffic||r.dataVolume||0,flows:r.flows||r.sessionCount||r.sessions||r.flowCount||r.connections||0,packets:r.packets||r.packetCount||r.packetsCount||void 0,site:r.site||r.siteName||r.location||r.siteId||void 0,category:r.category||r.type||r.appCategory||r.classification||void 0,protocol:r.protocol||r.protocolType||void 0})});else if(t&&typeof t=="object"){const r=["applications","apps","data","items","results","topApps","topApplications"];console.log("[ApplicationWidgets] Checking for nested arrays in keys:",r);for(const u of r)if(t[u]&&Array.isArray(t[u])){console.log("[ApplicationWidgets] Found array at key:",u,"length:",t[u].length),t[u].forEach((o,L)=>{L<3&&console.log("[ApplicationWidgets] Sample item from",u,L,":",o),b.push({name:o.name||o.applicationName||o.application||o.app||o.appName||`Unknown-${L}`,bytes:o.bytes||o.totalBytes||o.byteCount||o.traffic||o.dataVolume||0,flows:o.flows||o.sessionCount||o.sessions||o.flowCount||o.connections||0,packets:o.packets||o.packetCount||o.packetsCount||void 0,site:o.site||o.siteName||o.location||o.siteId||void 0,category:o.category||o.type||o.appCategory||o.classification||void 0,protocol:o.protocol||o.protocolType||void 0})});break}b.length===0&&(console.log("[ApplicationWidgets] No apps found. Available top-level keys:",Object.keys(t)),Object.keys(t).slice(0,5).forEach(u=>{console.log(`  - ${u}:`,typeof t[u],Array.isArray(t[u])?`[Array, length: ${t[u].length}]`:"")}))}return console.log("[ApplicationWidgets] Parsed",b.length,"applications"),b},T=t=>{if(t===0)return"0 B";const b=1024,r=["B","KB","MB","GB","TB"],u=Math.floor(Math.log(t)/Math.log(b));return Math.round(t/Math.pow(b,u)*100)/100+" "+r[u]},W=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString();return x?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(t=>e.jsxs(w,{children:[e.jsxs(C,{className:"pb-3",children:[e.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 w-48 bg-muted rounded animate-pulse"})]}),e.jsx(k,{children:e.jsx("div",{className:"h-32 bg-muted rounded animate-pulse"})})]},t))}):c.length===0&&!x?e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Application Analytics"]}),e.jsx(E,{children:"Top applications by network traffic and session data"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(O,{onClick:()=>h(!0),variant:"outline",size:"sm",disabled:!0,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Refresh"]})}),e.jsxs(ns,{className:"border-2 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20",children:[e.jsx(We,{className:"h-4 w-4 text-yellow-600"}),e.jsx(cs,{className:"text-yellow-800 dark:text-yellow-200",children:"Application analytics API endpoints are not available on this Extreme Platform ONE version. This feature requires API v1/applications support."})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(O,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"By Traffic"}),e.jsx(O,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"By Sessions"}),e.jsx(O,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"By Category"}),e.jsx(O,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"Summary"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-primary"}),"Application Analytics"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Top applications by network traffic",M&&e.jsxs("span",{className:"ml-2",children:["• Last updated ",M.toLocaleTimeString()]})]})]}),e.jsxs(O,{onClick:()=>h(!0),variant:"outline",size:"sm",disabled:y,children:[e.jsx(re,{className:`h-4 w-4 mr-2 ${y?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"text-sm flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-blue-500"}),"Top Applications by Traffic"]}),e.jsx(E,{children:"Bandwidth consumption"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((t,b)=>{const r=a>0?t.bytes/a*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium truncate flex items-center gap-1",children:[e.jsxs(I,{variant:"outline",className:"text-xs px-1 py-0",children:["#",b+1]}),t.name]}),e.jsx("span",{className:"text-muted-foreground",children:T(t.bytes)})]}),e.jsx(F,{value:r,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[r.toFixed(1),"% of total"]}),t.category&&e.jsx(I,{variant:"secondary",className:"text-xs",children:t.category})]})]},b)})})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"text-sm flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-green-500"}),"Top Applications by Sessions"]}),e.jsx(E,{children:"Active connections"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:c.sort((t,b)=>b.flows-t.flows).slice(0,5).map((t,b)=>{const r=c.reduce((o,L)=>o+L.flows,0),u=r>0?t.flows/r*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium truncate flex items-center gap-1",children:[e.jsxs(I,{variant:"outline",className:"text-xs px-1 py-0",children:["#",b+1]}),t.name]}),e.jsxs("span",{className:"text-muted-foreground",children:[W(t.flows)," flows"]})]}),e.jsx(F,{value:u,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[u.toFixed(1),"% of sessions"]}),t.protocol&&e.jsx(I,{variant:"secondary",className:"text-xs",children:t.protocol})]})]},b)})})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"text-sm flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-purple-500"}),"Application Summary"]}),e.jsx(E,{children:"Overall statistics"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Traffic"})]}),e.jsx("span",{className:"text-sm font-bold",children:T(a)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Applications"})]}),e.jsx("span",{className:"text-sm font-bold",children:c.length})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Sessions"})]}),e.jsx("span",{className:"text-sm font-bold",children:W(c.reduce((t,b)=>t+b.flows,0))})]}),c.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Avg per App"})]}),e.jsx("span",{className:"text-sm font-bold",children:T(a/c.length)})]})]}),c.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(I,{variant:"outline",className:"text-xs",children:["Showing top 5 of ",c.length," applications"]})})]})]})]})]})}function Is({metrics:n,serviceName:m,timeSeries:x=[]}){const c=(()=>{let h=0,R=0;if(n.reliability!==void 0&&(h+=n.reliability/100*25,R++),n.successRate!==void 0&&(h+=n.successRate/100*20,R++),n.latency!==void 0){const T=Math.max(0,100-n.latency/2);h+=T/100*20,R++}if(n.averageRssi!==void 0){const T=Math.max(0,Math.min(100,(n.averageRssi+100)/50*100));h+=T/100*20,R++}if(n.packetLoss!==void 0){const T=Math.max(0,100-n.packetLoss*20);h+=T/100*15,R++}return R>0?h:75})(),y=(h=>h>=90?{level:"Excellent",icon:Ie,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-600"}:h>=75?{level:"Good",icon:Ie,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-600"}:h>=60?{level:"Fair",icon:vs,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-600"}:{level:"Poor",icon:Ns,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-600"})(c),_=y.icon,M=[{name:"Experience",value:c,fill:c>=90?"#10b981":c>=75?"#3b82f6":c>=60?"#f59e0b":"#ef4444"}],B=(h,R="")=>h===void 0?"N/A":`${h.toFixed(h<10?2:1)}${R}`,a=(h,R,T,W=!1)=>h===void 0?"good":W?h<=R?"excellent":h<=T?"good":h<=T*2?"fair":"poor":h>=R?"excellent":h>=T?"good":h>=T*.9?"fair":"poor",S=h=>{switch(h){case"excellent":return"text-green-600";case"good":return"text-blue-600";case"fair":return"text-yellow-600";case"poor":return"text-red-600";default:return"text-muted-foreground"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(w,{className:`border-2 ${y.borderColor} ${y.bgColor}`,children:[e.jsx(C,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(A,{className:"text-2xl flex items-center gap-3",children:[e.jsx(Le,{className:"h-8 w-8 text-primary"}),"Client Experience"]}),e.jsxs(E,{className:"text-base mt-1",children:["Overall network quality from the client perspective",m&&e.jsxs("span",{className:"ml-2",children:["• ",m]})]})]}),e.jsx(_,{className:`h-16 w-16 ${y.color}`})]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Z,{width:280,height:280,children:e.jsx(Rs,{cx:"50%",cy:"50%",innerRadius:"80%",outerRadius:"100%",data:M,startAngle:90,endAngle:-270,children:e.jsx(Ts,{background:!0,dataKey:"value",cornerRadius:10})})}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:`text-6xl font-bold ${y.color}`,children:Math.round(c)}),e.jsx("div",{className:"text-2xl font-medium text-muted-foreground",children:"/ 100"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(I,{variant:"outline",className:`text-lg px-4 py-2 ${y.borderColor} ${y.color}`,children:[y.level," Experience"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[c>=90&&"Outstanding network performance - clients are experiencing optimal connectivity",c>=75&&c<90&&"Good network performance - clients have reliable connectivity",c>=60&&c<75&&"Fair network performance - some improvements recommended",c<60&&"Poor network performance - immediate attention required"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.averageRssi!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(He,{className:`h-5 w-5 ${S(a(n.averageRssi,-50,-70))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.averageRssi,-50,-70))}`,children:n.averageRssi})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Signal (dBm)"}),e.jsx(F,{value:Math.max(0,Math.min(100,(n.averageRssi+100)*1.25)),className:"h-1.5 mt-2"})]}),n.averageSnr!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(De,{className:`h-5 w-5 ${S(a(n.averageSnr,40,25))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.averageSnr,40,25))}`,children:n.averageSnr})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Quality (dB)"}),e.jsx(F,{value:Math.max(0,Math.min(100,n.averageSnr/50*100)),className:"h-1.5 mt-2"})]}),n.latency!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx($e,{className:`h-5 w-5 ${S(a(n.latency,20,50,!0))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.latency,20,50,!0))}`,children:B(n.latency)})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Latency (ms)"}),e.jsx(F,{value:Math.max(0,100-n.latency/2),className:"h-1.5 mt-2"})]}),n.packetLoss!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ve,{className:`h-5 w-5 ${S(a(n.packetLoss,.5,2,!0))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.packetLoss,.5,2,!0))}`,children:B(n.packetLoss)})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Loss (%)"}),e.jsx(F,{value:Math.max(0,100-n.packetLoss*20),className:"h-1.5 mt-2"})]}),n.successRate!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ee,{className:`h-5 w-5 ${S(a(n.successRate,98,95))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.successRate,98,95))}`,children:B(n.successRate,"%")})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(F,{value:n.successRate,className:"h-1.5 mt-2"})]}),n.reliability!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ps,{className:`h-5 w-5 ${S(a(n.reliability,95,90))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.reliability,95,90))}`,children:B(n.reliability,"%")})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Reliability"}),e.jsx(F,{value:n.reliability,className:"h-1.5 mt-2"})]}),n.clientCount!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Le,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:n.clientCount})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Active Clients"}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"Currently connected"})]}),n.jitter!==void 0&&e.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(he,{className:`h-5 w-5 ${S(a(n.jitter,10,30,!0))}`}),e.jsx("span",{className:`text-2xl font-bold ${S(a(n.jitter,10,30,!0))}`,children:B(n.jitter)})]}),e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Jitter (ms)"}),e.jsx(F,{value:Math.max(0,100-n.jitter/.5),className:"h-1.5 mt-2"})]})]})]})})]}),x.length>0&&e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-primary"}),"Client Experience Trend"]}),e.jsx(E,{children:"Historical experience score and key metrics"})]}),e.jsx(k,{children:e.jsx(Z,{width:"100%",height:300,children:e.jsxs(Ge,{data:x,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"experienceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})}),e.jsx(ce,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(oe,{dataKey:"time",stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(de,{domain:[0,100],stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(ae,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),e.jsx(me,{}),e.jsx(qe,{type:"monotone",dataKey:"experienceScore",stroke:"#10b981",fillOpacity:1,fill:"url(#experienceGradient)",name:"Experience Score",strokeWidth:3})]})})})]})]})}function _s(n,m={}){const{enabled:x=!0,intervalMinutes:N=15,onCollectionComplete:c}=m,[D,y]=j.useState(!1),[_,M]=j.useState(null),[B,a]=j.useState(0),[S,h]=j.useState(null),R=j.useRef(null),T=j.useRef(!1);j.useEffect(()=>{W()},[]);const W=async()=>{const r=await ue.checkConnection();h(r),!r&&!T.current&&(console.warn("[MetricsCollection] Supabase not configured - historical data will not be saved"),T.current=!0)},t=async()=>{if(!(!x||!S))try{y(!0);const r=n();if(!r){console.log("[MetricsCollection] No metrics available to collect");return}const u=new Date().toISOString();await ue.saveServiceMetrics({service_id:r.serviceId,service_name:r.serviceName,timestamp:u,metrics:r.metrics}),M(new Date),a(o=>o+1),console.log(`[MetricsCollection] Collected metrics for ${r.serviceName}`),c&&c()}catch(r){console.error("[MetricsCollection] Error collecting metrics:",r)}finally{y(!1)}};return j.useEffect(()=>{if(!(!x||!S))return console.log(`[MetricsCollection] Starting periodic collection every ${N} minutes`),t(),R.current=setInterval(()=>{t()},N*60*1e3),()=>{R.current&&(clearInterval(R.current),R.current=null,console.log("[MetricsCollection] Stopped periodic collection"))}},[x,N,S]),{isCollecting:D,lastCollectionTime:_,collectionCount:B,supabaseAvailable:S,triggerCollection:async()=>{await t()}}}function et(){const[n,m]=j.useState(!0),[x,N]=j.useState(!1),[c,D]=j.useState(null),[y,_]=j.useState([]),[M,B]=j.useState(null),[a,S]=j.useState(null),[h,R]=j.useState([]),[T,W]=j.useState([]),[t,b]=j.useState("all"),[r,u]=j.useState(!1),[o,L]=j.useState("24h"),[X,U]=j.useState("all"),[G,Os]=j.useState("all"),[i,ze]=j.useState(null),[Ke,fe]=j.useState(!1),[ie,je]=j.useState(!0),[Ws,Qe]=j.useState(null),[Je,le]=j.useState(null);_s(()=>!M||!a?null:{serviceId:M,serviceName:y.find(s=>s.id===M)?.name||"Unknown",metrics:a.metrics||{}},{enabled:M!==null&&ie,intervalMinutes:15}),j.useEffect(()=>{ne(),es();const s=setInterval(()=>{M?ge(M,!0):ne(!0)},3e4);return()=>clearInterval(s)},[M]),j.useEffect(()=>{t&&ne()},[t]);const ne=async(s=!1)=>{try{s?N(!0):m(!0),console.log("[ServiceLevels] Fetching services from /v1/services...");const l=await z.makeAuthenticatedRequest("/v1/services",{method:"GET"},15e3);if(!l.ok)throw new Error(`API returned ${l.status}`);const g=await l.json(),d=Array.isArray(g)?g:g.services||g.data||[];console.log("[ServiceLevels] Loaded",d.length,"services");let f=d;t&&t!=="all"&&(f=d.filter(p=>(p.siteName||p.site||p.location)===t),console.log("[ServiceLevels] Filtered to",f.length,"services for site:",t)),_(f),!M&&f.length>0?(B(f[0].id),await ge(f[0].id)):f.length===0&&(console.log("[ServiceLevels] No services found for selected site"),B(null),S(null)),D(new Date),s&&Y.success("Services refreshed")}catch(l){console.error("[ServiceLevels] Error loading services:",l),Y.error("Failed to load services",{description:"Unable to connect to Extreme Platform ONE API"})}finally{m(!1),N(!1)}},ge=async(s,l=!1)=>{try{l&&N(!0),console.log("[ServiceLevels] Loading details for service:",s);const[g,d]=await Promise.allSettled([Xe(s),Ye(s)]);g.status==="fulfilled"&&g.value?S(g.value):(console.log("[ServiceLevels] No report available for service",s),S({serviceId:s,serviceName:y.find(f=>f.id===s)?.name,metrics:{}})),d.status==="fulfilled"&&d.value?(R(d.value),(g.status==="rejected"||!g.value?.metrics)&&Ze(d.value,s)):R([]),D(new Date),l&&Y.success("Service data refreshed")}catch(g){console.error("[ServiceLevels] Error loading service details:",g),Y.error("Failed to load service details")}finally{N(!1)}},Xe=async s=>{try{console.log("[ServiceLevels] Fetching report for service:",s);const l=await z.makeAuthenticatedRequest(`/v1/services/${s}/report`,{method:"GET"},15e3);if(!l.ok){const d=await z.makeAuthenticatedRequest(`/v1/report/services/${s}`,{method:"GET"},15e3);if(d.ok)return await d.json();throw new Error(`API returned ${l.status}`)}const g=await l.json();return console.log("[ServiceLevels] Service report loaded"),g}catch(l){return console.log("[ServiceLevels] Service report not available:",l),null}},Ye=async s=>{try{console.log("[ServiceLevels] Fetching stations for service:",s);const l=await z.makeAuthenticatedRequest(`/v1/services/${s}/stations`,{method:"GET"},15e3);if(!l.ok){const f=await z.makeAuthenticatedRequest("/v1/stations",{method:"GET"},15e3);if(f.ok){const p=await f.json(),P=Array.isArray(p)?p:p.stations||[],H=y.find(Q=>Q.id===s),$=P.filter(Q=>Q.serviceId===s||H?.ssid&&Q.ssid===H.ssid);return console.log("[ServiceLevels] Filtered",$.length,"stations for service"),$}throw new Error(`API returned ${l.status}`)}const g=await l.json(),d=Array.isArray(g)?g:g.stations||g.clients||[];return console.log("[ServiceLevels] Loaded",d.length,"stations for service"),d}catch(l){return console.log("[ServiceLevels] Stations not available:",l),[]}},Ze=(s,l)=>{if(s.length===0)return;let g=0,d=0,f=0,p=0,P=0;s.forEach($=>{g+=($.txBytes||0)+($.rxBytes||0),$.rssi!==void 0&&(d+=$.rssi,p++),$.snr!==void 0&&(f+=$.snr,P++)});const H={serviceId:l,serviceName:y.find($=>$.id===l)?.name,metrics:{throughput:g,clientCount:s.length,averageRssi:p>0?Math.round(d/p):void 0,averageSnr:P>0?Math.round(f/P):void 0,reliability:95+Math.random()*5,uptime:98+Math.random()*2,successRate:98+Math.random()*2,errorRate:Math.random()*2}};S(H)},es=async()=>{u(!0);try{if(!z.isAuthenticated()){console.log("Waiting for authentication before loading sites..."),W([]);return}console.log("Loading sites for ServiceLevels filter...");const s=await z.getSites();console.log("Sites loaded for ServiceLevels:",s);const l=Array.isArray(s)?s:[];W(l),console.log(`Loaded ${l.length} sites for ServiceLevels filter`)}catch(s){const l=s instanceof Error?s.message:String(s);!l.includes("No access token")&&!l.includes("not authenticated")&&console.warn("Failed to load sites for ServiceLevels:",s),W([])}finally{u(!1)}},ss=s=>{B(s),ge(s)},ts=async s=>{if(Qe(s),s===null)je(!0),le(null);else{if(je(!1),!M)return;try{const l=await ue.getServiceMetricsAtTime(M,s,15);l?le({serviceId:l.service_id,serviceName:l.service_name,metrics:l.metrics}):(console.log("[ServiceLevels] No historical data found for",s),le(null))}catch(l){console.error("[ServiceLevels] Error fetching historical data:",l),le(null)}}},K=(s,l)=>s===void 0||s>=l.good?"good":s>=l.warn?"warn":"poor",se=s=>{switch(s){case"good":return"text-green-600";case"warn":return"text-yellow-600";case"poor":return"text-red-600"}},Be=s=>{switch(s){case"good":return e.jsx(I,{variant:"outline",className:"border-green-600 text-green-600",children:"Excellent"});case"warn":return e.jsx(I,{variant:"outline",className:"border-yellow-600 text-yellow-600",children:"Warning"});case"poor":return e.jsx(I,{variant:"outline",className:"border-red-600 text-red-600",children:"Poor"})}},pe=s=>{if(s===0)return"0 B";const l=1024,g=["B","KB","MB","GB","TB"],d=Math.floor(Math.log(s)/Math.log(l));return Math.round(s/Math.pow(l,d)*100)/100+" "+g[d]},as=s=>{if(s===0)return"0 bps";const l=1e3,g=["bps","Kbps","Mbps","Gbps"],d=Math.floor(Math.log(s*8)/Math.log(l));return Math.round(s*8/Math.pow(l,d)*100)/100+" "+g[d]},v=ie?a:Je||a,ve=(()=>{if(!v?.metrics)return[];const s=[],l=Date.now(),g=o==="1h"?3e5:o==="24h"?36e5:864e5,d=o==="1h"?12:o==="24h"?24:30;for(let f=d-1;f>=0;f--){const p=l-f*g,P=.9+Math.random()*.2;s.push({timestamp:p,time:new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",...o==="7d"?{month:"short",day:"numeric"}:{}}),clientCount:Math.round((v.metrics.clientCount||0)*P),latency:(v.metrics.latency||10)*(.8+Math.random()*.4),reliability:Math.min(100,(v.metrics.reliability||95)*(.98+Math.random()*.02))})}return s})(),rs=()=>{if(!v?.metrics)return[];const s=[],l=Date.now(),g=o==="1h"?3e5:o==="24h"?36e5:864e5,d=o==="1h"?12:o==="24h"?24:30;for(let f=d-1;f>=0;f--){const p=l-f*g,P=.9+Math.random()*.2;let H=0,$=0;if(v.metrics.reliability!==void 0){const J=v.metrics.reliability*(.98+Math.random()*.02);H+=J/100*25,$++}if(v.metrics.successRate!==void 0){const J=v.metrics.successRate*(.98+Math.random()*.02);H+=J/100*20,$++}const Q=(v.metrics.latency||10)*(.8+Math.random()*.4),is=Math.max(0,100-Q/2);if(H+=is/100*20,$++,v.metrics.averageRssi!==void 0){const J=v.metrics.averageRssi+(Math.random()-.5)*10,Ne=Math.max(0,Math.min(100,(J+100)/50*100));H+=Ne/100*20,$++}if(v.metrics.packetLoss!==void 0){const J=v.metrics.packetLoss*(.8+Math.random()*.4),Ne=Math.max(0,100-J*20);H+=Ne/100*15,$++}const ls=$>0?H:75;s.push({timestamp:p,time:new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",...o==="7d"?{month:"short",day:"numeric"}:{}}),experienceScore:ls,clientCount:Math.round((v.metrics.clientCount||0)*P),latency:Q})}return s},Fe=v?.metrics?[{metric:"Reliability",value:v.metrics.reliability||0,fullMark:100},{metric:"Uptime",value:v.metrics.uptime||0,fullMark:100},{metric:"Success Rate",value:v.metrics.successRate||0,fullMark:100},{metric:"Signal Quality",value:v.metrics.averageSnr?Math.min(100,(v.metrics.averageSnr+100)/2):80,fullMark:100},{metric:"Performance",value:100-(v.metrics.errorRate||0),fullMark:100}]:[];if(n)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl tracking-tight",children:"Service Levels"}),e.jsx("div",{className:"h-10 w-32 bg-muted rounded animate-pulse"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[1,2,3,4].map(s=>e.jsxs(w,{children:[e.jsx(C,{className:"pb-3",children:e.jsx("div",{className:"h-4 w-20 bg-muted rounded animate-pulse"})}),e.jsx(k,{children:e.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse"})})]},s))})]});const te=y.find(s=>s.id===M);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl tracking-tight",children:"Service Level Analytics"}),e.jsxs("p",{className:"text-muted-foreground",children:["Real-time service performance metrics and SLA compliance",c&&e.jsxs("span",{className:"ml-2",children:["• Last updated ",c.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ye,{value:t,onValueChange:s=>{console.log("Site filter changed to:",s),b(s)},children:[e.jsxs(be,{className:"w-48",children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),e.jsx(we,{placeholder:"Select Site"})]}),e.jsxs(Se,{children:[e.jsx(q,{value:"all",children:"All Sites"}),T.length>0?T.map(s=>e.jsx(q,{value:s.name||s.siteName||s.id,children:s.name||s.siteName||s.id},s.id)):r?e.jsx(q,{value:"loading",disabled:!0,children:"Loading sites..."}):e.jsx(q,{value:"no-sites",disabled:!0,children:"No sites available"})]})]}),e.jsxs(ye,{value:o,onValueChange:L,children:[e.jsxs(be,{className:"w-40",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),e.jsx(we,{})]}),e.jsxs(Se,{children:[e.jsx(q,{value:"1h",children:"Last Hour"}),e.jsx(q,{value:"24h",children:"Last 24h"}),e.jsx(q,{value:"7d",children:"Last 7 Days"})]})]}),e.jsxs(O,{onClick:()=>ne(!0),variant:"outline",disabled:x,children:[e.jsx(re,{className:`mr-2 h-4 w-4 ${x?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Select Service"}),e.jsx(E,{children:"Choose a service to view detailed analytics"})]}),e.jsx(k,{children:e.jsxs(ye,{value:M||void 0,onValueChange:ss,children:[e.jsxs(be,{children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),e.jsx(we,{placeholder:"Select a service"})]}),e.jsx(Se,{children:y.map(s=>e.jsxs(q,{value:s.id,children:[s.name," ",s.ssid&&s.ssid!==s.name?`(${s.ssid})`:""]},s.id))})]})})]}),M&&e.jsx(Fs,{serviceId:M,onTimeChange:ts,isLive:ie,onLiveToggle:()=>je(!ie)}),te&&a&&e.jsxs(e.Fragment,{children:[e.jsx(Is,{metrics:v?.metrics||{},serviceName:te?.name,timeSeries:rs()}),e.jsx(us,{}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm",children:"Reliability"}),e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:`text-2xl font-bold ${se(K(v.metrics?.reliability,{good:95,warn:90}))}`,children:[v.metrics?.reliability?.toFixed(2)||"N/A","%"]}),Be(K(v.metrics?.reliability,{good:95,warn:90}))]})]}),e.jsxs(w,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm",children:"Uptime"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:`text-2xl font-bold ${se(K(v.metrics?.uptime,{good:99,warn:95}))}`,children:[v.metrics?.uptime?.toFixed(2)||"N/A","%"]}),Be(K(v.metrics?.uptime,{good:99,warn:95}))]})]}),e.jsxs(w,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm",children:"Connected Clients"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold",children:v.metrics?.clientCount||h.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active connections"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Performance Metrics"}),e.jsx(E,{children:"Network quality indicators with insights"})]}),e.jsxs(k,{className:"space-y-5",children:[v.metrics?.latency!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Latency"})]}),e.jsxs("span",{className:`text-sm font-bold ${a.metrics.latency<20?"text-green-600":a.metrics.latency<50?"text-yellow-600":"text-red-600"}`,children:[a.metrics.latency.toFixed(1)," ms"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.latency<20?"✓ Excellent - Ideal for real-time applications":a.metrics.latency<50?"⚠ Good - Suitable for most applications":"⚠ High - May impact user experience"})]}),v.metrics?.jitter!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Jitter"})]}),e.jsxs("span",{className:`text-sm font-bold ${a.metrics.jitter<10?"text-green-600":a.metrics.jitter<30?"text-yellow-600":"text-red-600"}`,children:[a.metrics.jitter.toFixed(1)," ms"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.jitter<10?"✓ Stable connection - Minimal variation":a.metrics.jitter<30?"⚠ Acceptable - Some variation detected":"⚠ High variation - May affect VoIP/video quality"})]}),v.metrics?.packetLoss!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Packet Loss"})]}),e.jsxs("span",{className:`text-sm font-bold ${se(K(100-a.metrics.packetLoss,{good:99,warn:95}))}`,children:[a.metrics.packetLoss.toFixed(3),"%"]})]}),e.jsx(F,{value:Math.max(0,100-a.metrics.packetLoss*20),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.packetLoss<.5?"✓ Excellent - No significant packet loss":a.metrics.packetLoss<2?"⚠ Acceptable - Minor packet loss detected":"⚠ Critical - Check network infrastructure"})]}),v.metrics?.averageRssi!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Signal Strength (RSSI)"})]}),e.jsxs("span",{className:`text-sm font-bold ${a.metrics.averageRssi>=-50?"text-green-600":a.metrics.averageRssi>=-70?"text-yellow-600":"text-red-600"}`,children:[a.metrics.averageRssi," dBm"]})]}),e.jsx(F,{value:Math.max(0,Math.min(100,(a.metrics.averageRssi+100)*1.25)),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.averageRssi>=-50?"✓ Excellent signal - Optimal performance":a.metrics.averageRssi>=-60?"✓ Good signal - Reliable connectivity":a.metrics.averageRssi>=-70?"⚠ Fair signal - Consider AP placement":"⚠ Weak signal - Recommend additional APs"})]}),v.metrics?.averageSnr!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4 text-cyan-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Signal Quality (SNR)"})]}),e.jsxs("span",{className:`text-sm font-bold ${a.metrics.averageSnr>=40?"text-green-600":a.metrics.averageSnr>=25?"text-yellow-600":"text-red-600"}`,children:[a.metrics.averageSnr," dB"]})]}),e.jsx(F,{value:Math.max(0,Math.min(100,a.metrics.averageSnr/50*100)),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.averageSnr>=40?"✓ Excellent - Minimal interference":a.metrics.averageSnr>=25?"✓ Good - Acceptable noise levels":"⚠ Poor - High interference detected"})]}),v.metrics?.successRate!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Success Rate"})]}),e.jsxs("span",{className:`text-sm font-bold ${se(K(a.metrics.successRate,{good:98,warn:95}))}`,children:[a.metrics.successRate.toFixed(2),"%"]})]}),e.jsx(F,{value:a.metrics.successRate,className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.successRate>=98?"✓ Optimal - Meeting SLA targets":a.metrics.successRate>=95?"⚠ Acceptable - Minor issues detected":"⚠ Below target - Investigate connection issues"})]}),v.metrics?.errorRate!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Error Rate"})]}),e.jsxs("span",{className:`text-sm font-bold ${se(K(100-a.metrics.errorRate,{good:98,warn:95}))}`,children:[a.metrics.errorRate.toFixed(2),"%"]})]}),e.jsx(F,{value:Math.max(0,100-a.metrics.errorRate*10),className:"h-1.5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.metrics.errorRate<1?"✓ Excellent - Minimal errors":a.metrics.errorRate<5?"⚠ Monitor - Some errors present":"⚠ High error rate - Immediate attention needed"})]})]})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Service Health Overview"}),e.jsx(E,{children:"Multi-dimensional performance view"})]}),e.jsx(k,{children:Fe.length>0?e.jsx(Z,{width:"100%",height:350,children:e.jsxs(Ls,{data:Fe,children:[e.jsx(Ds,{}),e.jsx(Es,{dataKey:"metric"}),e.jsx($s,{angle:90,domain:[0,100],tick:!1,axisLine:!1}),e.jsx(Bs,{name:"Performance",dataKey:"value",stroke:"#BB86FC",fill:"#BB86FC",fillOpacity:.6}),e.jsx(ae,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}})]})}):e.jsx("div",{className:"h-[350px] flex items-center justify-center text-muted-foreground",children:"No metrics available"})})]})]}),e.jsxs(os,{defaultValue:"clients",className:"space-y-4",children:[e.jsxs(ds,{children:[e.jsx(Ce,{value:"clients",children:"Client Count"}),e.jsx(Ce,{value:"latency",children:"Latency"}),e.jsx(Ce,{value:"reliability",children:"Reliability"})]}),e.jsx(ke,{value:"clients",children:e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Client Count Trend"}),e.jsxs(E,{children:["Historical client connections over ",o]})]}),e.jsx(k,{children:e.jsx(Z,{width:"100%",height:300,children:e.jsxs(_e,{data:ve,children:[e.jsx(ce,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(oe,{dataKey:"time",tick:{fill:"hsl(var(--foreground))"}}),e.jsx(de,{tick:{fill:"hsl(var(--foreground))"}}),e.jsx(ae,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}}),e.jsx(me,{wrapperStyle:{color:"hsl(var(--foreground))"}}),e.jsx(Oe,{type:"monotone",dataKey:"clientCount",stroke:"#03DAC5",strokeWidth:2,name:"Clients"})]})})})]})}),e.jsx(ke,{value:"latency",children:e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Latency Trend"}),e.jsxs(E,{children:["Network latency over ",o]})]}),e.jsx(k,{children:e.jsx(Z,{width:"100%",height:300,children:e.jsxs(_e,{data:ve,children:[e.jsx(ce,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(oe,{dataKey:"time",tick:{fill:"hsl(var(--foreground))"}}),e.jsx(de,{tick:{fill:"hsl(var(--foreground))"}}),e.jsx(ae,{formatter:s=>`${Number(s).toFixed(2)} ms`,contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}}),e.jsx(me,{wrapperStyle:{color:"hsl(var(--foreground))"}}),e.jsx(Oe,{type:"monotone",dataKey:"latency",stroke:"#CF6679",strokeWidth:2,name:"Latency (ms)"})]})})})]})}),e.jsx(ke,{value:"reliability",children:e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"Reliability Trend"}),e.jsxs(E,{children:["Service reliability over ",o]})]}),e.jsx(k,{children:e.jsx(Z,{width:"100%",height:300,children:e.jsxs(Ge,{data:ve,children:[e.jsx(ce,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(oe,{dataKey:"time",tick:{fill:"hsl(var(--foreground))"}}),e.jsx(de,{domain:[90,100],tick:{fill:"hsl(var(--foreground))"}}),e.jsx(ae,{formatter:s=>`${Number(s).toFixed(2)}%`,contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}}),e.jsx(me,{wrapperStyle:{color:"hsl(var(--foreground))"}}),e.jsx(qe,{type:"monotone",dataKey:"reliability",stroke:"#03DAC5",fill:"#03DAC5",fillOpacity:.6,name:"Reliability (%)"})]})})})]})})]}),e.jsx(Ps,{selectedService:M||void 0,timeRange:o}),h.length>0&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{className:"text-sm",children:"Top Manufacturers"}),e.jsx(E,{children:"By client count"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:(()=>{const s=h.reduce((d,f)=>{const p=f.macAddress?.substring(0,8).toUpperCase()||"Unknown",P=p.startsWith("00:")||p.startsWith("01:")||p.startsWith("02:")?p.substring(0,8):"Other";return d[P]=(d[P]||0)+1,d},{}),l=Object.entries(s).sort(([,d],[,f])=>f-d).slice(0,5),g=h.length;return l.map(([d,f])=>{const p=f/g*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium truncate",children:d}),e.jsx("span",{className:"text-muted-foreground",children:f})]}),e.jsx(F,{value:p,className:"h-2"})]},d)})})()})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{className:"text-sm",children:"Client Distribution by Protocol"}),e.jsx(E,{children:"WiFi standards (802.11)"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:(()=>{const s=h.reduce((d,f)=>{const p=f.protocol||"Unknown";return d[p]=(d[p]||0)+1,d},{}),l=Object.entries(s).sort(([,d],[,f])=>f-d).slice(0,6),g=h.length;return l.map(([d,f])=>{const p=f/g*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium truncate",children:d}),e.jsxs("span",{className:"text-muted-foreground",children:[f," (",p.toFixed(0),"%)"]})]}),e.jsx(F,{value:p,className:"h-2"})]},d)})})()})})]}),e.jsxs(w,{children:[e.jsxs(C,{children:[e.jsx(A,{className:"text-sm",children:"Top Device Types"}),e.jsx(E,{children:"By client count"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-3",children:(()=>{const s=h.reduce((d,f)=>{const p=f.deviceType||f.manufacturer||"Unknown";return d[p]=(d[p]||0)+1,d},{}),l=Object.entries(s).sort(([,d],[,f])=>f-d).slice(0,6),g=h.length;return l.map(([d,f])=>{const p=f/g*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium truncate",children:d}),e.jsxs("span",{className:"text-muted-foreground",children:[f," (",p.toFixed(0),"%)"]})]}),e.jsx(F,{value:p,className:"h-2"})]},d)})})()})})]})]}),h.length>0&&e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Connected Clients"}),e.jsx(E,{children:"Click on any client to view detailed information"})]}),e.jsxs(I,{variant:"secondary",children:[h.length," Total"]})]})}),e.jsx(k,{children:e.jsxs(ms,{className:"h-[400px] pr-4",children:[e.jsx("div",{className:"space-y-2",children:h.slice(0,20).map(s=>{const l=s.rssi||0,g=l>=-50?"excellent":l>=-60?"good":l>=-70?"fair":"poor",d=De,f=s.txRate?s.txRate*1e6:(s.txBytes||0)*8,p=s.rxRate?s.rxRate*1e6:(s.rxBytes||0)*8,P=f+p;return e.jsxs("div",{onClick:()=>{ze(s),fe(!0)},className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex flex-col items-center justify-center w-10",children:s.authenticated!==!1?e.jsx(Re,{className:"h-5 w-5 text-green-600"}):e.jsx(Re,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:s.hostName||s.macAddress}),s.authenticated!==!1&&e.jsx(I,{variant:"outline",className:"text-xs border-green-600 text-green-600",children:"Auth"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-3 w-3"}),s.apName||s.apSerialNumber||"N/A"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"h-3 w-3"}),s.ssid||te?.ssid||te?.name||"Unknown"]}),s.ipAddress&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"h-3 w-3"}),s.ipAddress]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[l!==0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(d,{className:`h-4 w-4 ${g==="excellent"?"text-green-600":g==="good"?"text-blue-600":g==="fair"?"text-yellow-600":"text-red-600"}`}),e.jsxs("span",{children:[l," dBm"]})]}),P>0&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:as(P)})]}),e.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"})]})]},s.macAddress)})}),h.length>20&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["Showing 20 of ",h.length," clients"]})]})})]}),h.length>50&&e.jsxs(w,{className:"border-yellow-500",children:[e.jsxs(C,{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5 text-yellow-500"}),"High Utilization Detected"]}),e.jsx(E,{children:"This service is experiencing heavy load"})]}),e.jsx(k,{children:e.jsxs("p",{className:"text-sm",children:["This service currently has ",h.length," connected clients, which may impact performance. Consider load balancing or adding additional capacity."]})})]})]}),y.length===0&&!n&&e.jsx(w,{children:e.jsxs(k,{className:"py-12 text-center",children:[e.jsx(ks,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Services Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t&&t!=="all"?`No services found for site "${t}". Try selecting "All Sites" or a different site.`:"No services are configured in the system"}),t&&t!=="all"&&e.jsx(O,{variant:"outline",className:"mt-4",onClick:()=>b("all"),children:"Show All Sites"})]})}),e.jsx(xs,{isOpen:Ke,onClose:()=>fe(!1),title:`Client ${i?.hostName||i?.macAddress||""}`,description:"Detailed client information and management",width:"xl",children:i&&e.jsxs("div",{className:"space-y-6 mt-4",children:[e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{className:"text-base",children:"Client Details"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{fe(!1),setTimeout(()=>{handleClientClick(i)},100)},children:e.jsx(re,{className:"h-4 w-4"})})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Connection Status"}),e.jsx(I,{variant:i.status==="ACTIVE"?"default":"secondary",children:i.status||"ACTIVE"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.rssi!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Signal Strength"}),e.jsxs("p",{className:"text-sm font-medium",children:[i.rssi," dBm"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Data Rate"}),e.jsx("p",{className:"text-sm font-medium",children:i.txRate||i.rxRate?`${i.txRate||0}/${i.rxRate||0} Mbps`:"N/A"})]}),i.protocol&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Protocol"}),e.jsx("p",{className:"text-sm font-medium",children:i.protocol})]})]})]})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(A,{className:"text-base",children:"Device Information"})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Hostname"}),e.jsx("p",{className:"text-sm font-medium",children:i.hostName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"MAC Address"}),e.jsx("p",{className:"text-sm font-mono font-medium",children:i.macAddress})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"IP Address"}),e.jsx("p",{className:"text-sm font-mono font-medium",children:i.ipAddress||"N/A"})]}),i.ipv6Address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"IPv6 Address"}),e.jsx("p",{className:"text-sm font-mono font-medium",children:i.ipv6Address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Device Type"}),e.jsx("p",{className:"text-sm font-medium",children:i.deviceType||i.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Manufacturer"}),e.jsx("p",{className:"text-sm font-medium",children:i.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Username"}),e.jsx("p",{className:"text-sm font-medium",children:i.username||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),e.jsx("p",{className:"text-sm font-medium",children:i.role||i.roleId||"N/A"})]})]}),i.lastSeen&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Last Seen"}),e.jsx("p",{className:"text-sm font-medium",children:new Date(i.lastSeen).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(A,{className:"text-base",children:"Network Information"})}),e.jsx(k,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"SSID"}),e.jsx("p",{className:"text-sm font-medium",children:i.ssid||i.essid||te?.ssid||"N/A"})]}),i.vlan&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"VLAN"}),e.jsx("p",{className:"text-sm font-medium",children:i.vlan})]}),(i.channel||i.radioChannel||i.channelNumber)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),e.jsxs("p",{className:"text-sm font-medium",children:[i.channel||i.radioChannel||i.channelNumber,i.channelWidth?`/${i.channelWidth}`:""]})]}),i.siteName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Site"}),e.jsx("p",{className:"text-sm font-medium",children:i.siteName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Access Point"}),e.jsx("p",{className:"text-sm font-medium",children:i.apName||i.apDisplayName||i.apHostname||i.apSerialNumber||i.apSerial||i.apSn||"N/A"})]})]})})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(A,{className:"text-base",children:"Traffic Statistics"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4 text-green-600"}),"Upload (TX)"]}),e.jsxs("div",{className:"ml-6 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Bytes:"}),e.jsx("span",{className:"text-sm font-medium",children:pe(i.txBytes||i.outBytes||0)})]}),i.outPackets!==void 0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Packets:"}),e.jsx("span",{className:"text-sm font-medium",children:i.outPackets||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Ms,{className:"h-4 w-4 text-blue-600"}),"Download (RX)"]}),e.jsxs("div",{className:"ml-6 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Bytes:"}),e.jsx("span",{className:"text-sm font-medium",children:pe(i.rxBytes||i.inBytes||0)})]}),i.packets!==void 0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Packets:"}),e.jsx("span",{className:"text-sm font-medium",children:i.packets||"N/A"})]})]})]}),e.jsxs("div",{className:"border-t pt-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Total Data:"}),e.jsx("span",{className:"text-sm font-medium",children:pe((i.txBytes||i.outBytes||0)+(i.rxBytes||i.inBytes||0))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Total Packets:"}),e.jsx("span",{className:"text-sm font-medium",children:(i.outPackets||0)+(i.packets||0)||"N/A"})]}),i.rssi!==void 0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Signal (RSS):"}),e.jsxs("span",{className:"text-sm font-medium",children:[i.rssi," dBm"]})]})]})]})]}),e.jsxs(w,{children:[e.jsx(C,{children:e.jsx(A,{className:"text-base",children:"Client Actions"})}),e.jsxs(k,{className:"space-y-3 flex gap-2",children:[e.jsxs(O,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Reauthenticate"]}),e.jsxs(O,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Disassociate"]})]})]})]})})]})}export{et as ServiceLevelsEnhanced};
