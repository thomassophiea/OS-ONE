import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as i}from"./vendor-react-BQC692LR.js";import{a as C,w as o,t as _,A as xe,l as he,T as He,i as qe,j as Q,k as Y,C as z,b as O,c as V,h as te,d as T,B as P,L as p,I as M,m as L,n as U,o as $,p as H,q as j,e as N,S as ds}from"./index-CrdvL8SR.js";import{T as ee,a as se,b as g,c as d,d as ae,e as l}from"./table-BR47Ry2r.js";import{ai as Ne,J as pe,aP as We,ar as Oe,M as os,W as Ve,C as ms,a3 as us,b as Re,R as Ge,N as Xe,ay as xs,n as hs,ac as ps,X as js,b8 as fs,a0 as vs,al as $e,b9 as gs}from"./vendor-icons-DmoIqCnf.js";import{ApiTestTool as Ns}from"./ApiTestTool-BvMyl68F.js";import{C as ys}from"./checkbox-DKtTTixp.js";import"./vendor-charts-CCS-1Xlq.js";import"./textarea-PnFczYiL.js";const bs=()=>({unii5:{20:30,40:27,80:24,160:21},unii6:{20:24,40:21,80:18,160:15},unii7:{20:30,40:27,80:24,160:21},unii8:{20:30,40:27,80:24,160:21}});function Cs(){const[t,u]=i.useState([]),[c,h]=i.useState(null),[y,k]=i.useState(!0),[w,R]=i.useState(!1),[D,G]=i.useState("plans"),[x,X]=i.useState(""),[S,je]=i.useState(""),[I,fe]=i.useState([]),[E,ye]=i.useState(10),[re,ve]=i.useState("United States"),[le,be]=i.useState(37.7749),[B,Ce]=i.useState(-122.4194),[v,we]=i.useState("160");i.useEffect(()=>{ne()},[]);const ne=async()=>{k(!0);try{const[a]=await Promise.allSettled([C.getSites()]);a.status==="fulfilled"&&fe(a.value);const f=await C.getAFCPlans();u(Array.isArray(f)?f:[])}catch(a){console.error("Failed to load AFC data:",a),o.error("Failed to load AFC planning data")}finally{k(!1)}},Pe=async()=>{if(!x.trim()||!S){o.error("Please enter plan name and select a site");return}try{const a=I.find(f=>f.id===S);await C.createAFCPlan({name:x,siteId:S,siteName:a?.name||"Unknown Site",height:E,country:re,latitude:le,longitude:B}),o.success("AFC plan created"),X(""),je(""),await ne()}catch(a){console.error("Failed to create plan:",a),o.error("Failed to create plan")}},de=async a=>{R(!0),h({...a,status:"analyzing"});try{o.info("Running AFC analysis...");const f=await C.runAFCAnalysis(a.id);u(t.map(A=>A.id===a.id?f:A)),h(f),G("results"),o.success("AFC analysis completed")}catch(f){console.error("AFC analysis failed:",f),o.error("Analysis failed"),h({...a,status:"failed"}),u(t.map(A=>A.id===a.id?{...A,status:"failed"}:A))}finally{R(!1)}},Se=async a=>{if(!a.channelPlan&&!a.powerPlan){o.error("No recommendations available");return}try{if(o.info("Applying channel and power recommendations..."),(await C.makeAuthenticatedRequest(`/v1/afc/plans/${a.id}/apply`,{method:"POST"})).ok)o.success("AFC plan applied successfully");else throw new Error("Failed to apply plan")}catch(f){console.error("Failed to apply AFC plan:",f),o.error("Failed to apply plan")}},oe=a=>{switch(a){case"draft":return e.jsx(N,{variant:"secondary",children:"Draft"});case"analyzing":return e.jsx(N,{variant:"default",children:"Analyzing..."});case"completed":return e.jsx(N,{variant:"default",className:"bg-green-500",children:"Completed"});case"failed":return e.jsx(N,{variant:"destructive",children:"Failed"});default:return e.jsx(N,{variant:"secondary",children:a})}};return y?e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx(_,{className:"h-8 w-64"}),e.jsx(_,{className:"h-48 w-full"})]}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Ne,{className:"h-6 w-6"}),"AFC Planning Tool"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Automated Frequency Coordination - Optimize channel and power settings",e.jsxs(xe,{className:"border-blue-500 bg-blue-50 dark:bg-blue-950",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsxs(he,{children:[e.jsx("strong",{children:"Important Context:"})," AFC (Automated Frequency Coordination) planning in 6GHz spectrum requires registration with an AFC service provider. The recommendations generated here are based on current AP deployments and RF environment analysis. Actual frequency assignments and power levels must comply with AFC service provider approvals and regulatory requirements. Always verify that planned changes align with your AFC registration and local regulations before implementation."]})]})]})]}),e.jsxs(He,{value:D,onValueChange:G,children:[e.jsxs(qe,{children:[e.jsx(Q,{value:"plans",children:"Plans"}),e.jsx(Q,{value:"create",children:"Create Plan"}),c&&e.jsx(Q,{value:"results",children:"Results"})]}),e.jsx(Y,{value:"plans",className:"space-y-4",children:e.jsxs(z,{children:[e.jsxs(O,{children:[e.jsx(V,{children:"AFC Plans"}),e.jsx(te,{children:"Manage and execute RF optimization plans"})]}),e.jsx(T,{children:t.length===0?e.jsxs(xe,{children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(he,{children:"No AFC plans created yet. Create a new plan to get started."})]}):e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Site"}),e.jsx(d,{children:"APs"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Last Run"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(ae,{children:t.map(a=>e.jsxs(g,{children:[e.jsx(l,{className:"font-medium",children:a.name}),e.jsx(l,{children:a.siteName}),e.jsx(l,{children:a.apCount}),e.jsx(l,{children:oe(a.status)}),e.jsx(l,{children:a.lastRun?new Date(a.lastRun).toLocaleString():"Never"}),e.jsx(l,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{size:"sm",onClick:()=>de(a),disabled:w||a.status==="analyzing",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),a.status==="analyzing"?"Analyzing...":"Run"]}),a.status==="completed"&&e.jsx(P,{size:"sm",variant:"outline",onClick:()=>{h(a),G("results")},children:"View Results"})]})})]},a.id))})]})})]})}),e.jsx(Y,{value:"create",className:"space-y-4",children:e.jsxs(z,{children:[e.jsxs(O,{children:[e.jsx(V,{children:"Create AFC Plan"}),e.jsx(te,{children:"Configure a new RF optimization plan with AFC parameters"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Plan Name"}),e.jsx(M,{value:x,onChange:a=>X(a.target.value),placeholder:"e.g., AFC Report"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Site"}),e.jsxs(L,{value:S,onValueChange:je,children:[e.jsx(U,{children:e.jsx($,{placeholder:"Select site"})}),e.jsx(H,{children:I.map(a=>e.jsx(j,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Height (meters)"}),e.jsx(M,{type:"number",value:E,onChange:a=>ye(Number(a.target.value)),placeholder:"10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Country"}),e.jsxs(L,{value:re,onValueChange:ve,children:[e.jsx(U,{children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(j,{value:"United States",children:"United States"}),e.jsx(j,{value:"Canada",children:"Canada"}),e.jsx(j,{value:"United Kingdom",children:"United Kingdom"}),e.jsx(j,{value:"Germany",children:"Germany"}),e.jsx(j,{value:"France",children:"France"}),e.jsx(j,{value:"Japan",children:"Japan"}),e.jsx(j,{value:"Australia",children:"Australia"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Latitude"}),e.jsx(M,{type:"number",step:"0.0001",value:le,onChange:a=>be(Number(a.target.value)),placeholder:"37.7749"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Longitude"}),e.jsx(M,{type:"number",step:"0.0001",value:B,onChange:a=>Ce(Number(a.target.value)),placeholder:"-122.4194"})]})]}),e.jsx(P,{onClick:Pe,className:"w-full",children:"Create AFC Plan"})]})]})}),c&&e.jsx(Y,{value:"results",className:"space-y-4",children:e.jsxs(z,{children:[e.jsxs(O,{children:[e.jsxs(V,{children:[c.name," - Results"]}),e.jsxs(te,{children:["Analysis completed: ",c.lastRun?new Date(c.lastRun).toLocaleString():"N/A"]})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Height"}),e.jsxs("p",{className:"text-sm font-semibold",children:[c.height||10," meters"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Country"}),e.jsx("p",{className:"text-sm font-semibold",children:c.country||"United States"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Latitude"}),e.jsx("p",{className:"text-sm font-semibold",children:c.latitude?.toFixed(4)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Longitude"}),e.jsx("p",{className:"text-sm font-semibold",children:c.longitude?.toFixed(4)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Channel Width"}),e.jsxs(L,{value:v,onValueChange:a=>we(a),children:[e.jsx(U,{className:"w-[200px]",children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(j,{value:"20",children:"20 MHz"}),e.jsx(j,{value:"40",children:"40 MHz"}),e.jsx(j,{value:"80",children:"80 MHz"}),e.jsx(j,{value:"160",children:"160 MHz"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Maximum Allowed Power by U-NII Band"]}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{children:"U-NII Band"}),e.jsx(d,{children:"Frequency Range"}),e.jsx(d,{children:"20 MHz"}),e.jsx(d,{children:"40 MHz"}),e.jsx(d,{children:"80 MHz"}),e.jsx(d,{children:"160 MHz"})]})}),e.jsx(ae,{children:(()=>{const a=c.afcPowerLimits||bs();return e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(l,{className:"font-semibold",children:"U-NII-5"}),e.jsx(l,{className:"text-xs",children:"5925-6425 MHz"}),e.jsxs(l,{className:v==="20"?"font-bold text-primary":"",children:[a.unii5[20]," dBm"]}),e.jsxs(l,{className:v==="40"?"font-bold text-primary":"",children:[a.unii5[40]," dBm"]}),e.jsxs(l,{className:v==="80"?"font-bold text-primary":"",children:[a.unii5[80]," dBm"]}),e.jsxs(l,{className:v==="160"?"font-bold text-primary":"",children:[a.unii5[160]," dBm"]})]}),e.jsxs(g,{children:[e.jsx(l,{className:"font-semibold",children:"U-NII-6"}),e.jsx(l,{className:"text-xs",children:"6425-6525 MHz"}),e.jsxs(l,{className:v==="20"?"font-bold text-primary":"",children:[a.unii6[20]," dBm"]}),e.jsxs(l,{className:v==="40"?"font-bold text-primary":"",children:[a.unii6[40]," dBm"]}),e.jsxs(l,{className:v==="80"?"font-bold text-primary":"",children:[a.unii6[80]," dBm"]}),e.jsxs(l,{className:v==="160"?"font-bold text-primary":"",children:[a.unii6[160]," dBm"]})]}),e.jsxs(g,{children:[e.jsx(l,{className:"font-semibold",children:"U-NII-7"}),e.jsx(l,{className:"text-xs",children:"6525-6875 MHz"}),e.jsxs(l,{className:v==="20"?"font-bold text-primary":"",children:[a.unii7[20]," dBm"]}),e.jsxs(l,{className:v==="40"?"font-bold text-primary":"",children:[a.unii7[40]," dBm"]}),e.jsxs(l,{className:v==="80"?"font-bold text-primary":"",children:[a.unii7[80]," dBm"]}),e.jsxs(l,{className:v==="160"?"font-bold text-primary":"",children:[a.unii7[160]," dBm"]})]}),e.jsxs(g,{children:[e.jsx(l,{className:"font-semibold",children:"U-NII-8"}),e.jsx(l,{className:"text-xs",children:"6875-7125 MHz"}),e.jsxs(l,{className:v==="20"?"font-bold text-primary":"",children:[a.unii8[20]," dBm"]}),e.jsxs(l,{className:v==="40"?"font-bold text-primary":"",children:[a.unii8[40]," dBm"]}),e.jsxs(l,{className:v==="80"?"font-bold text-primary":"",children:[a.unii8[80]," dBm"]}),e.jsxs(l,{className:v==="160"?"font-bold text-primary":"",children:[a.unii8[160]," dBm"]})]})]})})()})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Note: Power values shown are maximum EIRP limits. Actual transmit power may be restricted by AFC service based on location and environment."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(z,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Interference Score"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[c.interferenceScore||0,"%"]})]})})}),e.jsx(z,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coverage Score"}),e.jsxs("p",{className:"text-3xl font-bold text-green-500",children:[c.coverageScore||0,"%"]})]})})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4"}),"AP Coverage Map"]}),e.jsxs(z,{className:"p-4 bg-muted/30",children:[e.jsxs("div",{className:"relative w-full h-[400px] bg-slate-100 dark:bg-slate-900 rounded-lg border-2 border-dashed border-border overflow-hidden",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 800 400",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.1"})})}),e.jsx("rect",{width:"800",height:"400",fill:"url(#grid)"}),e.jsx("circle",{cx:"400",cy:"200",r:"8",fill:"#3b82f6",stroke:"white",strokeWidth:"2"}),e.jsx("text",{x:"400",y:"220",textAnchor:"middle",fontSize:"12",fill:"currentColor",opacity:"0.7",children:"Site Location"}),c.channelPlan&&c.channelPlan.slice(0,8).map((a,f)=>{const A=f/Math.min(c.channelPlan.length,8)*2*Math.PI,me=80+f%3*40,J=400+me*Math.cos(A),K=200+me*Math.sin(A);return e.jsxs("g",{children:[e.jsx("circle",{cx:J,cy:K,r:"30",fill:"#22c55e",opacity:"0.2"}),e.jsx("circle",{cx:J,cy:K,r:"20",fill:"#22c55e",opacity:"0.3"}),e.jsx("circle",{cx:J,cy:K,r:"6",fill:"#22c55e",stroke:"white",strokeWidth:"2"}),e.jsx("text",{x:J,y:K+25,textAnchor:"middle",fontSize:"10",fill:"currentColor",opacity:"0.8",children:a.apName.substring(0,8)})]},f)})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-background/90 backdrop-blur-sm p-3 rounded-lg border text-xs space-y-1",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Legend"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"Site Center"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"Access Point"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500 opacity-20"}),e.jsx("span",{children:"Coverage Area"})]})]}),e.jsx("div",{className:"absolute top-4 right-4 bg-background/90 backdrop-blur-sm p-2 rounded-lg border text-xs",children:e.jsxs("div",{className:"font-mono",children:[c.latitude?.toFixed(4)||"0.0000","°, ",c.longitude?.toFixed(4)||"0.0000","°"]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Geographic visualization of AP placements and coverage areas. Actual deployment should be verified with AFC service provider."})]})]}),c.channelPlan&&c.channelPlan.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Channel Recommendations"]}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{children:"AP Name"}),e.jsx(d,{children:"Radio"}),e.jsx(d,{children:"Current Channel"}),e.jsx(d,{children:"Recommended"}),e.jsx(d,{children:"Interference"}),e.jsx(d,{children:"Neighbors"})]})}),e.jsx(ae,{children:c.channelPlan.map((a,f)=>e.jsxs(g,{children:[e.jsx(l,{children:a.apName}),e.jsx(l,{children:a.radioIndex}),e.jsx(l,{children:a.currentChannel}),e.jsx(l,{className:"font-semibold text-primary",children:a.recommendedChannel}),e.jsx(l,{children:e.jsxs(N,{variant:a.interference>50?"destructive":"secondary",children:[a.interference,"%"]})}),e.jsx(l,{children:a.neighbors})]},f))})]})]}),c.powerPlan&&c.powerPlan.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4"}),"Power Recommendations"]}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{children:"AP Name"}),e.jsx(d,{children:"Radio"}),e.jsx(d,{children:"Current Power (dBm)"}),e.jsx(d,{children:"Recommended (dBm)"}),e.jsx(d,{children:"Coverage"})]})}),e.jsx(ae,{children:c.powerPlan.map((a,f)=>e.jsxs(g,{children:[e.jsx(l,{children:a.apName}),e.jsx(l,{children:a.radioIndex}),e.jsx(l,{children:a.currentPower}),e.jsx(l,{className:"font-semibold text-primary",children:a.recommendedPower}),e.jsx(l,{children:e.jsxs(N,{variant:a.coverage>90?"default":"secondary",children:[a.coverage,"%"]})})]},f))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:()=>Se(c),className:"flex-1",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Apply Recommendations"]}),e.jsxs(P,{variant:"outline",onClick:()=>{},children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})]})})]})]})}function ws(){const[t,u]=i.useState([]),[c,h]=i.useState(!0),[y,k]=i.useState(null),[w,R]=i.useState(!1);i.useEffect(()=>{D()},[]);const D=async()=>{h(!0),k(null);try{const x=await C.makeAuthenticatedRequest("/v3/rfmgmt",{method:"GET"});if(x.ok){const X=await x.json(),S=Array.isArray(X)?X:[];u(S)}else if(x.status===404)k("RF Management API not available on this Extreme Platform ONE version"),u([]);else throw new Error("Failed to load RF profiles")}catch(x){k(x instanceof Error?x.message:"Failed to load RF profiles"),u([])}finally{h(!1)}},G=async()=>{R(!0),await D(),R(!1),o.success("RF profiles refreshed")};return e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Ne,{className:"h-8 w-8"}),"RF Management Tools"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage RF profiles, Smart RF settings, and wireless optimization"})]}),e.jsxs(P,{onClick:G,disabled:w,variant:"outline",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),y&&e.jsxs(xe,{className:"border-yellow-500",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(he,{children:y})]}),e.jsxs(z,{children:[e.jsxs(O,{children:[e.jsx(V,{children:"RF Management Profiles"}),e.jsx(te,{children:"Configure RF settings, Smart RF optimization, and radio parameters"})]}),e.jsx(T,{children:c?e.jsx("div",{className:"space-y-2",children:[1,2,3].map(x=>e.jsx(_,{className:"h-12 w-full"},x))}):t.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ne,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No RF profiles found"})]}):e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{children:"Profile Name"}),e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Smart RF"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(ae,{children:t.map(x=>e.jsxs(g,{children:[e.jsx(l,{className:"font-medium",children:x.name}),e.jsx(l,{children:e.jsx(N,{variant:"outline",children:x.type})}),e.jsx(l,{children:x.smartRf&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["Sensitivity: ",x.smartRf.basic.sensitivity]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[x.smartRf.basic.coverageHoleRecovery&&e.jsx(N,{variant:"secondary",className:"text-xs",children:"Coverage"}),x.smartRf.basic.interferenceRecovery&&e.jsx(N,{variant:"secondary",className:"text-xs",children:"Interference"})]})]})}),e.jsx(l,{className:"text-right",children:e.jsx(P,{variant:"outline",size:"sm",disabled:!x.canEdit,children:"Edit"})})]},x.id))})]})})]})]})})}function Je(t){if(!t||typeof t!="string")return{valid:!1,error:"MAC address is required"};const c=t.trim().replace(/[:-]/g,"").toUpperCase();return c.length!==12?{valid:!1,error:"MAC address must be 12 hexadecimal characters"}:/^[0-9A-F]{12}$/.test(c)?{valid:!0}:{valid:!1,error:"MAC address must contain only hexadecimal characters (0-9, A-F)"}}function Ps(t){return t.replace(/[:-]/g,"").toUpperCase().match(/.{1,2}/g)?.join(":")||t}function Ss(t){if(!t||typeof t!="string")return{valid:!1,error:"IP address is required"};const u=t.trim(),c=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,h=u.match(c);return h?[h[1],h[2],h[3],h[4]].map(Number).find(w=>w<0||w>255)!==void 0?{valid:!1,error:"Each IPv4 octet must be between 0 and 255"}:{valid:!0}:{valid:!1,error:"Invalid IPv4 address format (expected: X.X.X.X)"}}function As(t){if(!t||typeof t!="string")return{valid:!1,error:"IP address is required"};const u=t.trim();return/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/.test(u)?u.split(":").length>8?{valid:!1,error:"IPv6 address has too many segments"}:{valid:!0}:{valid:!1,error:"Invalid IPv6 address format"}}function Ie(t){const u=Ss(t);if(u.valid)return u;const c=As(t);return c.valid?c:{valid:!1,error:"Invalid IP address format (must be valid IPv4 or IPv6)"}}function Fs(t){return typeof t!="number"||isNaN(t)?{valid:!1,error:"Duration must be a number"}:t<1?{valid:!1,error:"Duration must be at least 1 minute"}:t>60?{valid:!1,error:"Duration cannot exceed 60 minutes"}:{valid:!0}}function ks(t){return typeof t!="number"||isNaN(t)?{valid:!1,error:"Truncation size must be a number"}:t<0?{valid:!1,error:"Truncation size cannot be negative"}:t>65535?{valid:!1,error:"Truncation size cannot exceed 65535 bytes"}:t>0&&t<64?{valid:!0,error:"Warning: Truncation size below 64 bytes may lose important packet data"}:{valid:!0}}function Rs(t){if(!t.serverIp||!t.serverIp.trim())return{valid:!1,error:"SCP server IP address is required"};const u=Ie(t.serverIp);return u.valid?!t.username||!t.username.trim()?{valid:!1,error:"SCP username is required"}:!t.password||!t.password.trim()?{valid:!1,error:"SCP password is required"}:t.path&&t.path.trim()&&/[<>"|?*]/.test(t.path)?{valid:!1,error:"SCP path contains invalid characters"}:{valid:!0}:{valid:!1,error:`SCP server IP: ${u.error}`}}function Is(t){const u=Fs(t.duration);if(!u.valid)return u;const c=ks(t.truncatePackets);if(!c.valid)return c;if(t.captureLocation==="wireless"&&(!t.accessPointsAvailable||t.accessPointsAvailable===0))return{valid:!1,error:"No access points available for wireless capture"};if(t.packetDestination==="scp"){if(!t.scpConfig)return{valid:!1,error:"SCP configuration is required"};const h=Rs(t.scpConfig);if(!h.valid)return h}for(const h of t.filters)if(h.type==="mac"){const y=Je(h.value);if(!y.valid)return{valid:!1,error:`Invalid MAC filter: ${y.error}`}}else if(h.type==="ip"){const y=Ie(h.value);if(!y.valid)return{valid:!1,error:`Invalid IP filter: ${y.error}`}}return{valid:!0}}function Ms(t){const u=t.estimatedPacketsPerSecond||100,c=t.truncatePackets>0?t.truncatePackets:1500,h=t.duration*60,k=u*h*(c+24),w=Math.round(k/(1024*1024));let R;return w>1e3?R="Estimated file size exceeds 1GB. Consider reducing duration or adding filters.":w>500&&(R="Estimated file size is large. Download may take significant time."),{estimatedSizeMB:w,warning:R}}function zs(){const[t,u]=i.useState("wireless"),[c,h]=i.useState(!1),[y,k]=i.useState("all"),[w,R]=i.useState("all"),[D,G]=i.useState("both"),[x,X]=i.useState(1),[S,je]=i.useState(0),[I,fe]=i.useState([]),[E,ye]=i.useState("mac"),[re,ve]=i.useState(""),[le,be]=i.useState("all"),[B,Ce]=i.useState("file"),[v,we]=i.useState(""),[ne,Pe]=i.useState(""),[de,Se]=i.useState(""),[oe,a]=i.useState(""),[f,A]=i.useState(!0),[me,J]=i.useState(null),[K,Me]=i.useState(!1),[ze,Te]=i.useState(!1),[De,Ee]=i.useState([]),[Z,ie]=i.useState([]),[ce,Ke]=i.useState([]),[q,Be]=i.useState(null),[Ts,Ze]=i.useState(0),_e=[{value:"all",label:"All"},{value:"tcp",label:"TCP"},{value:"udp",label:"UDP"},{value:"icmp",label:"ICMP"}],Qe=[{value:"all",label:"All Radios"},{value:"radio0",label:"Radio 0 (2.4 GHz)"},{value:"radio1",label:"Radio 1 (5 GHz)"},{value:"radio2",label:"Radio 2 (6 GHz)"}];i.useEffect(()=>{let s=!1;return(async()=>{if(!s){A(!0),J(null);try{try{const r=await C.makeAuthenticatedRequest("/v1/aps/query",{method:"POST",body:JSON.stringify({})},1e4);if(!s&&r.ok){const m=await r.json(),F=Array.isArray(m)?m:m.accessPoints||m.aps||[];console.log("[PacketCapture] Loaded APs:",F.length),Ke(F.map(b=>({serialNumber:b.serialNumber||b.serial||b.id,displayName:b.displayName||b.name||b.hostname,name:b.name||b.hostname,status:b.status})))}}catch(r){console.warn("[PacketCapture] Failed to load APs:",r)}if(s||(await ue(),s))return;await ge(),s||(await C.getActivePacketCaptures()).length>0&&Le()}catch(r){console.error("[PacketCapture] Error loading data:",r),s||J(r instanceof Error?r.message:"Failed to load packet capture data")}finally{s||A(!1)}}})(),()=>{s=!0}},[]),i.useEffect(()=>()=>{q&&clearInterval(q)},[q]),i.useEffect(()=>{if(Z.length>0){const s=setInterval(()=>{Ze(n=>n+1)},1e3);return()=>clearInterval(s)}},[Z.length]);const Le=()=>{q&&clearInterval(q);const s=setInterval(async()=>{await ge(),await ue()},3e3);Be(s)},Ae=()=>{q&&(clearInterval(q),Be(null))},ue=async()=>{try{const s=await C.getPacketCaptureFiles();Ee(s.map((n,r)=>({id:n.id||`file-${r}`,filename:n.filename||n.name||`capture-${r}.pcap`,size:n.size||0,date:n.date||n.created||new Date(n.timestamp||Date.now()).toISOString(),timestamp:n.timestamp||Date.now(),status:n.status})))}catch(s){console.warn("[PacketCapture] Failed to load capture files:",s)}},ge=async()=>{try{const n=(await C.getActivePacketCaptures()).map((r,m)=>({id:r.id||r.captureId||r.sessionId||`capture-${m}`,location:r.location||r.captureType||r.interface||"unknown",direction:r.direction||"both",duration:r.duration||0,startTime:r.startTime||r.start||Date.now(),filters:r.filters||[],status:r.status||"running"}));ie(n),n.length===0&&q&&Ae()}catch(s){console.warn("[PacketCapture] Failed to load active captures:",s)}},Ye=async()=>{Me(!0);try{await Promise.all([ue(),ge()]),o.success("Packet capture data refreshed")}catch{o.error("Failed to refresh data")}finally{Me(!1)}},Ue=()=>{if(!re.trim()){o.error("Please enter a filter value");return}const s=re.trim();if(E==="mac"){const r=Je(s);if(!r.valid){o.error(`Invalid MAC address: ${r.error}`);return}}else if(E==="ip"){const r=Ie(s);if(!r.valid){o.error(`Invalid IP address: ${r.error}`);return}}const n={id:`filter-${Date.now()}`,type:E,value:E==="mac"?Ps(s):s};fe([...I,n]),ve(""),o.success("Filter added")},es=s=>{fe(I.filter(n=>n.id!==s))},ss=async()=>{const s=Is({captureLocation:t,accessPointsAvailable:ce.length,duration:x,truncatePackets:S,packetDestination:B,scpConfig:B==="scp"?{serverIp:v,username:ne,password:de,path:oe}:void 0,filters:I});if(!s.valid){o.error(s.error||"Invalid configuration");return}const n=Ms({duration:x,truncatePackets:S});n.warning?o.warning(n.warning):n.estimatedSizeMB>50&&o.info(`Estimated file size: ~${n.estimatedSizeMB}MB`),Te(!0);try{const m={captureType:t==="appliance"?"DATA_PORT":t==="wired"?"WIRED":"WIRELESS",duration:x,truncation:S>0?S:void 0,destination:B.toUpperCase()};t==="wireless"&&(w!=="all"?m.apSerialNumber=w:ce.length>0&&(m.apSerialNumber=ce[0].serialNumber,o.info(`Using AP: ${ce[0].displayName||ce[0].serialNumber}`)),y!=="all"&&(m.radio=y)),t==="wired"&&(m.includeWiredClients=c),D!=="both"&&(m.direction=D.toUpperCase()),le!=="all"&&(m.protocol=le.toUpperCase());const F=I.filter(W=>W.type==="mac"),b=I.filter(W=>W.type==="ip");F.length>0&&(m.macAddress=F[0].value,F.length>1&&o.info("Only first MAC filter will be applied")),b.length>0&&(m.ipAddress=b[0].value,b.length>1&&o.info("Only first IP filter will be applied")),B==="scp"&&(m.scpConfig={serverIp:v,username:ne,password:de,path:oe}),console.log("[PacketCapture] Starting capture with config:",m);const Fe=await C.startPacketCapture(m);o.success("Packet capture started successfully");const ke={id:Fe.id||`capture-${Date.now()}`,location:t,direction:D,duration:x*60,startTime:Date.now(),filters:I.map(W=>`${W.type}:${W.value}`),status:"running"};ie([...Z,ke]),await ge(),Le()}catch(r){console.error("[PacketCapture] Error starting capture:",r);const m=r instanceof Error?r.message:"Failed to start capture";o.error(m)}finally{Te(!1)}},as=async s=>{try{ie(n=>n.map(r=>r.id===s?{...r,status:"stopping"}:r)),await C.stopPacketCapture(s),o.success("Capture stopped successfully"),ie(n=>n.filter(r=>r.id!==s)),await ue(),Z.length<=1&&Ae()}catch(n){console.error("[PacketCapture] Error stopping capture:",n);const r=n instanceof Error?n.message:"Failed to stop capture";o.error(r),ie(m=>m.map(F=>F.id===s?{...F,status:"running"}:F))}},ts=async()=>{try{await C.stopPacketCapture(void 0,!0),o.success("All captures stopped successfully"),ie([]),Ae(),await ue()}catch(s){console.error("[PacketCapture] Error stopping all captures:",s);const n=s instanceof Error?s.message:"Failed to stop all captures";o.error(n)}},rs=async s=>{try{o.info("Preparing download...");const n=await C.downloadPacketCaptureFile(s.id,s.filename),r=window.URL.createObjectURL(n),m=document.createElement("a");m.href=r,m.download=s.filename,document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(r),document.body.removeChild(m),o.success("Download started")}catch(n){console.error("[PacketCapture] Error downloading file:",n);const r=n instanceof Error?n.message:"Failed to download file";o.error(r)}},ls=async s=>{try{await C.deletePacketCaptureFile(s.id,s.filename),Ee(n=>n.filter(r=>r.id!==s.id)),o.success("File deleted successfully")}catch(n){console.error("[PacketCapture] Error deleting file:",n);const r=n instanceof Error?n.message:"Failed to delete file";o.error(r)}},ns=s=>{if(s===0)return"0 B";const n=1024,r=["B","KB","MB","GB"],m=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,m)).toFixed(2))+" "+r[m]},is=s=>{try{return new Date(s).toLocaleString()}catch{return s}};return f?e.jsx("div",{className:"h-full min-h-0 overflow-y-auto",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(_,{className:"h-10 w-64"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(_,{className:"h-96"}),e.jsx(_,{className:"h-96"})]}),e.jsx(_,{className:"h-64"})]})}):e.jsx("div",{className:"h-full min-h-0 overflow-y-auto",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Xe,{className:"h-8 w-8"}),"Packet Capture"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Capture and analyze network traffic for troubleshooting"})]}),e.jsxs(P,{onClick:Ye,disabled:K,variant:"outline",children:[e.jsx(Ge,{className:`h-4 w-4 mr-2 ${K?"animate-spin":""}`}),"Refresh"]})]}),me&&e.jsxs(xe,{className:"border-yellow-500",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(he,{children:me})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(z,{children:[e.jsxs(O,{children:[e.jsx(V,{children:"Capture Settings"}),e.jsx(te,{children:"Configure packet capture location, direction, and duration"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"text-sm font-medium",children:"Capture Location"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${t==="appliance"?"border-primary bg-primary/5":"hover:bg-accent"}`,onClick:()=>u("appliance"),children:[e.jsx(xs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Edge Service Data Ports"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Capture traffic on Extreme Platform ONE data ports"})]}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t==="appliance"?"border-primary bg-primary":"border-muted-foreground"}`})]}),e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${t==="wired"?"border-primary bg-primary/5":"hover:bg-accent"}`,onClick:()=>u("wired"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Wired"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Capture wired network traffic"})]}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t==="wired"?"border-primary bg-primary":"border-muted-foreground"}`})]}),t==="wired"&&e.jsxs("div",{className:"mt-3 ml-8 flex items-center gap-2",children:[e.jsx(ys,{id:"includeWiredClients",checked:c,onCheckedChange:s=>h(s===!0)}),e.jsx(p,{htmlFor:"includeWiredClients",className:"text-sm cursor-pointer",children:"Include Wired Clients"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${t==="wireless"?"border-primary bg-primary/5":"hover:bg-accent"}`,onClick:()=>u("wireless"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Wireless"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Capture wireless traffic from access points"})]}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t==="wireless"?"border-primary bg-primary":"border-muted-foreground"}`})]}),t==="wireless"&&e.jsxs("div",{className:"mt-3 ml-8 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"text-sm w-24",children:"Access Point"}),e.jsxs(L,{value:w,onValueChange:R,children:[e.jsx(U,{className:"flex-1",children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(j,{value:"all",children:"All Access Points"}),ce.map(s=>e.jsx(j,{value:s.serialNumber,children:s.displayName||s.name||s.serialNumber},s.serialNumber))]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"text-sm w-24",children:"Radio"}),e.jsxs(L,{value:y,onValueChange:k,children:[e.jsx(U,{className:"flex-1",children:e.jsx($,{})}),e.jsx(H,{children:Qe.map(s=>e.jsx(j,{value:s.value,children:s.label},s.value))})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Direction"}),e.jsxs(L,{value:D,onValueChange:s=>G(s),children:[e.jsx(U,{children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(j,{value:"both",children:"Both (Ingress & Egress)"}),e.jsx(j,{value:"ingress",children:"Ingress Only"}),e.jsx(j,{value:"egress",children:"Egress Only"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Duration (minutes)"}),e.jsx(M,{type:"number",min:1,max:60,value:x,onChange:s=>X(parseInt(s.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Truncate Packets (bytes)"}),e.jsx(M,{type:"number",min:0,max:65535,value:S,onChange:s=>je(parseInt(s.target.value)||0),placeholder:"0 = Full packet"})]})]}),e.jsxs(P,{onClick:ss,disabled:ze||Z.some(s=>s.status==="running"),className:"w-full",size:"lg",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),ze?"Starting...":"Start Capture"]})]})]}),e.jsxs(z,{children:[e.jsxs(O,{children:[e.jsx(V,{children:"Capture Filters"}),e.jsx(te,{children:"Filter captured traffic by protocol, destination, or address"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Protocol"}),e.jsxs(L,{value:le,onValueChange:be,children:[e.jsx(U,{children:e.jsx($,{placeholder:"Any protocol"})}),e.jsx(H,{children:_e.map(s=>e.jsx(j,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Packet Destination"}),e.jsxs(L,{value:B,onValueChange:s=>Ce(s),children:[e.jsx(U,{children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(j,{value:"file",children:"File"}),e.jsx(j,{value:"scp",children:"SCP"})]})]})]}),B==="scp"&&e.jsxs("div",{className:"space-y-3 p-3 rounded-lg border bg-muted/30",children:[e.jsx(p,{className:"text-sm font-medium",children:"SCP Server Credentials"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-xs text-muted-foreground",children:"IP Address"}),e.jsx(M,{placeholder:"192.168.1.100",value:v,onChange:s=>we(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-xs text-muted-foreground",children:"Username"}),e.jsx(M,{placeholder:"admin",value:ne,onChange:s=>Pe(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-xs text-muted-foreground",children:"Password"}),e.jsx(M,{type:"password",placeholder:"••••••••",value:de,onChange:s=>Se(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-xs text-muted-foreground",children:"Destination Path"}),e.jsx(M,{placeholder:"/home/user/captures",value:oe,onChange:s=>a(s.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Address Filters"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{value:E,onValueChange:s=>ye(s),children:[e.jsx(U,{className:"w-28",children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(j,{value:"mac",children:"MAC"}),e.jsx(j,{value:"ip",children:"IP"})]})]}),e.jsx(M,{placeholder:E==="mac"?"AA:BB:CC:DD:EE:FF":"192.168.1.100",value:re,onChange:s=>ve(s.target.value),className:"flex-1",onKeyDown:s=>s.key==="Enter"&&Ue()}),e.jsx(P,{onClick:Ue,size:"icon",variant:"outline",children:e.jsx(ps,{className:"h-4 w-4"})})]})]}),I.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Active Filters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(s=>e.jsxs(N,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs font-medium uppercase",children:[s.type,":"]}),e.jsx("span",{children:s.value}),e.jsx(js,{className:"h-3 w-3 ml-1 cursor-pointer hover:text-destructive",onClick:()=>es(s.id)})]},s.id))})]}),e.jsxs(xe,{children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(he,{className:"text-xs",children:"Filters help narrow down captured traffic. Leave fields empty to capture all traffic matching the location and direction settings."})]})]})]})]}),Z.length>0&&e.jsxs(z,{children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{className:"flex items-center gap-2",children:"Packet Capture Instances"}),e.jsx(te,{children:"Currently running packet captures"})]}),e.jsx(P,{variant:"default",size:"sm",onClick:ts,className:"bg-primary",children:"Stop All Captures"})]})}),e.jsx(T,{children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{children:"Status"}),e.jsx(d,{children:"ID / Location"}),e.jsx(d,{children:"Progress"}),e.jsx(d,{children:"Filters"}),e.jsx(d,{children:"Action"})]})}),e.jsx(ae,{children:Z.map(s=>{const n=Math.floor((Date.now()-s.startTime)/1e3),r=Math.max(0,s.duration-n),m=Math.min(100,n/s.duration*100),F=Math.floor(n/60),b=n%60,Fe=Math.floor(r/60),ke=r%60;return e.jsxs(g,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${s.status==="running"?"bg-green-500":s.status==="stopping"?"bg-yellow-500":"bg-gray-400"}`}),e.jsx(N,{variant:s.status==="running"?"default":s.status==="stopping"?"secondary":"outline",className:"text-xs",children:s.status})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-sm",children:s.id}),e.jsxs("div",{className:"text-xs text-muted-foreground capitalize",children:[s.location," • ",s.direction]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-1.5 min-w-[140px]",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:[F,":",b.toString().padStart(2,"0")," elapsed"]}),e.jsxs("span",{className:"text-muted-foreground",children:[Fe,":",ke.toString().padStart(2,"0")," left"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-primary h-full transition-all duration-300",style:{width:`${m}%`}})})]})}),e.jsx(l,{children:s.filters&&s.filters.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.filters.map((W,cs)=>e.jsx(N,{variant:"outline",className:"text-xs font-mono",children:W},cs))}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"No filters"})}),e.jsx(l,{children:s.status==="running"?e.jsxs(P,{variant:"destructive",size:"sm",onClick:()=>as(s.id),disabled:s.status==="stopping",children:[e.jsx(fs,{className:"h-3 w-3 mr-1.5"}),"Stop"]}):s.status==="stopping"?e.jsx(N,{variant:"secondary",className:"text-xs",children:"Stopping..."}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"Completed"})})]},s.id)})})]})})]}),e.jsxs(z,{children:[e.jsx(O,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5"}),"Download Capture"]})}),e.jsx(T,{children:De.length>0?e.jsx(ds,{className:"h-[300px]",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(g,{children:[e.jsx(d,{className:"w-24",children:"Actions"}),e.jsx(d,{children:"Filename"}),e.jsx(d,{children:"Size"}),e.jsx(d,{children:"Created"}),e.jsx(d,{children:"Status"})]})}),e.jsx(ae,{children:De.map(s=>e.jsxs(g,{className:"hover:bg-muted/50",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(P,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-primary/10 hover:text-primary",onClick:()=>rs(s),title:"Download PCAP file",children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx(P,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-destructive/10 hover:text-destructive",onClick:()=>ls(s),title:"Delete capture file",children:e.jsx(vs,{className:"h-4 w-4"})})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium font-mono text-sm",children:s.filename})]})}),e.jsx(l,{children:e.jsx(N,{variant:"outline",className:"font-mono text-xs",children:ns(s.size)})}),e.jsx(l,{children:e.jsx("div",{className:"text-sm",children:is(s.date)})}),e.jsx(l,{children:s.status?e.jsx(N,{variant:"secondary",className:"text-xs",children:s.status}):e.jsx(N,{variant:"default",className:"text-xs bg-green-500",children:"Ready"})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx($e,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No capture files available"}),e.jsx("p",{className:"text-sm mt-1",children:"Start a packet capture to generate files"})]})})]})]})})}function Os(){const[t,u]=i.useState("rf-management");return e.jsx("div",{className:"h-full",children:e.jsxs(He,{value:t,onValueChange:u,className:"h-full",children:[e.jsx("div",{className:"border-b",children:e.jsxs(qe,{className:"h-12 px-6",children:[e.jsxs(Q,{value:"rf-management",className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"RF Management"]}),e.jsxs(Q,{value:"afc-planning",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"AFC Planning"]}),e.jsxs(Q,{value:"api-test",className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"API Test"]}),e.jsxs(Q,{value:"packet-capture",className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Packet Capture"]})]})}),e.jsx(Y,{value:"rf-management",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(ws,{})}),e.jsx(Y,{value:"afc-planning",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(Cs,{})}),e.jsx(Y,{value:"api-test",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(Ns,{})}),e.jsx(Y,{value:"packet-capture",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(zs,{})})]})})}export{Os as Tools};
