import{j as e,ae as Ze,X as Os,u as Ms,d as es,af as Fs,P as We,f as Ue,ag as Bs,g as Oe,h as _s,ad as Us,ac as Gs}from"./vendor-ui-CO0mBmim.js";import{a as f,c as Vs}from"./vendor-react-BQC692LR.js";import{a as ee,w as K,t as ce,A as ss,l as ts,T as $s,i as zs,j as Se,k as be,C as W,b as _,c as G,h as V,d as L,L as m,I as B,m as Y,n as X,o as Q,p as J,q as p,v as oe,B as $,_ as qe,f as as,e as se,D as ns,S as is}from"./index-CrdvL8SR.js";import{T as Ks,a as Hs,b as ke,c as fe,d as qs,e as me}from"./table-BR47Ry2r.js";import{C as Me}from"./checkbox-DKtTTixp.js";import{S as P}from"./switch-iy-vimzq.js";import{T as Ys}from"./textarea-PnFczYiL.js";import{T as Ae,a as Ce,b as Pe}from"./tooltip-8iq8-UkY.js";import{J as Ge,N as Ie,S as Fe,W as ls,I as we,ad as rs,O as Xs,M as Ve,a3 as je,f as Te,y as $e,P as os,X as Qs,ac as cs,aW as Be,a0 as ds,aX as Js,k as _e,G as us,h as Zs,L as Ye,aY as et,R as st,aZ as Xe,a_ as Qe,aq as tt,a$ as at}from"./vendor-icons-DmoIqCnf.js";import{D as nt,a as it,b as lt,c as rt,d as ot,e as ct}from"./dialog-BqYeg193.js";import"./vendor-charts-CCS-1Xlq.js";function dt(a={}){const i=a.serviceName||a.ssid||"New Network",l=a.ssid||a.serviceName||"New Network";return{serviceName:i,ssid:l,status:"enabled",suppressSsid:!1,canEdit:!0,canDelete:!0,proxied:"Local",shutdownOnMeshpointLoss:!1,privacy:null,dot1dPortNumber:99,enabled11kSupport:!1,rm11kBeaconReport:!1,rm11kQuietIe:!1,uapsdEnabled:!0,admissionControlVideo:!1,admissionControlVoice:!1,admissionControlBestEffort:!1,admissionControlBackgroundTraffic:!1,flexibleClientAccess:!1,mbaAuthorization:!1,accountingEnabled:!1,clientToClientCommunication:!0,includeHostname:!1,mbo:!1,oweAutogen:!1,oweCompanion:null,purgeOnDisconnect:!1,enable11mcSupport:!1,beaconProtection:!1,aaaPolicyId:null,mbatimeoutRoleId:null,roamingAssistPolicy:null,vendorSpecificAttributes:[],enableCaptivePortal:!1,captivePortalType:null,eGuestPortalId:null,eGuestSettings:[],preAuthenticatedIdleTimeout:300,postAuthenticatedIdleTimeout:1800,sessionTimeout:0,defaultTopology:null,defaultCoS:"1eea4d66-2607-11e7-93ae-92361f002671",unAuthenticatedUserDefaultRoleID:null,authenticatedUserDefaultRoleID:null,cpNonAuthenticatedPolicyName:null,hotspotType:"Disabled",hotspot:null,dscp:{codePoints:[2,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,1,0,3,0,3,0,3,0,3,0,4,0,4,0,4,0,4,0,5,0,5,0,5,0,5,0,0,0,0,0,6,0,6,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0]},features:["CENTRALIZED-SITE"],...a}}function ut(a,i){switch(a){case"open":return null;case"wpa2-personal":case"wpa-personal":return{WpaPskElement:{mode:"aesOnly",pmfMode:"disabled",presharedKey:i||"",keyHexEncoded:!1}};case"wpa3-personal":case"wpa3-sae":return{WpaSaeElement:{pmfMode:"required",presharedKey:i||"",keyHexEncoded:!1,saeMethod:"SaeH2e",encryption:"AES_CCM_128",akmSuiteSelector:"AKM8_24"}};case"wpa2-enterprise":case"wpa-enterprise":return{WpaEnterpriseElement:{mode:"aesOnly",pmfMode:"disabled"}};case"wpa3-enterprise":return{WpaEnterpriseElement:{mode:"aesOnly",pmfMode:"required"}};default:return console.warn(`Unknown security type: ${a}, defaulting to Open`),null}}function mt(a){const i=[];if((!a.serviceName||a.serviceName.trim()==="")&&i.push("Service name is required"),(!a.ssid||a.ssid.trim()==="")&&i.push("SSID is required"),a.ssid&&a.ssid.length>32&&i.push("SSID must be 32 characters or less"),a.privacy&&(a.privacy.WpaPskElement||a.privacy.WpaSaeElement)){const l=a.privacy.WpaPskElement?.presharedKey||a.privacy.WpaSaeElement?.presharedKey||"";(!l||l.length<8||l.length>63)&&i.push("Passphrase must be between 8 and 63 characters")}return a.preAuthenticatedIdleTimeout!==void 0&&a.preAuthenticatedIdleTimeout<0&&i.push("Pre-authenticated idle timeout must be non-negative"),a.postAuthenticatedIdleTimeout!==void 0&&a.postAuthenticatedIdleTimeout<0&&i.push("Post-authenticated idle timeout must be non-negative"),a.sessionTimeout!==void 0&&a.sessionTimeout<0&&i.push("Session timeout must be non-negative"),{valid:i.length===0,errors:i}}function pt({serviceId:a,onSave:i,isInline:l=!1}){const[n,c]=f.useState(null),[u,h]=f.useState([]),[j,N]=f.useState([]),[g,C]=f.useState([]),[k,E]=f.useState([]),[v,D]=f.useState(!0),[z,F]=f.useState(!1),[I,q]=f.useState(null),[te,ae]=f.useState("basic"),[s,R]=f.useState({name:"",ssid:"",description:"",enabled:!0,securityType:"open",privacyType:"",authType:"",authMethod:"",encryption:"none",passphrase:"",pmfMode:"disabled",saeMethod:"SaeH2e",beaconProtection:!1,oweAutogen:!1,oweCompanion:"",vlan:"",defaultTopology:"",proxied:"Local",band:"both",channel:"auto",broadcastSSID:!0,hidden:!1,aaaPolicyId:"",accountingEnabled:!1,fastTransitionEnabled:!1,fastTransitionMdId:0,authenticatedUserDefaultRoleID:"",unAuthenticatedUserDefaultRoleID:"",mbatimeoutRoleId:"",enabled11kSupport:!1,rm11kBeaconReport:!1,rm11kQuietIe:!1,enable11mcSupport:!1,bandSteering:!1,mbo:!1,captivePortal:!1,captivePortalType:"",eGuestPortalId:"",guestAccess:!1,macBasedAuth:!1,mbaAuthorization:!1,macWhitelistEnabled:!1,macBlacklistEnabled:!1,maxClients:100,maxClientsPer24:50,maxClientsPer5:50,sessionTimeout:0,preAuthenticatedIdleTimeout:300,postAuthenticatedIdleTimeout:1800,idleTimeout:0,clientToClientCommunication:!0,flexibleClientAccess:!1,purgeOnDisconnect:!1,includeHostname:!1,defaultCoS:"",bandwidthLimitEnabled:!1,downloadLimit:0,uploadLimit:0,priorityLevel:"normal",uapsdEnabled:!0,admissionControlVideo:!1,admissionControlVoice:!1,admissionControlBestEffort:!1,admissionControlBackgroundTraffic:!1,hotspotType:"Disabled",hotspot:!1,roamingAssistPolicy:"",vendorSpecificAttributes:["apName","vnsName","ssid"],shutdownOnMeshpointLoss:!1,defaultAuthRole:"none",isolateClients:!1,fastRoaming:!1,loadBalancing:!1,radiusAccounting:!1,customProperties:{}});f.useEffect(()=>{S()},[a]);const S=async()=>{try{D(!0),q(null);const[t,O,H,ie,le]=await Promise.allSettled([ee.getServiceById(a),ee.getRoles(),ee.getTopologies(),ee.getAaaPolicies(),ee.getClassOfService()]);if(t.status==="fulfilled"){const d=t.value;c(d),console.log("Loading service data:",d);const x=d.privacy?.WpaSaeElement||d.WpaSaeElement,w=d.privacy?.WpaPskElement||d.WpaPskElement,b=d.privacy?.WpaEnterpriseElement||d.WpaEnterpriseElement;let T="open",M="";w?(T="wpa2-personal",M=w.mode==="aesOnly"?"aes":w.mode==="tkipOnly"?"tkip":w.mode==="mixed"?"tkip-aes":"aes"):x?(T="wpa3-personal",M="aes"):b&&(T=b.pmfMode==="required"?"wpa3-enterprise":"wpa2-enterprise",M=b.mode==="aesOnly"?"aes":b.mode==="tkipOnly"?"tkip":b.mode==="mixed"?"tkip-aes":"aes");const Z={name:d.serviceName||d.name||d.ssid||"Unnamed Network",ssid:d.ssid||d.name||"",description:d.description||"",enabled:d.enabled!==!1&&d.status!=="disabled",securityType:T,privacyType:d.security?.privacyType||d.privacyType||"",authType:d.security?.authType||d.authType||"",authMethod:d.security?.authMethod||d.authMethod||"",encryption:M||d.security?.encryption||d.encryption||"",passphrase:w?.presharedKey||x?.presharedKey||d.security?.passphrase||d.passphrase||"",pmfMode:x?.pmfMode||w?.pmfMode||b?.pmfMode||"disabled",saeMethod:x?.saeMethod||"SaeH2e",beaconProtection:d.beaconProtection||!1,oweAutogen:d.oweAutogen||!1,oweCompanion:d.oweCompanion||"none",vlan:(d.vlan||d.dot1dPortNumber||"").toString(),defaultTopology:d.defaultTopology||"none",proxied:d.proxied||"Local",band:d.band||"both",channel:d.channel?.toString()||"auto",broadcastSSID:!d.suppressSsid&&d.broadcastSSID!==!1,hidden:d.suppressSsid||d.hidden||!1,aaaPolicyId:d.aaaPolicyId||"none",accountingEnabled:d.accountingEnabled||!1,fastTransitionEnabled:b?.fastTransitionEnabled||!1,fastTransitionMdId:b?.fastTransitionMdId||0,authenticatedUserDefaultRoleID:d.authenticatedUserDefaultRoleID||"none",unAuthenticatedUserDefaultRoleID:d.unAuthenticatedUserDefaultRoleID||"none",mbatimeoutRoleId:d.mbatimeoutRoleId||"none",enabled11kSupport:d.enabled11kSupport||!1,rm11kBeaconReport:d.rm11kBeaconReport||!1,rm11kQuietIe:d.rm11kQuietIe||!1,enable11mcSupport:d.enable11mcSupport||!1,bandSteering:d.bandSteering||!1,mbo:d.mbo||!1,captivePortal:d.captivePortal||d.enableCaptivePortal||!1,captivePortalType:d.captivePortalType||"none",eGuestPortalId:d.eGuestPortalId||"none",guestAccess:d.guestAccess||!1,macBasedAuth:d.macBasedAuth||!1,mbaAuthorization:d.mbaAuthorization||!1,macWhitelistEnabled:d.macWhitelistEnabled||!1,macBlacklistEnabled:d.macBlacklistEnabled||!1,maxClients:d.maxClients||100,maxClientsPer24:d.maxClientsPer24||50,maxClientsPer5:d.maxClientsPer5||50,sessionTimeout:d.sessionTimeout||0,preAuthenticatedIdleTimeout:d.preAuthenticatedIdleTimeout||300,postAuthenticatedIdleTimeout:d.postAuthenticatedIdleTimeout||1800,idleTimeout:d.idleTimeout||0,clientToClientCommunication:d.clientToClientCommunication!==!1,flexibleClientAccess:d.flexibleClientAccess||!1,purgeOnDisconnect:d.purgeOnDisconnect||!1,includeHostname:d.includeHostname||!1,defaultCoS:d.defaultCoS||"none",bandwidthLimitEnabled:d.bandwidthLimitEnabled||!1,downloadLimit:d.downloadLimit||0,uploadLimit:d.uploadLimit||0,priorityLevel:d.priorityLevel||"normal",uapsdEnabled:d.uapsdEnabled!==!1,admissionControlVideo:d.admissionControlVideo||!1,admissionControlVoice:d.admissionControlVoice||!1,admissionControlBestEffort:d.admissionControlBestEffort||!1,admissionControlBackgroundTraffic:d.admissionControlBackgroundTraffic||!1,hotspotType:d.hotspotType||"Disabled",hotspot:d.hotspotType!=="Disabled"&&d.hotspotType!==void 0,roamingAssistPolicy:d.roamingAssistPolicy||"none",vendorSpecificAttributes:d.vendorSpecificAttributes||["apName","vnsName","ssid"],shutdownOnMeshpointLoss:d.shutdownOnMeshpointLoss||!1,defaultAuthRole:d.defaultAuthRole||"none",isolateClients:!d.clientToClientCommunication,fastRoaming:b?.fastTransitionEnabled||!1,loadBalancing:d.loadBalancing||!1,radiusAccounting:d.accountingEnabled||!1,customProperties:d.customProperties||{}};console.log("Mapped form data:",Z),R(Z)}else throw new Error("Failed to load service details");O.status==="fulfilled"?h(O.value):h([]),H.status==="fulfilled"?N(H.value):N([]),ie.status==="fulfilled"?C(ie.value):C([]),le.status==="fulfilled"?E(le.value):E([])}catch(t){const O=t instanceof Error?t.message:"Failed to load network data";q(O),K.error("Failed to load network data",{description:O})}finally{D(!1)}},U=async()=>{try{if(F(!0),q(null),!n)throw new Error("Service data not loaded");if(!s.name||!s.name.trim())throw new Error("Network name is required");if(!s.ssid||!s.ssid.trim())throw new Error("SSID is required");console.log("=== SERVICE UPDATE DEBUG INFO ==="),console.log("Service ID:",a),console.log("Form data to save:",s);let t=n.privacy;if(s.securityType==="wpa3-personal"||s.securityType==="wpa23-personal")t={type:s.securityType==="wpa3-personal"?"WPA3-SAE":"WPA2/3-SAE",WpaSaeElement:{pmfMode:s.pmfMode,saeMethod:s.saeMethod,presharedKey:s.passphrase||n.privacy?.WpaSaeElement?.presharedKey||"",keyHexEncoded:!1,encryption:s.encryption==="aes"?"AES":s.encryption==="tkip-aes"?"TKIP_AES":"AES",akmSuiteSelector:"SAE"}};else if(s.securityType==="wpa2-personal"||s.securityType==="wpa-personal")t={type:s.securityType==="wpa2-personal"?"WPA2":"WPA",WpaPskElement:{mode:s.securityType==="wpa2-personal"?"WPA2":"WPA",pmfMode:s.pmfMode||"disabled",presharedKey:s.passphrase||n.privacy?.WpaPskElement?.presharedKey||"",keyHexEncoded:!1,encryption:s.encryption==="aes"?"AES":s.encryption==="tkip"?"TKIP":s.encryption==="tkip-aes"?"TKIP_AES":"AES"}};else if(s.securityType.includes("enterprise")){const le=s.securityType==="wpa3-enterprise"?"WPA3":s.securityType==="wpa2-enterprise"?"WPA2":s.securityType==="wpa23-enterprise"?"WPA2/3":"WPA";t={type:le,WpaEnterpriseElement:{mode:le,pmfMode:s.pmfMode||(s.securityType==="wpa3-enterprise"?"required":"disabled"),encryption:s.encryption==="aes"?"AES":s.encryption==="tkip"?"TKIP":s.encryption==="tkip-aes"?"TKIP_AES":"AES",fastTransitionEnabled:s.fastTransitionEnabled,fastTransitionMdId:s.fastTransitionMdId||0}}}else s.securityType==="owe"?t={type:"OWE",OweElement:{encryption:"AES"}}:s.securityType==="open"?t={type:"Open"}:s.passphrase&&s.passphrase.trim()&&(t=ut(s.securityType,s.passphrase));console.log("Generated privacy config:",t);const O={...dt(),...n,id:a,serviceName:s.name.trim(),ssid:s.ssid.trim(),status:s.enabled?"enabled":"disabled",enabled:s.enabled,description:s.description?.trim()||"",privacy:t,suppressSsid:s.hidden,beaconProtection:s.beaconProtection,oweAutogen:s.oweAutogen,oweCompanion:s.oweCompanion==="none"?null:s.oweCompanion,aaaPolicyId:s.aaaPolicyId==="none"?null:s.aaaPolicyId,accountingEnabled:s.accountingEnabled,authenticatedUserDefaultRoleID:s.authenticatedUserDefaultRoleID||"none",unAuthenticatedUserDefaultRoleID:s.unAuthenticatedUserDefaultRoleID||"none",mbatimeoutRoleId:s.mbatimeoutRoleId==="none"?null:s.mbatimeoutRoleId,defaultTopology:s.defaultTopology==="none"?null:s.defaultTopology,proxied:s.proxied,vlan:s.vlan?parseInt(s.vlan):void 0,band:s.band,channel:s.channel==="auto"?void 0:parseInt(s.channel),enabled11kSupport:s.enabled11kSupport,rm11kBeaconReport:s.rm11kBeaconReport,rm11kQuietIe:s.rm11kQuietIe,enable11mcSupport:s.enable11mcSupport,bandSteering:s.bandSteering,mbo:s.mbo,defaultCoS:s.defaultCoS==="none"?null:s.defaultCoS,uapsdEnabled:s.uapsdEnabled,admissionControlVideo:s.admissionControlVideo,admissionControlVoice:s.admissionControlVoice,admissionControlBestEffort:s.admissionControlBestEffort,admissionControlBackgroundTraffic:s.admissionControlBackgroundTraffic,captivePortal:s.captivePortal,enableCaptivePortal:s.captivePortal,captivePortalType:s.captivePortalType||"",eGuestPortalId:s.eGuestPortalId||"",hotspotType:s.hotspotType,guestAccess:s.guestAccess,macBasedAuth:s.macBasedAuth,mbaAuthorization:s.mbaAuthorization,maxClients:s.maxClients,maxClientsPer24:s.maxClientsPer24,maxClientsPer5:s.maxClientsPer5,sessionTimeout:s.sessionTimeout,preAuthenticatedIdleTimeout:s.preAuthenticatedIdleTimeout,postAuthenticatedIdleTimeout:s.postAuthenticatedIdleTimeout,clientToClientCommunication:s.clientToClientCommunication,flexibleClientAccess:s.flexibleClientAccess,purgeOnDisconnect:s.purgeOnDisconnect,includeHostname:s.includeHostname,roamingAssistPolicy:s.roamingAssistPolicy==="none"?null:s.roamingAssistPolicy,loadBalancing:s.loadBalancing,vendorSpecificAttributes:s.vendorSpecificAttributes,shutdownOnMeshpointLoss:s.shutdownOnMeshpointLoss};Object.keys(O).forEach(le=>{O[le]===void 0&&delete O[le]}),console.log("=== COMPLETE SERVICE PAYLOAD ==="),console.log(JSON.stringify(O,null,2));const H=mt(O);if(!H.valid)throw new Error(`Validation failed: ${H.errors.join(", ")}`);const ie=await ee.updateService(a,O);console.log("Service update successful!"),c(ie),K.success("Network configuration saved successfully",{description:`Settings for ${s.name} have been updated with all Extreme Platform ONE features.`}),i&&i()}catch(t){const O=t instanceof Error?t.message:"Failed to save network configuration";q(O),console.error("=== COMPREHENSIVE ERROR ANALYSIS ==="),console.error("Error message:",O),console.error("Error type:",typeof t),console.error("Error constructor:",t?.constructor?.name),console.error("Service ID:",a),console.error("Original service structure:",Object.keys(n||{})),console.error("Form data structure:",s),console.error("Extreme Platform ONE API debugging hints:"),console.error("- Check if service ID exists:",a),console.error("- Verify field names match API expectations"),console.error("- Check for required fields that might be missing"),console.error("- Privacy object structure:",n.privacy),console.error("- Security type:",s.securityType),t&&typeof t=="object"&&(console.error("Error object properties:",Object.getOwnPropertyNames(t)),console.error("Error object values:",Object.fromEntries(Object.getOwnPropertyNames(t).map(ie=>[ie,t[ie]]))));let H=O;O.includes("422")?H="Validation failed. Extreme Platform ONE rejected the update. Check that all field values are valid (e.g., valid VLAN range, proper passphrase length, valid UUIDs for roles/topologies).":O.includes("404")?H="Service not found. The network configuration may have been deleted by another user.":O.includes("403")&&(H="Access denied. You may not have permission to modify this network configuration."),K.error("Failed to save network configuration",{description:H,duration:1e4})}finally{F(!1)}},o=(t,O)=>{R(H=>({...H,[t]:O}))};return v?e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ce,{className:"h-6 w-48"}),e.jsx(ce,{className:"h-4 w-64"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(8)].map((t,O)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"h-4 w-24"}),e.jsx(ce,{className:"h-10 w-full"})]},O))})]}):e.jsxs("div",{className:"space-y-6 p-6",children:[I&&e.jsxs(ss,{variant:"destructive",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx(ts,{children:I})]}),e.jsxs($s,{value:te,onValueChange:ae,className:"w-full",children:[e.jsxs(zs,{className:"grid w-full grid-cols-5",children:[e.jsx(Se,{value:"basic",children:"Basic"}),e.jsx(Se,{value:"security",children:"Security"}),e.jsx(Se,{value:"network",children:"Network"}),e.jsx(Se,{value:"access",children:"Access"}),e.jsx(Se,{value:"advanced",children:"Advanced"})]}),e.jsx(be,{value:"basic",className:"space-y-6",children:e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsxs(G,{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Basic Configuration"})]}),e.jsx(V,{children:"Fundamental network settings and identification"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"network-name",children:"Network Name"}),e.jsx(B,{id:"network-name",value:s.name,onChange:t=>o("name",t.target.value),placeholder:"Enter network name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"ssid",children:"SSID"}),e.jsx(B,{id:"ssid",value:s.ssid,onChange:t=>o("ssid",t.target.value),placeholder:"Enter SSID"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(Ys,{id:"description",value:s.description,onChange:t=>o("description",t.target.value),placeholder:"Optional network description",rows:3})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Network Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable this network"})]}),e.jsx(P,{checked:s.enabled,onCheckedChange:t=>o("enabled",t)})]})]})]})}),e.jsxs(be,{value:"security",className:"space-y-6",children:[e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsxs(G,{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),e.jsx("span",{children:"Security Configuration"})]}),e.jsx(V,{children:"Configure authentication and encryption settings"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"security-type",children:"Security Type"}),e.jsxs(Y,{value:s.securityType,onValueChange:t=>o("securityType",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select security type"})}),e.jsxs(J,{children:[e.jsx(p,{value:"open",children:"Open"}),e.jsx(p,{value:"owe",children:"OWE (Enhanced Open)"}),e.jsx(p,{value:"wep",children:"WEP"}),e.jsx(p,{value:"wpa-personal",children:"WPA-Personal"}),e.jsx(p,{value:"wpa2-personal",children:"WPA2-Personal"}),e.jsx(p,{value:"wpa3-personal",children:"WPA3-Personal (SAE)"}),e.jsx(p,{value:"wpa23-personal",children:"WPA2/WPA3-Personal (Transition)"}),e.jsx(p,{value:"wpa-enterprise",children:"WPA-Enterprise"}),e.jsx(p,{value:"wpa2-enterprise",children:"WPA2-Enterprise"}),e.jsx(p,{value:"wpa3-enterprise",children:"WPA3-Enterprise"}),e.jsx(p,{value:"wpa23-enterprise",children:"WPA2/WPA3-Enterprise"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"encryption",children:"Encryption"}),e.jsxs(Y,{value:s.encryption,onValueChange:t=>o("encryption",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select encryption"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),e.jsx(p,{value:"tkip",children:"TKIP"}),e.jsx(p,{value:"aes",children:"AES"}),e.jsx(p,{value:"tkip-aes",children:"TKIP + AES"})]})]})]})]}),s.securityType!=="open"&&s.securityType!=="owe"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"passphrase",children:"Passphrase"}),e.jsx(B,{id:"passphrase",type:"password",value:s.passphrase,onChange:t=>o("passphrase",t.target.value),placeholder:"Enter network passphrase (8-63 characters)",minLength:8,maxLength:63}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"8-63 characters for WPA/WPA2/WPA3"})]})]})]}),(s.securityType==="wpa3-personal"||s.securityType==="wpa23-personal")&&e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"WPA3-SAE Configuration"}),e.jsx(V,{children:"WPA3 Simultaneous Authentication of Equals settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"pmf-mode",children:"Protected Management Frames (PMF)"}),e.jsxs(Y,{value:s.pmfMode,onValueChange:t=>o("pmfMode",t),children:[e.jsx(X,{children:e.jsx(Q,{})}),e.jsxs(J,{children:[e.jsx(p,{value:"required",children:"Required (WPA3 only)"}),e.jsx(p,{value:"capable",children:"Capable (WPA2/WPA3 transition)"}),e.jsx(p,{value:"disabled",children:"Disabled"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for WPA3, prevents deauth attacks"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"sae-method",children:"SAE Method"}),e.jsxs(Y,{value:s.saeMethod,onValueChange:t=>o("saeMethod",t),children:[e.jsx(X,{children:e.jsx(Q,{})}),e.jsxs(J,{children:[e.jsx(p,{value:"SaeH2e",children:"Hash-to-Element (Recommended)"}),e.jsx(p,{value:"SaeLoop",children:"Hunting-and-Pecking (Legacy)"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"H2E provides better security"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Beacon Protection"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced WPA3 security feature"})]}),e.jsx(P,{checked:s.beaconProtection,onCheckedChange:t=>o("beaconProtection",t)})]})]})]}),s.securityType==="owe"&&e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"OWE (Opportunistic Wireless Encryption)"}),e.jsx(V,{children:"Enhanced Open - encryption without password"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Auto-generate OWE Transition SSID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create hidden SSID for legacy device compatibility"})]}),e.jsx(P,{checked:s.oweAutogen,onCheckedChange:t=>o("oweAutogen",t)})]}),s.oweAutogen&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"owe-companion",children:"OWE Companion SSID (Optional)"}),e.jsx(B,{id:"owe-companion",value:s.oweCompanion,onChange:t=>o("oweCompanion",t.target.value),placeholder:"Leave empty for auto-generated name"})]})]})]}),s.securityType.includes("enterprise")&&e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"AAA/RADIUS Configuration"}),e.jsx(V,{children:"Enterprise authentication settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"aaa-policy",children:"AAA Policy"}),e.jsxs(Y,{value:s.aaaPolicyId,onValueChange:t=>o("aaaPolicyId",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select AAA policy"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),g.map(t=>e.jsx(p,{value:t.id,children:t.name||t.policyName},t.id))]})]}),g.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"No AAA policies configured"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"RADIUS Accounting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track user session and usage data"})]}),e.jsx(P,{checked:s.accountingEnabled,onCheckedChange:t=>o("accountingEnabled",t)})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"802.11r Fast Transition"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Enable Fast Roaming (802.11r)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Faster handoff between APs"})]}),e.jsx(P,{checked:s.fastTransitionEnabled,onCheckedChange:t=>o("fastTransitionEnabled",t)})]}),s.fastTransitionEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"ft-mdid",children:"Mobility Domain ID"}),e.jsx(B,{id:"ft-mdid",type:"number",value:s.fastTransitionMdId,onChange:t=>o("fastTransitionMdId",parseInt(t.target.value)||0),placeholder:"0-65535",min:"0",max:"65535"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique ID for this mobility domain"})]})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Role Assignment"}),e.jsx(V,{children:"Default user roles for authentication states"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"unauth-role",children:"Unauthenticated User Role"}),e.jsxs(Y,{value:s.unAuthenticatedUserDefaultRoleID,onValueChange:t=>o("unAuthenticatedUserDefaultRoleID",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select default role before authentication"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),u.map(t=>e.jsx(p,{value:t.id,children:t.name},t.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Applied before user authenticates"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"auth-role",children:"Authenticated User Role"}),e.jsxs(Y,{value:s.authenticatedUserDefaultRoleID,onValueChange:t=>o("authenticatedUserDefaultRoleID",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select default role after authentication"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),u.map(t=>e.jsx(p,{value:t.id,children:t.name},t.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Applied after successful authentication"})]}),s.macBasedAuth&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"mba-timeout-role",children:"MAC-Based Auth Timeout Role"}),e.jsxs(Y,{value:s.mbatimeoutRoleId,onValueChange:t=>o("mbatimeoutRoleId",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select role after MBA timeout"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),u.map(t=>e.jsx(p,{value:t.id,children:t.name},t.id))]})]})]}),u.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"No roles configured"})]})]})]}),e.jsxs(be,{value:"network",className:"space-y-6",children:[e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsxs(G,{className:"flex items-center space-x-2",children:[e.jsx(ls,{className:"h-5 w-5"}),e.jsx("span",{children:"Network Settings"})]}),e.jsx(V,{children:"Configure VLAN, topology, band, and broadcast settings"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"topology",children:"Network Topology (VLAN)"}),e.jsxs(Y,{value:s.defaultTopology,onValueChange:t=>o("defaultTopology",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select topology"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),j.map(t=>e.jsxs(p,{value:t.id,children:[t.name," (VLAN ",t.vlanid,")"]},t.id))]})]}),j.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"No topologies configured"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"proxied",children:"Traffic Forwarding Mode"}),e.jsxs(Y,{value:s.proxied,onValueChange:t=>o("proxied",t),children:[e.jsx(X,{children:e.jsx(Q,{})}),e.jsxs(J,{children:[e.jsx(p,{value:"Local",children:"Local (Bridged at AP)"}),e.jsx(p,{value:"Centralized",children:"Centralized (Tunneled)"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.proxied==="Local"?"Traffic bridged locally at AP":"Traffic tunneled to Extreme Platform ONE"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"band",children:"Frequency Band"}),e.jsxs(Y,{value:s.band,onValueChange:t=>o("band",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select band"})}),e.jsxs(J,{children:[e.jsx(p,{value:"2.4GHz",children:"2.4GHz only"}),e.jsx(p,{value:"5GHz",children:"5GHz only"}),e.jsx(p,{value:"both",children:"Both 2.4GHz + 5GHz"}),e.jsx(p,{value:"6GHz",children:"6GHz only"}),e.jsx(p,{value:"all",children:"All bands"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"channel",children:"Channel"}),e.jsxs(Y,{value:s.channel,onValueChange:t=>o("channel",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select channel"})}),e.jsxs(J,{children:[e.jsx(p,{value:"auto",children:"Auto"}),e.jsx(p,{value:"1",children:"1"}),e.jsx(p,{value:"6",children:"6"}),e.jsx(p,{value:"11",children:"11"}),e.jsx(p,{value:"36",children:"36"}),e.jsx(p,{value:"40",children:"40"}),e.jsx(p,{value:"44",children:"44"}),e.jsx(p,{value:"48",children:"48"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"vlan",children:"VLAN ID (Manual Override)"}),e.jsx(B,{id:"vlan",type:"number",value:s.vlan,onChange:t=>o("vlan",t.target.value),placeholder:"Use topology",min:"1",max:"4094"})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Broadcast SSID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Make network visible to clients"})]}),e.jsx(P,{checked:s.broadcastSSID,onCheckedChange:t=>{o("broadcastSSID",t),o("hidden",!t)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Hidden Network"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Don't broadcast SSID"})]}),e.jsx(P,{checked:s.hidden,onCheckedChange:t=>{o("hidden",t),o("broadcastSSID",!t)}})]})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"802.11k/v/r Support"}),e.jsx(V,{children:"Radio resource management and roaming optimization"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"802.11k (Radio Resource Management)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help clients find best AP"})]}),e.jsx(P,{checked:s.enabled11kSupport,onCheckedChange:t=>o("enabled11kSupport",t)})]}),s.enabled11kSupport&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between pl-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Beacon Report"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Request neighbor AP info from clients"})]}),e.jsx(P,{checked:s.rm11kBeaconReport,onCheckedChange:t=>o("rm11kBeaconReport",t)})]}),e.jsxs("div",{className:"flex items-center justify-between pl-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Quiet IE"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coordinate spectrum measurements"})]}),e.jsx(P,{checked:s.rm11kQuietIe,onCheckedChange:t=>o("rm11kQuietIe",t)})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"802.11v (BSS Transition Management)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Suggest better APs to clients"})]}),e.jsx(P,{checked:s.enable11mcSupport,onCheckedChange:t=>o("enable11mcSupport",t)})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Band Steering & Optimization"}),e.jsx(V,{children:"Optimize client band selection"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Band Steering"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Steer dual-band clients to 5GHz"})]}),e.jsx(P,{checked:s.bandSteering,onCheckedChange:t=>o("bandSteering",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"MBO (Multi-Band Operation)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced 802.11k/v features"})]}),e.jsx(P,{checked:s.mbo,onCheckedChange:t=>o("mbo",t)})]})]})]})]}),e.jsxs(be,{value:"access",className:"space-y-6",children:[e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Quality of Service (QoS)"}),e.jsx(V,{children:"Traffic prioritization and admission control"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"cos",children:"Class of Service (CoS)"}),e.jsxs(Y,{value:s.defaultCoS,onValueChange:t=>o("defaultCoS",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select CoS"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None (Best Effort)"}),k.map(t=>e.jsx(p,{value:t.id,children:t.cosName},t.id))]})]}),k.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"No CoS options configured"})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Admission Control"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require channel capacity before admitting traffic"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Video Traffic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require admission for video (AC_VI)"})]}),e.jsx(P,{checked:s.admissionControlVideo,onCheckedChange:t=>o("admissionControlVideo",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Voice Traffic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require admission for voice (AC_VO)"})]}),e.jsx(P,{checked:s.admissionControlVoice,onCheckedChange:t=>o("admissionControlVoice",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Best Effort Traffic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require admission for best effort (AC_BE)"})]}),e.jsx(P,{checked:s.admissionControlBestEffort,onCheckedChange:t=>o("admissionControlBestEffort",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Background Traffic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require admission for background (AC_BK)"})]}),e.jsx(P,{checked:s.admissionControlBackgroundTraffic,onCheckedChange:t=>o("admissionControlBackgroundTraffic",t)})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"U-APSD (WMM Power Save)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unscheduled Automatic Power Save Delivery"})]}),e.jsx(P,{checked:s.uapsdEnabled,onCheckedChange:t=>o("uapsdEnabled",t)})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Captive Portal & Guest Access"}),e.jsx(V,{children:"Web authentication and guest portal settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Enable Captive Portal"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require web authentication"})]}),e.jsx(P,{checked:s.captivePortal,onCheckedChange:t=>o("captivePortal",t)})]}),s.captivePortal&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"cp-type",children:"Captive Portal Type"}),e.jsxs(Y,{value:s.captivePortalType,onValueChange:t=>o("captivePortalType",t),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:"Select portal type"})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"None"}),e.jsx(p,{value:"internal",children:"Internal Portal"}),e.jsx(p,{value:"external",children:"External Portal"}),e.jsx(p,{value:"custom",children:"Custom Portal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"eguest-portal",children:"eGuest Portal"}),e.jsx(B,{id:"eguest-portal",value:s.eGuestPortalId,onChange:t=>o("eGuestPortalId",t.target.value),placeholder:"eGuest Portal ID (optional)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty if not using eGuest"})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Hotspot 2.0 / Passpoint"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Enable Hotspot 2.0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Standards-based guest access"})]}),e.jsx(P,{checked:s.hotspot,onCheckedChange:t=>{o("hotspot",t),o("hotspotType",t?"Hotspot20":"Disabled")}})]}),s.hotspot&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"hotspot-type",children:"Hotspot Type"}),e.jsxs(Y,{value:s.hotspotType,onValueChange:t=>o("hotspotType",t),children:[e.jsx(X,{children:e.jsx(Q,{})}),e.jsxs(J,{children:[e.jsx(p,{value:"Disabled",children:"Disabled"}),e.jsx(p,{value:"Hotspot20",children:"Hotspot 2.0 (Passpoint)"})]})]})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Guest Access"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow limited guest network access"})]}),e.jsx(P,{checked:s.guestAccess,onCheckedChange:t=>o("guestAccess",t)})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"MAC-Based Authentication & Client Limits"}),e.jsx(V,{children:"Device authentication and connection limits"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"MAC-based Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Authenticate by MAC address"})]}),e.jsx(P,{checked:s.macBasedAuth,onCheckedChange:t=>o("macBasedAuth",t)})]}),s.macBasedAuth&&e.jsxs("div",{className:"flex items-center justify-between pl-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"MAC-Based Authorization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require RADIUS authorization"})]}),e.jsx(P,{checked:s.mbaAuthorization,onCheckedChange:t=>o("mbaAuthorization",t)})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Client Connection Limits"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"max-clients",children:"Max Clients (Total)"}),e.jsx(B,{id:"max-clients",type:"number",value:s.maxClients,onChange:t=>o("maxClients",parseInt(t.target.value)||0),min:"1",max:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"max-clients-24",children:"2.4GHz Band"}),e.jsx(B,{id:"max-clients-24",type:"number",value:s.maxClientsPer24,onChange:t=>o("maxClientsPer24",parseInt(t.target.value)||0),min:"1",max:"500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"max-clients-5",children:"5GHz Band"}),e.jsx(B,{id:"max-clients-5",type:"number",value:s.maxClientsPer5,onChange:t=>o("maxClientsPer5",parseInt(t.target.value)||0),min:"1",max:"500"})]})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Session Timeouts"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"pre-auth-timeout",children:"Pre-Auth Idle (seconds)"}),e.jsx(B,{id:"pre-auth-timeout",type:"number",value:s.preAuthenticatedIdleTimeout,onChange:t=>o("preAuthenticatedIdleTimeout",parseInt(t.target.value)||0),min:"0",max:"999999"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Before authentication (default: 300)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"post-auth-timeout",children:"Post-Auth Idle (seconds)"}),e.jsx(B,{id:"post-auth-timeout",type:"number",value:s.postAuthenticatedIdleTimeout,onChange:t=>o("postAuthenticatedIdleTimeout",parseInt(t.target.value)||0),min:"0",max:"999999"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"After authentication (default: 1800)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"session-timeout",children:"Session Timeout (seconds)"}),e.jsx(B,{id:"session-timeout",type:"number",value:s.sessionTimeout,onChange:t=>o("sessionTimeout",parseInt(t.target.value)||0),min:"0",max:"999999"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Max session duration (0 = unlimited)"})]})]})]})]})]})]}),e.jsxs(be,{value:"advanced",className:"space-y-6",children:[e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Advanced Settings"}),e.jsx(V,{children:"Extreme Platform ONE advanced WLAN configuration options"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{children:"MultiBand Operation"}),e.jsxs(Ae,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(we,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsxs(Pe,{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium",children:"MBO (Multi-Band Operation)"}),e.jsx("p",{className:"text-xs opacity-80",children:"Part of Wi-Fi Agile Multiband. Enables enhanced 802.11k/v features that help clients make better roaming decisions across 2.4GHz, 5GHz, and 6GHz bands."})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced 802.11k/v features for multi-band steering"})]}),e.jsx(P,{checked:s.mbo,onCheckedChange:t=>o("mbo",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"RADIUS Accounting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track user session and usage data via RADIUS"})]}),e.jsx(P,{checked:s.accountingEnabled,onCheckedChange:t=>o("accountingEnabled",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Hide SSID"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Do not broadcast SSID in beacons"})]}),e.jsx(P,{checked:s.hidden,onCheckedChange:t=>{o("hidden",t),o("broadcastSSID",!t)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Include Hostname"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send client hostname to RADIUS server"})]}),e.jsx(P,{checked:s.includeHostname,onCheckedChange:t=>o("includeHostname",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{children:"FTM (11mc) Responder Support"}),e.jsxs(Ae,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(we,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsxs(Pe,{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium",children:"Fine Timing Measurement (802.11mc)"}),e.jsx("p",{className:"text-xs opacity-80",children:"Enables Wi-Fi Round Trip Time (RTT) for indoor positioning. Allows clients to measure their distance from the AP with sub-meter accuracy for location-based services."})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable 802.11mc location services"})]}),e.jsx(P,{checked:s.enable11mcSupport,onCheckedChange:t=>o("enable11mcSupport",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{children:"Radio Management (11k) Support"}),e.jsxs(Ae,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(we,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsxs(Pe,{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium",children:"Radio Resource Management (802.11k)"}),e.jsx("p",{className:"text-xs opacity-80",children:"Provides neighbor AP reports to clients, helping them discover nearby APs and make faster, smarter roaming decisions without scanning all channels."})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help clients find the best AP via neighbor reports"})]}),e.jsx(P,{checked:s.enabled11kSupport,onCheckedChange:t=>o("enabled11kSupport",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{children:"U-APSD (WMM-PS)"}),e.jsxs(Ae,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(we,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsxs(Pe,{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium",children:"Unscheduled Automatic Power Save Delivery"}),e.jsx("p",{className:"text-xs opacity-80",children:"WMM Power Save feature that allows devices to sleep longer while maintaining quality for voice/video. Reduces battery drain on mobile devices without impacting real-time applications."})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unscheduled Automatic Power Save Delivery"})]}),e.jsx(P,{checked:s.uapsdEnabled,onCheckedChange:t=>o("uapsdEnabled",t)})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Admission Control"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Use Admission Control for Voice (VO)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require channel capacity for voice traffic (AC_VO)"})]}),e.jsx(P,{checked:s.admissionControlVoice,onCheckedChange:t=>o("admissionControlVoice",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Use Admission Control for Video (VI)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require channel capacity for video traffic (AC_VI)"})]}),e.jsx(P,{checked:s.admissionControlVideo,onCheckedChange:t=>o("admissionControlVideo",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Use Admission Control for Best Effort (BE)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require channel capacity for best effort traffic (AC_BE)"})]}),e.jsx(P,{checked:s.admissionControlBestEffort,onCheckedChange:t=>o("admissionControlBestEffort",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Use Global Admission Control for Background (BK)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require channel capacity for background traffic (AC_BK)"})]}),e.jsx(P,{checked:s.admissionControlBackgroundTraffic,onCheckedChange:t=>o("admissionControlBackgroundTraffic",t)})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Client To Client Communication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow wireless clients to communicate with each other"})]}),e.jsx(P,{checked:s.clientToClientCommunication,onCheckedChange:t=>{o("clientToClientCommunication",t),o("isolateClients",!t)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Clear Session on Disconnect"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Purge client session data when disconnected"})]}),e.jsx(P,{checked:s.purgeOnDisconnect,onCheckedChange:t=>o("purgeOnDisconnect",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{children:"Beacon Protection"}),e.jsxs(Ae,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(we,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsxs(Pe,{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium",children:"Beacon Protection (WPA3)"}),e.jsx("p",{className:"text-xs opacity-80",children:"Protects beacon frames from spoofing and tampering. Part of WPA3 security enhancements that prevents attackers from forging management frames."})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced WPA3 security feature for beacon frames"})]}),e.jsx(P,{checked:s.beaconProtection,onCheckedChange:t=>o("beaconProtection",t)})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Session Timeouts"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"pre-auth-idle-timeout",children:"Pre-Authenticated idle timeout (seconds)"}),e.jsx(B,{id:"pre-auth-idle-timeout",type:"number",value:s.preAuthenticatedIdleTimeout,onChange:t=>o("preAuthenticatedIdleTimeout",parseInt(t.target.value)||300),min:"0",max:"999999"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default: 300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"post-auth-idle-timeout",children:"Post-Authenticated idle timeout (seconds)"}),e.jsx(B,{id:"post-auth-idle-timeout",type:"number",value:s.postAuthenticatedIdleTimeout,onChange:t=>o("postAuthenticatedIdleTimeout",parseInt(t.target.value)||1800),min:"0",max:"999999"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default: 1800"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"max-session-duration",children:"Maximum session duration (seconds)"}),e.jsx(B,{id:"max-session-duration",type:"number",value:s.sessionTimeout,onChange:t=>o("sessionTimeout",parseInt(t.target.value)||0),min:"0",max:"999999"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"0 = unlimited"})]})]})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Additional Client Settings"}),e.jsx(V,{children:"Extra client communication and behavior settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Client Isolation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Prevent wireless client-to-client communication"})]}),e.jsx(P,{checked:s.isolateClients,onCheckedChange:t=>{o("isolateClients",t),o("clientToClientCommunication",!t)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Flexible Client Access"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dynamic client access control"})]}),e.jsx(P,{checked:s.flexibleClientAccess,onCheckedChange:t=>o("flexibleClientAccess",t)})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Roaming & Optimization"}),e.jsx(V,{children:"Client roaming and load distribution settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"roaming-policy",children:"Roaming Assist Policy"}),e.jsx(B,{id:"roaming-policy",value:s.roamingAssistPolicy,onChange:t=>o("roamingAssistPolicy",t.target.value),placeholder:"Roaming policy UUID (optional)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Advanced roaming optimization policy"})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Load Balancing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Distribute clients across APs"})]}),e.jsx(P,{checked:s.loadBalancing,onCheckedChange:t=>o("loadBalancing",t)})]})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"RADIUS Vendor-Specific Attributes"}),e.jsx(V,{children:"Customize RADIUS attributes sent with authentication"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Vendor Attributes (comma-separated)"}),e.jsx(B,{value:s.vendorSpecificAttributes.join(", "),onChange:t=>{const O=t.target.value.split(",").map(H=>H.trim()).filter(H=>H);o("vendorSpecificAttributes",O)},placeholder:"apName, vnsName, ssid, etc."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Common attributes: apName, vnsName, ssid, apMac, apLocation"})]}),e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Current attributes:"})," ",s.vendorSpecificAttributes.length>0?s.vendorSpecificAttributes.join(", "):"None"]})})]})]}),e.jsxs(W,{children:[e.jsxs(_,{children:[e.jsx(G,{className:"text-sm",children:"Mesh & Special Features"}),e.jsx(V,{children:"Mesh networking and advanced features"})]}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{children:"Shutdown on Meshpoint Loss"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Disable service if mesh backhaul is lost"})]}),e.jsx(P,{checked:s.shutdownOnMeshpointLoss,onCheckedChange:t=>o("shutdownOnMeshpointLoss",t)})]})})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:e.jsxs($,{onClick:U,disabled:z,className:"flex items-center space-x-2",children:[e.jsx(rs,{className:`h-4 w-4 ${z?"animate-spin":""}`}),e.jsx("span",{children:z?"Saving...":"Save Changes"})]})})]})}class Je{async createWLANWithAutoAssignment(i,l={}){console.log("[WLANAssignment] Starting auto-assignment workflow",{serviceData:i,options:l});try{console.log("[WLANAssignment] Step 1: Creating service...");const n={serviceName:i.serviceName||i.name,ssid:i.ssid,status:"enabled",suppressSsid:i.hidden||!1,canEdit:!0,canDelete:!0,proxied:"Local",shutdownOnMeshpointLoss:!1,dot1dPortNumber:i.vlan||99,privacy:null,enabled11kSupport:!1,rm11kBeaconReport:!1,rm11kQuietIe:!1,enable11mcSupport:!1,uapsdEnabled:!0,admissionControlVideo:!1,admissionControlVoice:!1,admissionControlBestEffort:!1,admissionControlBackgroundTraffic:!1,flexibleClientAccess:!1,mbaAuthorization:!1,accountingEnabled:!1,clientToClientCommunication:!0,includeHostname:!1,mbo:!1,oweAutogen:!1,oweCompanion:null,purgeOnDisconnect:!1,beaconProtection:!1,aaaPolicyId:null,mbatimeoutRoleId:null,roamingAssistPolicy:null,vendorSpecificAttributes:["apName","vnsName","ssid"],enableCaptivePortal:!1,captivePortalType:null,eGuestPortalId:null,eGuestSettings:[],preAuthenticatedIdleTimeout:300,postAuthenticatedIdleTimeout:1800,sessionTimeout:0,defaultTopology:"efd5f044-26c8-11e7-93ae-92361f002671",defaultCoS:"1eea4d66-2607-11e7-93ae-92361f002671",unAuthenticatedUserDefaultRoleID:i.authenticatedUserDefaultRoleID||null,authenticatedUserDefaultRoleID:i.authenticatedUserDefaultRoleID||null,cpNonAuthenticatedPolicyName:null,hotspotType:"Disabled",hotspot:null,dscp:{codePoints:[2,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,1,0,3,0,3,0,3,0,3,0,4,0,4,0,4,0,4,0,5,0,5,0,5,0,5,0,0,0,0,0,6,0,6,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0]},features:["CENTRALIZED-SITE"]};i.security==="wpa2-psk"&&i.passphrase?n.privacy={WpaPskElement:{mode:"aesOnly",pmfMode:"disabled",presharedKey:i.passphrase,keyHexEncoded:!1}}:i.security==="open"&&(n.privacy=null),i.description&&(n.description=i.description),console.log("[WLANAssignment] Service payload:",JSON.stringify(n));const c=await ee.createService(n);console.log("[WLANAssignment] Service created:",c.id),console.log("[WLANAssignment] Step 2: Discovering profiles for sites:",i.sites);const u=await this.discoverProfilesForSites(i.sites),h=Object.values(u).flat(),j=this.deduplicateProfiles(h);if(console.log("[WLANAssignment] Discovered profiles:",{totalProfiles:h.length,uniqueProfiles:j.length,deviceGroupsFound:Object.keys(u).length}),l.dryRun)return console.log("[WLANAssignment] Dry run mode - skipping assignment and sync"),{serviceId:c.id,sitesProcessed:i.sites.length,deviceGroupsFound:Object.keys(u).length,profilesAssigned:0,assignments:j.map(v=>({profileId:v.id,profileName:v.name||v.profileName||v.id,success:!0,error:"Dry run - not executed"})),success:!0};console.log("[WLANAssignment] Step 3: Assigning service to profiles...");const N=await this.assignToProfiles(c.id,j),g=N.filter(v=>v.success),C=N.filter(v=>!v.success);console.log("[WLANAssignment] Assignment results:",{successful:g.length,failed:C.length});let k;!l.skipSync&&g.length>0&&(console.log("[WLANAssignment] Step 4: Triggering profile sync..."),k=await this.syncProfiles(g.map(v=>v.profileId)),console.log("[WLANAssignment] Sync completed"));const E={serviceId:c.id,sitesProcessed:i.sites.length,deviceGroupsFound:Object.keys(u).length,profilesAssigned:g.length,assignments:N,syncResults:k,success:C.length===0,errors:C.length>0?[`${C.length} profile(s) failed to assign`]:void 0};return console.log("[WLANAssignment] Workflow completed:",E),E}catch(n){throw console.error("[WLANAssignment] Workflow failed:",n),n}}async discoverProfilesForSites(i){const l={};for(const n of i)try{console.log(`[WLANAssignment] Fetching device groups for site: ${n}`);const c=await ee.getDeviceGroupsBySite(n);console.log(`[WLANAssignment] Found ${c.length} device groups for site ${n}`);const u=[];for(const h of c)try{console.log(`[WLANAssignment] Fetching profiles for device group: ${h.id}`);const j=await ee.getProfilesByDeviceGroup(h.id),N=j.map(g=>({...g,deviceGroupId:h.id,siteName:n}));u.push(...N),console.log(`[WLANAssignment] Found ${j.length} profiles in group ${h.id}`)}catch(j){console.warn(`[WLANAssignment] Error fetching profiles for device group ${h.id}:`,j)}l[n]=u}catch(c){console.error(`[WLANAssignment] Error discovering profiles for site ${n}:`,c),l[n]=[]}return l}deduplicateProfiles(i){const l=new Map;for(const n of i)l.has(n.id)||l.set(n.id,n);return Array.from(l.values())}async assignToProfiles(i,l){const n=[];for(let u=0;u<l.length;u+=5){const h=l.slice(u,u+5),j=await Promise.all(h.map(async N=>{try{return await ee.assignServiceToProfile(i,N.id),{profileId:N.id,profileName:N.name||N.profileName||N.id,success:!0}}catch(g){return{profileId:N.id,profileName:N.name||N.profileName||N.id,success:!1,error:g instanceof Error?g.message:"Unknown error"}}}));n.push(...j)}return n}async syncProfiles(i){try{return await ee.syncMultipleProfiles(i),i.map(l=>({profileId:l,profileName:l,success:!0,syncTime:new Date().toISOString()}))}catch{return console.warn("[WLANAssignment] Batch sync failed, falling back to individual syncs"),Promise.all(i.map(async n=>{try{return await ee.syncProfile(n),{profileId:n,profileName:n,success:!0,syncTime:new Date().toISOString()}}catch(c){return{profileId:n,profileName:n,success:!1,error:c instanceof Error?c.message:"Unknown error"}}}))}}async previewProfilesForSites(i){const l=await this.discoverProfilesForSites(i),n=Object.values(l).flat();return this.deduplicateProfiles(n)}async createWLANWithSiteCentricDeployment(i,l,n={}){console.log("[WLANAssignment] Starting site-centric deployment workflow",{serviceData:i,siteAssignments:l,options:n});const{assignmentStorageService:c}=await qe(async()=>{const{assignmentStorageService:h}=await import("./assignmentStorage-CCeSXJMB.js");return{assignmentStorageService:h}},[]),{effectiveSetCalculator:u}=await qe(async()=>{const{effectiveSetCalculator:h}=await Promise.resolve().then(()=>xt);return{effectiveSetCalculator:h}},void 0);try{console.log("[WLANAssignment] Step 1: Validating site assignments...");for(const s of l){const R=u.validateSiteAssignment(s);if(!R.valid)throw new Error(`Invalid site assignment for ${s.siteName}: ${R.errors.join(", ")}`)}console.log("[WLANAssignment] Step 2: Discovering profiles for sites...");const h=l.map(s=>s.siteId),j=await this.discoverProfilesForSites(h);console.log("[WLANAssignment] Step 3: Calculating effective profile sets...");const N=new Map;for(const[s,R]of Object.entries(j))N.set(s,R);const g=u.calculateMultipleEffectiveSets(l,N),C=u.mergeEffectiveSets(g);if(console.log("[WLANAssignment] Effective profile sets calculated:",{sites:g.length,totalProfiles:C.length}),n.dryRun)return console.log("[WLANAssignment] Dry run mode - skipping actual deployment"),{serviceId:"dry-run",sitesProcessed:l.length,deviceGroupsFound:0,profilesAssigned:0,assignments:C.map(s=>({profileId:s.id,profileName:s.name||s.profileName||s.id,success:!0,error:"Dry run - not executed"})),success:!0};console.log("[WLANAssignment] Step 4: Creating service...");const k={serviceName:i.serviceName||i.name,ssid:i.ssid,status:"enabled",suppressSsid:i.hidden||!1,canEdit:!0,canDelete:!0,proxied:"Local",shutdownOnMeshpointLoss:!1,dot1dPortNumber:i.vlan||99,privacy:null,enabled11kSupport:!1,rm11kBeaconReport:!1,rm11kQuietIe:!1,enable11mcSupport:!1,uapsdEnabled:!0,admissionControlVideo:!1,admissionControlVoice:!1,admissionControlBestEffort:!1,admissionControlBackgroundTraffic:!1,flexibleClientAccess:!1,mbaAuthorization:!1,accountingEnabled:!1,clientToClientCommunication:!0,includeHostname:!1,mbo:!1,oweAutogen:!1,oweCompanion:null,purgeOnDisconnect:!1,beaconProtection:!1,aaaPolicyId:null,mbatimeoutRoleId:null,roamingAssistPolicy:null,vendorSpecificAttributes:["apName","vnsName","ssid"],enableCaptivePortal:!1,captivePortalType:null,eGuestPortalId:null,eGuestSettings:[],preAuthenticatedIdleTimeout:300,postAuthenticatedIdleTimeout:1800,sessionTimeout:0,defaultTopology:"efd5f044-26c8-11e7-93ae-92361f002671",defaultCoS:"1eea4d66-2607-11e7-93ae-92361f002671",unAuthenticatedUserDefaultRoleID:i.authenticatedUserDefaultRoleID||null,authenticatedUserDefaultRoleID:i.authenticatedUserDefaultRoleID||null,cpNonAuthenticatedPolicyName:null,hotspotType:"Disabled",hotspot:null,dscp:{codePoints:[2,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,1,0,3,0,3,0,3,0,3,0,4,0,4,0,4,0,4,0,5,0,5,0,5,0,5,0,0,0,0,0,6,0,6,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0]},features:["CENTRALIZED-SITE"]};i.security==="wpa2-psk"&&i.passphrase?k.privacy={WpaPskElement:{mode:"aesOnly",pmfMode:"disabled",presharedKey:i.passphrase,keyHexEncoded:!1}}:i.security==="open"&&(k.privacy=null),i.description&&(k.description=i.description),console.log("[WLANAssignment] Service payload:",JSON.stringify(k));const E=await ee.createService(k),v=E.id,D=E.serviceName||E.name||E.ssid||v;console.log("[WLANAssignment] Service created:",{wlanId:v,wlanName:D}),console.log("[WLANAssignment] Step 5: Assigning service to profiles...");const z=await this.assignToProfiles(v,C),F=z.filter(s=>s.success),I=z.filter(s=>!s.success);console.log("[WLANAssignment] Assignment results:",{successful:F.length,failed:I.length}),console.log("[WLANAssignment] Step 6: Saving assignment tracking data...");for(const s of l)c.saveWLANSiteAssignment({wlanId:v,wlanName:D,siteId:s.siteId,siteName:s.siteName,deploymentMode:s.deploymentMode,includedProfiles:s.includedProfiles||[],excludedProfiles:s.excludedProfiles||[],createdAt:new Date().toISOString(),lastModified:new Date().toISOString()});const q=C.map(s=>{const R=z.find(U=>U.profileId===s.id),S=l.find(U=>(j[U.siteId]||[]).some(t=>t.id===s.id));return{wlanId:v,wlanName:D,profileId:s.id,profileName:s.name||s.profileName||s.id,siteId:S?.siteId||"",siteName:S?.siteName||"",source:"SITE_PROPAGATION",expectedState:"ASSIGNED",actualState:R?.success?"ASSIGNED":"UNKNOWN",mismatch:null,lastReconciled:new Date().toISOString(),syncStatus:"PENDING"}});c.saveWLANProfileAssignmentsBatch(q);let te;if(!n.skipSync&&F.length>0){console.log("[WLANAssignment] Step 7: Triggering profile sync..."),te=await this.syncProfiles(F.map(s=>s.profileId));for(const s of te)c.updateProfileAssignmentSyncStatus(v,s.profileId,s.success?"SYNCED":"FAILED",s.error);console.log("[WLANAssignment] Sync completed")}const ae={serviceId:v,sitesProcessed:l.length,deviceGroupsFound:Object.keys(j).length,profilesAssigned:F.length,assignments:z,syncResults:te,success:I.length===0,errors:I.length>0?[`${I.length} profile(s) failed to assign`]:void 0};return console.log("[WLANAssignment] Site-centric deployment completed:",ae),ae}catch(h){throw console.error("[WLANAssignment] Site-centric deployment failed:",h),h}}}class ht{calculateEffectiveSet(i,l){console.log("[EffectiveSetCalculator] Calculating effective set:",{siteId:i.siteId,mode:i.deploymentMode,totalProfiles:l.length});const{deploymentMode:n,includedProfiles:c,excludedProfiles:u}=i;let h=[],j=[];switch(n){case"ALL_PROFILES_AT_SITE":h=[...l],j=[];break;case"INCLUDE_ONLY":h=l.filter(N=>c.includes(N.id)),j=l.filter(N=>!c.includes(N.id));break;case"EXCLUDE_SOME":h=l.filter(N=>!u.includes(N.id)),j=l.filter(N=>u.includes(N.id));break;default:console.warn(`[EffectiveSetCalculator] Unknown deployment mode: ${n}`),h=[...l],j=[]}return console.log("[EffectiveSetCalculator] Result:",{selected:h.length,excluded:j.length}),{siteId:i.siteId,siteName:i.siteName,deploymentMode:n,allProfiles:l,selectedProfiles:h,excludedProfiles:j}}calculateMultipleEffectiveSets(i,l){return i.map(n=>{const c=l.get(n.siteId)||[];return this.calculateEffectiveSet(n,c)})}mergeEffectiveSets(i){const l=new Map;for(const n of i)for(const c of n.selectedProfiles)l.has(c.id)||l.set(c.id,c);return Array.from(l.values())}validateSiteAssignment(i){const l=[],{deploymentMode:n,includedProfiles:c,excludedProfiles:u}=i;return["ALL_PROFILES_AT_SITE","INCLUDE_ONLY","EXCLUDE_SOME"].includes(n)||l.push(`Invalid deployment mode: ${n}`),n==="INCLUDE_ONLY"&&((!c||c.length===0)&&l.push("INCLUDE_ONLY mode requires at least one profile to be included"),u&&u.length>0&&l.push("INCLUDE_ONLY mode should not have excluded profiles")),n==="EXCLUDE_SOME"&&((!u||u.length===0)&&l.push("EXCLUDE_SOME mode requires at least one profile to be excluded"),c&&c.length>0&&l.push("EXCLUDE_SOME mode should not have included profiles")),n==="ALL_PROFILES_AT_SITE"&&(c&&c.length>0&&l.push("ALL_PROFILES_AT_SITE mode should not have included profiles"),u&&u.length>0&&l.push("ALL_PROFILES_AT_SITE mode should not have excluded profiles")),c&&c.length>0&&new Set(c).size!==c.length&&l.push("Included profiles list contains duplicates"),u&&u.length>0&&new Set(u).size!==u.length&&l.push("Excluded profiles list contains duplicates"),{valid:l.length===0,errors:l}}getSummary(i){const l=i.allProfiles.length,n=i.selectedProfiles.length,c=i.excludedProfiles.length,u=l>0?Math.round(n/l*100):0;return{total:l,assigned:n,excluded:c,assignedPercent:u}}getDeploymentModeDescription(i){switch(i){case"ALL_PROFILES_AT_SITE":return"Assign to all profiles at this site";case"INCLUDE_ONLY":return"Assign to specific profiles only";case"EXCLUDE_SOME":return"Assign to all profiles except selected ones";default:return"Unknown deployment mode"}}isProfileInEffectiveSet(i,l){return l.selectedProfiles.some(n=>n.id===i)}getExplicitSelections(i){return i.deploymentMode==="ALL_PROFILES_AT_SITE"?{explicitlySelected:[],explicitlyExcluded:[]}:{explicitlySelected:i.selectedProfiles,explicitlyExcluded:i.excludedProfiles}}}const Ne=new ht,xt=Object.freeze(Object.defineProperty({__proto__:null,effectiveSetCalculator:Ne},Symbol.toStringTag,{value:"Module"}));var ze="Radio",[ft,ms]=es(ze),[jt,gt]=ft(ze),ps=f.forwardRef((a,i)=>{const{__scopeRadio:l,name:n,checked:c=!1,required:u,disabled:h,value:j="on",onCheck:N,form:g,...C}=a,[k,E]=f.useState(null),v=Ue(i,F=>E(F)),D=f.useRef(!1),z=k?g||!!k.closest("form"):!0;return e.jsxs(jt,{scope:l,checked:c,disabled:h,children:[e.jsx(We.button,{type:"button",role:"radio","aria-checked":c,"data-state":js(c),"data-disabled":h?"":void 0,disabled:h,value:j,...C,ref:v,onClick:Oe(a.onClick,F=>{c||N?.(),z&&(D.current=F.isPropagationStopped(),D.current||F.stopPropagation())})}),z&&e.jsx(fs,{control:k,bubbles:!D.current,name:n,value:j,checked:c,required:u,disabled:h,form:g,style:{transform:"translateX(-100%)"}})]})});ps.displayName=ze;var hs="RadioIndicator",xs=f.forwardRef((a,i)=>{const{__scopeRadio:l,forceMount:n,...c}=a,u=gt(hs,l);return e.jsx(_s,{present:n||u.checked,children:e.jsx(We.span,{"data-state":js(u.checked),"data-disabled":u.disabled?"":void 0,...c,ref:i})})});xs.displayName=hs;var Nt="RadioBubbleInput",fs=f.forwardRef(({__scopeRadio:a,control:i,checked:l,bubbles:n=!0,...c},u)=>{const h=f.useRef(null),j=Ue(h,u),N=Us(l),g=Gs(i);return f.useEffect(()=>{const C=h.current;if(!C)return;const k=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(k,"checked").set;if(N!==l&&v){const D=new Event("click",{bubbles:n});v.call(C,l),C.dispatchEvent(D)}},[N,l,n]),e.jsx(We.input,{type:"radio","aria-hidden":!0,defaultChecked:l,...c,tabIndex:-1,ref:j,style:{...c.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});fs.displayName=Nt;function js(a){return a?"checked":"unchecked"}var yt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Le="RadioGroup",[vt]=es(Le,[Ze,ms]),gs=Ze(),Ns=ms(),[St,bt]=vt(Le),ys=f.forwardRef((a,i)=>{const{__scopeRadioGroup:l,name:n,defaultValue:c,value:u,required:h=!1,disabled:j=!1,orientation:N,dir:g,loop:C=!0,onValueChange:k,...E}=a,v=gs(l),D=Os(g),[z,F]=Ms({prop:u,defaultProp:c??null,onChange:k,caller:Le});return e.jsx(St,{scope:l,name:n,required:h,disabled:j,value:z,onValueChange:F,children:e.jsx(Fs,{asChild:!0,...v,orientation:N,dir:D,loop:C,children:e.jsx(We.div,{role:"radiogroup","aria-required":h,"aria-orientation":N,"data-disabled":j?"":void 0,dir:D,...E,ref:i})})})});ys.displayName=Le;var vs="RadioGroupItem",Ss=f.forwardRef((a,i)=>{const{__scopeRadioGroup:l,disabled:n,...c}=a,u=bt(vs,l),h=u.disabled||n,j=gs(l),N=Ns(l),g=f.useRef(null),C=Ue(i,g),k=u.value===c.value,E=f.useRef(!1);return f.useEffect(()=>{const v=z=>{yt.includes(z.key)&&(E.current=!0)},D=()=>E.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",D),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",D)}},[]),e.jsx(Bs,{asChild:!0,...j,focusable:!h,active:k,children:e.jsx(ps,{disabled:h,required:u.required,checked:k,...N,...c,name:u.name,ref:C,onCheck:()=>u.onValueChange(c.value),onKeyDown:Oe(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:Oe(c.onFocus,()=>{E.current&&g.current?.click()})})})});Ss.displayName=vs;var At="RadioGroupIndicator",bs=f.forwardRef((a,i)=>{const{__scopeRadioGroup:l,...n}=a,c=Ns(l);return e.jsx(xs,{...c,...n,ref:i})});bs.displayName=At;var Ct=ys,Pt=Ss,wt=bs;function Et({className:a,...i}){return e.jsx(Ct,{"data-slot":"radio-group",className:as("grid gap-3",a),...i})}function Re({className:a,...i}){return e.jsx(Pt,{"data-slot":"radio-group-item",className:as("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:e.jsx(wt,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(Xs,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function kt({siteName:a,siteId:i,profileCount:l,selectedMode:n,onModeChange:c,onConfigureProfiles:u,selectedProfilesCount:h=0,excludedProfilesCount:j=0}){const N=()=>{switch(n){case"ALL_PROFILES_AT_SITE":return l;case"INCLUDE_ONLY":return h;case"EXCLUDE_SOME":return l-j;default:return 0}},g=n==="INCLUDE_ONLY"&&h===0||n==="EXCLUDE_SOME"&&j===0;return e.jsxs(W,{className:"border-l-4 border-l-primary",children:[e.jsxs(_,{className:"pb-3",children:[e.jsxs(G,{className:"text-base flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),a]}),e.jsxs(V,{className:"text-xs",children:[l," profile",l!==1?"s":""," available"]})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs(Et,{value:n,onValueChange:C=>c(C),children:[e.jsxs("div",{className:"flex items-start space-x-3 space-y-0",children:[e.jsx(Re,{value:"ALL_PROFILES_AT_SITE",id:`all-${i}`}),e.jsxs(m,{htmlFor:`all-${i}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:"All Profiles at Site"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["WLAN will be assigned to all ",l," profile",l!==1?"s":""," at this site"]})]}),n==="ALL_PROFILES_AT_SITE"&&e.jsxs(se,{variant:"default",className:"gap-1",children:[e.jsx(je,{className:"h-3 w-3"}),"All"]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-y-0",children:[e.jsx(Re,{value:"INCLUDE_ONLY",id:`include-${i}`}),e.jsxs(m,{htmlFor:`include-${i}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:"Specific Profiles Only"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Select which profiles should receive this WLAN"})]}),n==="INCLUDE_ONLY"&&e.jsxs(se,{variant:"secondary",className:"gap-1",children:[e.jsx(Te,{className:"h-3 w-3"}),h," selected"]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-y-0",children:[e.jsx(Re,{value:"EXCLUDE_SOME",id:`exclude-${i}`}),e.jsxs(m,{htmlFor:`exclude-${i}`,className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:"All Except Selected"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Assign to all profiles except selected ones"})]}),n==="EXCLUDE_SOME"&&e.jsxs(se,{variant:"outline",className:"gap-1",children:[e.jsx($e,{className:"h-3 w-3"}),j," excluded"]})]})]}),(n==="INCLUDE_ONLY"||n==="EXCLUDE_SOME")&&u&&e.jsx("div",{className:"pt-2 border-t",children:e.jsx($,{variant:g?"default":"outline",size:"sm",onClick:u,className:"w-full",children:g?e.jsx(e.Fragment,{children:"Configure Profiles"}):e.jsx(e.Fragment,{children:"Change Selection"})})}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Profiles to receive WLAN:"}),e.jsxs(se,{variant:N()>0?"default":"secondary",className:"gap-1",children:[e.jsx(je,{className:"h-3 w-3"}),N()," of ",l]})]})]})]})}function It({open:a,onOpenChange:i,mode:l,profiles:n,siteName:c,selectedProfileIds:u,onConfirm:h}){const[j,N]=f.useState(""),[g,C]=f.useState(new Set(u)),k=n.filter(s=>(s.name||s.profileName||s.id).toLowerCase().includes(j.toLowerCase())),E=s=>{const R=new Set(g);R.has(s)?R.delete(s):R.add(s),C(R)},v=()=>{C(new Set(k.map(s=>s.id)))},D=()=>{C(new Set)},z=()=>{h(Array.from(g)),i(!1)},F=()=>{C(new Set(u)),i(!1)},I=()=>l==="INCLUDE_ONLY"?"Select Profiles to Include":"Select Profiles to Exclude",q=()=>l==="INCLUDE_ONLY"?"WLAN will be assigned only to the selected profiles":"WLAN will be assigned to all profiles except the selected ones",te=()=>{const s=g.size;return l==="INCLUDE_ONLY"?s===0?"Select at least one profile":`Include ${s} Profile${s!==1?"s":""}`:s===0?"Exclude None (Assign to All)":`Exclude ${s} Profile${s!==1?"s":""}`},ae=l==="INCLUDE_ONLY"?g.size>0:!0;return e.jsx(ns,{isOpen:a,onClose:()=>i(!1),title:I(),description:`${q()} at ${c}`,width:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(B,{placeholder:"Search profiles...",value:j,onChange:s=>N(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:v,disabled:k.length===0,children:["Select All (",k.length,")"]}),e.jsx($,{variant:"outline",size:"sm",onClick:D,disabled:g.size===0,children:"Clear All"})]}),e.jsxs(se,{variant:g.size>0?"default":"secondary",className:"gap-1",children:[l==="INCLUDE_ONLY"?e.jsx(je,{className:"h-3 w-3"}):e.jsx($e,{className:"h-3 w-3"}),g.size," of ",n.length]})]}),e.jsx(is,{className:"h-[300px] border rounded-md",children:k.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:j?"No profiles match your search":"No profiles available"}):e.jsx("div",{className:"p-4 space-y-2",children:k.map(s=>{const R=g.has(s.id),S=s.name||s.profileName||s.id;return e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg border transition-colors cursor-pointer hover:bg-accent ${R?"bg-accent border-primary":"border-border"}`,onClick:()=>E(s.id),children:[e.jsx(Me,{checked:R,onCheckedChange:()=>E(s.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:S}),s.deviceGroupId&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Device Group: ",s.deviceGroupId]})]}),R&&e.jsx(se,{variant:l==="INCLUDE_ONLY"?"default":"destructive",className:"text-xs",children:l==="INCLUDE_ONLY"?"Included":"Excluded"})]},s.id)})})}),e.jsxs("div",{className:"flex gap-2 pt-6 border-t mt-6",children:[e.jsx($,{variant:"outline",onClick:F,className:"flex-1",children:"Cancel"}),e.jsx($,{onClick:z,disabled:!ae,className:"flex-1",children:te()})]})]})})}function Tt({effectiveSets:a,className:i}){const l=a.reduce((h,j)=>h+j.allProfiles.length,0);a.reduce((h,j)=>h+j.selectedProfiles.length,0);const n=a.reduce((h,j)=>h+j.excludedProfiles.length,0),u=Ne.mergeEffectiveSets(a).length;return a.length===0?e.jsx(W,{className:i,children:e.jsxs(L,{className:"py-8 text-center text-muted-foreground",children:[e.jsx(Ge,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Select sites to see deployment preview"})]})}):e.jsxs(W,{className:i,children:[e.jsxs(_,{children:[e.jsxs(G,{className:"text-base flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Deployment Preview"]}),e.jsx(V,{className:"text-xs",children:"WLAN will be assigned to these profiles"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-secondary/10 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold",children:u}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Will Receive"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:n}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Will NOT Receive"})]}),e.jsxs("div",{className:"text-center p-3 bg-accent rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold",children:l}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Profiles"})]})]}),e.jsx(is,{className:"max-h-[300px]",children:e.jsx("div",{className:"space-y-3",children:a.map(h=>{const j=Ne.getSummary(h),N=Ne.getDeploymentModeDescription(h.deploymentMode);return e.jsxs(W,{className:"border-l-4 border-l-primary/50",children:[e.jsxs(_,{className:"pb-2",children:[e.jsxs(G,{className:"text-sm flex items-center gap-2",children:[e.jsx(Ve,{className:"h-3 w-3"}),h.siteName]}),e.jsx(V,{className:"text-xs",children:N})]}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Coverage"}),e.jsxs("span",{className:"font-medium",children:[j.assignedPercent,"%"]})]}),e.jsx("div",{className:"h-2 bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${j.assignedPercent}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs(se,{variant:"default",className:"gap-1",children:[e.jsx(je,{className:"h-3 w-3"}),j.assigned," Assigned"]}),j.excluded>0&&e.jsxs(se,{variant:"outline",className:"gap-1",children:[e.jsx($e,{className:"h-3 w-3"}),j.excluded," Excluded"]})]}),h.selectedProfiles.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Profiles:"}),e.jsxs("div",{className:"space-y-1",children:[h.selectedProfiles.slice(0,3).map(g=>e.jsxs("div",{className:"text-xs flex items-center gap-1 text-muted-foreground",children:[e.jsx(je,{className:"h-3 w-3 text-green-600"}),g.name||g.profileName||g.id]},g.id)),h.selectedProfiles.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground pl-4",children:["+",h.selectedProfiles.length-3," more"]})]})]})]})]},h.siteId)})})}),e.jsxs("div",{className:"pt-3 border-t flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Profiles to Receive WLAN:"}),e.jsxs(se,{variant:"default",className:"gap-1",children:[e.jsx(je,{className:"h-3 w-3"}),u]})]})]})]})}function Wt({open:a,onOpenChange:i,sites:l,siteGroups:n,onSave:c}){const[u,h]=f.useState([]),[j,N]=f.useState(null),[g,C]=f.useState(""),[k,E]=f.useState(""),[v,D]=f.useState([]),[z,F]=f.useState(!1);f.useEffect(()=>{a&&(h([...n]),F(!1),N(null))},[a,n]);const I=()=>{if(!g.trim()){K.error("Group name is required");return}if(v.length===0){K.error("Please select at least one site");return}const S={id:`group_${Date.now()}`,name:g,description:k||void 0,siteIds:v,createdAt:new Date().toISOString(),lastModified:new Date().toISOString(),color:s()};h([...u,S]),C(""),E(""),D([]),F(!1),K.success(`Site group "${g}" created`)},q=S=>{const U=u.find(o=>o.id===S);h(u.filter(o=>o.id!==S)),K.success(`Site group "${U?.name}" deleted`)},te=S=>{D(U=>U.includes(S)?U.filter(o=>o!==S):[...U,S])},ae=()=>{c(u),i(!1),K.success(`${u.length} site group(s) saved`)},s=()=>{const S=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4"];return S[Math.floor(Math.random()*S.length)]},R=S=>{const U=l.find(o=>o.id===S);return U?.name||U?.siteName||S};return e.jsx(ns,{isOpen:a,onClose:()=>i(!1),title:"Manage Site Groups",description:"Create and manage site groups for easier WLAN deployment at scale",width:"xl",children:e.jsxs("div",{className:"space-y-4",children:[z?e.jsx(W,{className:"border-primary",children:e.jsxs(L,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Create New Site Group"}),e.jsx($,{variant:"ghost",size:"sm",onClick:()=>{F(!1),C(""),E(""),D([])},children:e.jsx(Qs,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"groupName",children:"Group Name"}),e.jsx(B,{id:"groupName",value:g,onChange:S=>C(S.target.value),placeholder:"e.g., East Coast Sites, Production Sites..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"groupDescription",children:"Description (Optional)"}),e.jsx(B,{id:"groupDescription",value:k,onChange:S=>E(S.target.value),placeholder:"Brief description of this group..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{children:["Select Sites (",v.length," selected)"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-1",children:l.map(S=>e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded cursor-pointer hover:bg-accent ${v.includes(S.id)?"bg-primary/10":""}`,onClick:()=>te(S.id),children:[e.jsx("input",{type:"checkbox",checked:v.includes(S.id),onChange:()=>{},className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:R(S.id)})]},S.id))})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs($,{onClick:I,className:"flex-1",children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Create Group"]})})]})}):e.jsxs($,{onClick:()=>F(!0),className:"w-full",variant:"outline",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Create New Site Group"]}),e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Be,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No site groups yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Create groups to organize sites for easier WLAN deployment"})]}):u.map(S=>e.jsx(W,{children:e.jsxs(L,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S.color}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:S.name}),S.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:S.description})]})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx($,{variant:"ghost",size:"sm",onClick:()=>q(S.id),children:e.jsx(ds,{className:"h-4 w-4 text-destructive"})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsxs(se,{variant:"secondary",className:"text-xs",children:[S.siteIds.length," ",S.siteIds.length===1?"site":"sites"]}),S.siteIds.slice(0,5).map(U=>e.jsx(se,{variant:"outline",className:"text-xs",children:R(U)},U)),S.siteIds.length>5&&e.jsxs(se,{variant:"outline",className:"text-xs",children:["+",S.siteIds.length-5," more"]})]})]})},S.id))}),e.jsxs("div",{className:"flex gap-2 pt-6 border-t mt-6",children:[e.jsx($,{variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"}),e.jsx($,{onClick:ae,className:"flex-1",children:"Save Groups"})]})]})})}function Lt({open:a,onOpenChange:i,onSuccess:l}){const[n,c]=f.useState({serviceName:"",ssid:"",security:"wpa2-psk",passphrase:"",vlan:1,band:"dual",enabled:!0,selectedSites:[],selectedSiteGroups:[],authenticatedUserDefaultRoleID:null,hidden:!1,maxClients:void 0,description:""}),[u,h]=f.useState([]),[j,N]=f.useState(!1),[g,C]=f.useState([]),[k,E]=f.useState(!1),[v,D]=f.useState([]),[z,F]=f.useState(!1),[I,q]=f.useState(new Map),[te,ae]=f.useState(new Map),[s,R]=f.useState(!1),[S,U]=f.useState(!1),[o,t]=f.useState(null),[O,H]=f.useState([]),[ie,le]=f.useState(!1),[d,x]=f.useState({x:0,y:0}),[w,b]=f.useState(!1),[T,M]=f.useState({x:0,y:0}),Z=f.useRef(null),[pe,he]=f.useState(!1);f.useEffect(()=>{const r=localStorage.getItem("siteGroups");if(r)try{C(JSON.parse(r))}catch(A){console.error("Failed to load site groups:",A)}},[]),f.useEffect(()=>{a&&(Ke(),De(),c({serviceName:"",ssid:"",security:"wpa2-psk",passphrase:"",vlan:null,band:"dual",enabled:!0,selectedSites:[],selectedSiteGroups:[],authenticatedUserDefaultRoleID:null}),q(new Map),ae(new Map),H([]),x({x:0,y:0}))},[a]);const Ee=r=>{r.target.closest("[data-drag-handle]")&&(b(!0),M({x:r.clientX-d.x,y:r.clientY-d.y}))};f.useEffect(()=>{const r=y=>{w&&x({x:y.clientX-T.x,y:y.clientY-T.y})},A=()=>{b(!1)};if(w)return document.addEventListener("mousemove",r),document.addEventListener("mouseup",A),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",A)}},[w,T]),f.useEffect(()=>{const r=ge();r.length>0?As(r):(ae(new Map),H([]))},[n.selectedSites,n.selectedSiteGroups]),f.useEffect(()=>{I.size>0&&Cs()},[I,te]);const Ke=async()=>{N(!0);try{const r=await ee.getSites();h(r)}catch(r){console.error("Failed to load sites:",r),K.error("Failed to load sites")}finally{N(!1)}},De=async()=>{F(!0);try{const r=await ee.getRoles();D(r);const A=r.find(y=>y.name?.toLowerCase()==="bridged");A&&(c(y=>({...y,authenticatedUserDefaultRoleID:A.id})),console.log('[CreateWLAN] Auto-selected "bridged" role:',A.id))}catch(r){console.error("Failed to load roles:",r)}finally{F(!1)}},As=async r=>{const A=r||n.selectedSites;if(console.log("=== PROFILE DISCOVERY START ==="),console.log("Selected sites to discover:",A),A.length===0){console.warn(" No sites to discover profiles for");return}R(!0);try{const y=new Je;console.log("Calling discoverProfilesForSites...");const ne=await y.discoverProfilesForSites(A);console.log("Profile Map Received:",ne);const ye=new Map,de=new Map(I);let ue=0;for(const re of A){const xe=ne[re]||[];if(ue+=xe.length,console.log(`Site ${re}: Found ${xe.length} profiles`,xe),xe.length===0&&console.warn(` No profiles found for site ${re}. This site may not have device groups or profiles configured.`),ye.set(re,xe),de.has(re)){const ve=de.get(re);de.set(re,{...ve,profiles:xe}),console.log(`Updated existing site config for ${re}:`,{...ve,profiles:xe})}else{const ve=u.find(Rs=>Rs.id===re),He={siteId:re,siteName:ve?.name||ve?.siteName||re,deploymentMode:"ALL_PROFILES_AT_SITE",includedProfiles:[],excludedProfiles:[],profiles:xe};console.log(`Creating new site config for ${re}:`,He),de.set(re,He)}}ae(ye),q(de),ue===0?(console.error(` No profiles found across ${A.length} site(s)`),K.warning("No Profiles Found",{description:"No profiles were discovered at the selected site(s). Please ensure the site(s) have device groups with profiles configured."})):console.log(` Discovered ${ue} total profiles across ${A.length} sites`),console.log("Final site configs:",Array.from(de.entries())),console.log("=== PROFILE DISCOVERY END ===")}catch(y){console.error(" Failed to discover profiles:",y),console.error("Error details:",y),K.error("Failed to discover profiles",{description:y instanceof Error?y.message:"Unknown error"})}finally{R(!1)}},Cs=()=>{const r=[];for(const A of I.values()){const y=Ne.calculateEffectiveSet(A,A.profiles);r.push(y)}H(r)},ge=()=>{const r=n.selectedSiteGroups.flatMap(A=>g.find(ne=>ne.id===A)?.siteIds||[]);return[...new Set([...n.selectedSites,...r])]},Ps=r=>{C(r),localStorage.setItem("siteGroups",JSON.stringify(r))},ws=r=>{if(c(A=>({...A,selectedSites:A.selectedSites.includes(r)?A.selectedSites.filter(y=>y!==r):[...A.selectedSites,r]})),n.selectedSites.includes(r)){const A=new Map(I);A.delete(r),q(A)}},Es=r=>{c(A=>({...A,selectedSiteGroups:A.selectedSiteGroups.includes(r)?A.selectedSiteGroups.filter(y=>y!==r):[...A.selectedSiteGroups,r]}))},ks=(r,A)=>{const y=I.get(r);if(!y)return;const ne=new Map(I);ne.set(r,{...y,deploymentMode:A,includedProfiles:A==="INCLUDE_ONLY"?y.includedProfiles:[],excludedProfiles:A==="EXCLUDE_SOME"?y.excludedProfiles:[]}),q(ne)},Is=(r,A)=>{const y=I.get(r);y&&(t({siteId:r,siteName:y.siteName,mode:A}),U(!0))},Ts=r=>{if(!o)return;const A=I.get(o.siteId);if(!A)return;const y=new Map(I);o.mode==="INCLUDE_ONLY"?y.set(o.siteId,{...A,includedProfiles:r,excludedProfiles:[]}):y.set(o.siteId,{...A,includedProfiles:[],excludedProfiles:r}),q(y)},Ws=()=>!(!n.serviceName?.trim()||!n.ssid?.trim()||!n.security||!n.band||n.security!=="open"&&!n.passphrase?.trim()||ge().length===0),Ls=async()=>{console.log("=== WLAN CREATION DEBUG START ==="),console.log("1. Form Data:",n),console.log("2. Selected Sites:",n.selectedSites),console.log("3. Site Configs:",Array.from(I.entries())),console.log("4. Profiles By Site:",Array.from(te.entries())),console.log("5. Effective Sets:",O);const r=[];if(n.serviceName?.trim()||r.push("Service Name is required"),n.ssid?.trim()||r.push("SSID is required"),n.security||r.push("Security type is required"),n.band||r.push("Band is required"),n.security!=="open"&&!n.passphrase?.trim()&&r.push("Passphrase is required for secured networks"),ge().length===0&&r.push("At least one site or site group must be selected"),r.length>0){K.error("Please fix the following errors:",{description:r.join(`
 `),duration:5e3});return}if(console.log("6. Validation passed, site configs count:",I.size),I.size===0){K.error("No site configurations found",{description:"Please wait for profile discovery to complete before creating the WLAN"});return}for(const y of I.values()){if(console.log("7. Validating config for site:",y.siteName,y),!y.profiles||y.profiles.length===0){K.error(`No profiles found at site "${y.siteName}"`,{description:"Cannot deploy WLAN to a site with no profiles. Please check if this site has device groups with profiles configured."});return}const ne=Ne.validateSiteAssignment(y);if(console.log("8. Validation result:",ne),!ne.valid){K.error(`Invalid configuration for ${y.siteName}`,{description:ne.errors.join(", ")});return}}le(!0);try{const y=new Je,ne=ge(),ye=Array.from(I.values()).map(ue=>({siteId:ue.siteId,siteName:ue.siteName,deploymentMode:ue.deploymentMode,includedProfiles:ue.includedProfiles,excludedProfiles:ue.excludedProfiles}));console.log("9. Site Assignments Prepared:",ye),console.log("10. Expanded Sites (from groups + individual):",ne),console.log("11. Calling createWLANWithSiteCentricDeployment...");const de=await y.createWLANWithSiteCentricDeployment({name:n.serviceName,serviceName:n.serviceName,ssid:n.ssid,security:n.security,passphrase:n.passphrase||void 0,vlan:n.vlan||void 0,band:n.band,enabled:n.enabled,sites:ne,authenticatedUserDefaultRoleID:n.authenticatedUserDefaultRoleID||void 0,hidden:n.hidden||void 0,maxClients:n.maxClients||void 0,description:n.description||void 0},ye);console.log("11. WLAN Creation Result:",de),console.log("=== WLAN CREATION DEBUG END ==="),K.success("WLAN Created Successfully",{description:`Assigned to ${de.profilesAssigned} profile(s) across ${de.sitesProcessed} site(s)`}),l(de),i(!1)}catch(y){console.error("!!! WLAN Creation Failed:",y),console.error("Error details:",{message:y instanceof Error?y.message:"Unknown error",stack:y instanceof Error?y.stack:void 0,error:y}),K.error("Failed to create WLAN",{description:y instanceof Error?y.message:"Unknown error"})}finally{le(!1)}},Ds=Ws();return e.jsxs(e.Fragment,{children:[e.jsx(nt,{open:a,onOpenChange:i,children:e.jsxs(it,{ref:Z,className:"max-w-7xl w-[95vw] h-[90vh] p-0 flex flex-col overflow-hidden pointer-events-auto resize",style:{position:"fixed",left:"50%",top:"50%",transform:`translate(calc(-50% + ${d.x}px), calc(-50% + ${d.y}px))`,cursor:w?"grabbing":"auto",minWidth:"800px",minHeight:"500px",maxHeight:"90vh"},onMouseDown:Ee,children:[e.jsxs(lt,{className:"px-6 py-4 border-b","data-drag-handle":!0,style:{cursor:"grab"},children:[e.jsxs(rt,{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(ls,{className:"h-5 w-5"}),"Create Wireless Network"]}),e.jsx(ot,{children:"Configure a new WLAN with site-centric deployment (drag to move)"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto hide-scrollbar px-6 py-6 space-y-6",children:[e.jsxs(W,{children:[e.jsxs(_,{className:"pb-2",children:[e.jsx(G,{className:"text-sm font-medium",children:"Network Configuration"}),e.jsxs(V,{className:"text-xs",children:["Basic WLAN settings  ",e.jsx("span",{className:"text-red-500 font-medium",children:"* Required fields"})]})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"serviceName",children:["Service Name ",!n.serviceName?.trim()&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(B,{id:"serviceName",value:n.serviceName||"",onChange:r=>c({...n,serviceName:r.target.value}),placeholder:"Service identifier (required)",className:n.serviceName?.trim()?"":"border-red-300 focus-visible:border-red-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"ssid",children:["SSID ",!n.ssid?.trim()&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(B,{id:"ssid",value:n.ssid||"",onChange:r=>c({...n,ssid:r.target.value}),placeholder:"MyNetwork (required)",className:n.ssid?.trim()?"":"border-red-300 focus-visible:border-red-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"security",children:"Security"}),e.jsxs(Y,{value:n.security,onValueChange:r=>c({...n,security:r}),children:[e.jsx(X,{children:e.jsx(Q,{})}),e.jsxs(J,{children:[e.jsx(p,{value:"open",children:"Open (No Security)"}),e.jsx(p,{value:"wpa2-psk",children:"WPA2-PSK"}),e.jsx(p,{value:"wpa3-sae",children:"WPA3-SAE"}),e.jsx(p,{value:"wpa2-enterprise",children:"WPA2-Enterprise"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"band",children:"Band"}),e.jsxs(Y,{value:n.band,onValueChange:r=>c({...n,band:r}),children:[e.jsx(X,{children:e.jsx(Q,{})}),e.jsxs(J,{children:[e.jsx(p,{value:"2.4GHz",children:"2.4 GHz"}),e.jsx(p,{value:"5GHz",children:"5 GHz"}),e.jsx(p,{value:"6GHz",children:"6 GHz (WiFi 6E)"}),e.jsx(p,{value:"dual",children:"Dual Band (2.4 + 5 GHz)"}),e.jsx(p,{value:"all",children:"All Bands (2.4 + 5 + 6 GHz)"})]})]})]}),n.security!=="open"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"passphrase",children:["Passphrase ",n.security!=="open"&&!n.passphrase?.trim()&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(B,{id:"passphrase",type:"password",value:n.passphrase||"",onChange:r=>c({...n,passphrase:r.target.value}),placeholder:"Enter passphrase (required)",className:n.passphrase?.trim()?"":"border-red-300 focus-visible:border-red-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"vlan",children:"VLAN ID (Default: 1)"}),e.jsx(B,{id:"vlan",type:"number",value:n.vlan||"",onChange:r=>c({...n,vlan:r.target.value?parseInt(r.target.value):1}),placeholder:"1",min:"1",max:"4094"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"role",children:"User Role (Default: bridged)"}),e.jsxs(Y,{value:n.authenticatedUserDefaultRoleID||"none",onValueChange:r=>c({...n,authenticatedUserDefaultRoleID:r==="none"?null:r}),children:[e.jsx(X,{children:e.jsx(Q,{placeholder:z?"Loading roles...":"Select role..."})}),e.jsxs(J,{children:[e.jsx(p,{value:"none",children:"No Role"}),v.map(r=>e.jsx(p,{value:r.id,children:r.name},r.id))]})]})]})]})})]}),e.jsxs(W,{children:[e.jsxs(_,{className:"pb-2 cursor-pointer",onClick:()=>he(!pe),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx(G,{className:"text-sm font-medium",children:"Advanced Options"})]}),pe?e.jsx(us,{className:"h-4 w-4"}):e.jsx(Zs,{className:"h-4 w-4"})]}),e.jsx(V,{className:"text-xs mt-0.5",children:"Optional advanced settings"})]}),pe&&e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(m,{htmlFor:"hideSSID",className:"cursor-pointer",children:"Hide SSID"})}),e.jsx("input",{id:"hideSSID",type:"checkbox",checked:n.hidden||!1,onChange:r=>c({...n,hidden:r.target.checked}),className:"h-4 w-4 cursor-pointer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"maxClients",children:"Max Clients (Optional)"}),e.jsx(B,{id:"maxClients",type:"number",value:n.maxClients||"",onChange:r=>c({...n,maxClients:r.target.value?parseInt(r.target.value):void 0}),placeholder:"Unlimited",min:"1",max:"1000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(B,{id:"description",value:n.description||"",onChange:r=>c({...n,description:r.target.value}),placeholder:"Network description..."})]})]})})]}),e.jsxs(W,{children:[e.jsx(_,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(G,{className:"text-sm font-medium",children:["Site Assignment ",ge().length===0&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(V,{className:"text-xs mt-0.5",children:["Select sites or site groups (",ge().length," total sites selected)"]})]}),s&&e.jsxs(se,{variant:"secondary",className:"gap-1 text-xs",children:[e.jsx(Ye,{className:"h-3 w-3 animate-spin"}),"Discovering..."]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[g.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Site Groups"]}),e.jsxs($,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>E(!0),children:[e.jsx(_e,{className:"h-3 w-3 mr-1"}),"Manage"]})]}),e.jsx("div",{className:"space-y-1",children:g.map(r=>e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${n.selectedSiteGroups.includes(r.id)?"border-primary bg-primary/5":"hover:bg-accent/50"}`,onClick:()=>Es(r.id),children:[e.jsx("input",{type:"checkbox",checked:n.selectedSiteGroups.includes(r.id),onChange:()=>{},className:"h-4 w-4"}),e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:r.color}}),e.jsx(et,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium",children:r.name}),r.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.description})]}),e.jsxs(se,{variant:"secondary",className:"text-xs flex-shrink-0",children:[r.siteIds.length," ",r.siteIds.length===1?"site":"sites"]})]},r.id))})]}),g.length===0&&e.jsxs($,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>E(!0),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Site Groups"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{children:"Individual Sites"}),u.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>c({...n,selectedSites:u.map(r=>r.id)}),disabled:n.selectedSites.length===u.length,children:"Select All"}),e.jsx($,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>c({...n,selectedSites:[]}),disabled:n.selectedSites.length===0,children:"Clear All"})]})]}),j?e.jsx("div",{className:"space-y-2",children:[1,2,3].map(r=>e.jsx(ce,{className:"h-12 w-full"},r))}):u.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No sites available"}):e.jsx("div",{className:"space-y-2",children:u.map(r=>e.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${n.selectedSites.includes(r.id)?"border-primary bg-primary/5":"hover:bg-accent/50"}`,onClick:()=>ws(r.id),children:[e.jsx("input",{type:"checkbox",checked:n.selectedSites.includes(r.id),onChange:()=>{},className:"h-4 w-4"}),e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"flex-1",children:r.name||r.siteName||r.id})]},r.id))})]})})]}),n.selectedSites.length>0&&!s&&e.jsxs(W,{children:[e.jsxs(_,{className:"pb-2",children:[e.jsx(G,{className:"text-sm font-medium",children:"Deployment Configuration"}),e.jsx(V,{className:"text-xs",children:"Choose how WLANs are assigned to profiles"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"space-y-3",children:Array.from(I.values()).map(r=>e.jsx(kt,{siteId:r.siteId,siteName:r.siteName,profileCount:r.profiles.length,selectedMode:r.deploymentMode,onModeChange:A=>ks(r.siteId,A),onConfigureProfiles:r.deploymentMode==="ALL_PROFILES_AT_SITE"?void 0:()=>Is(r.siteId,r.deploymentMode),selectedProfilesCount:r.includedProfiles.length,excludedProfilesCount:r.excludedProfiles.length},r.siteId))}),e.jsx(Tt,{effectiveSets:O})]})]})]}),e.jsxs(ct,{className:"px-6 py-4 border-t mt-auto",children:[e.jsx($,{variant:"outline",onClick:()=>i(!1),disabled:ie,children:"Cancel"}),e.jsx($,{onClick:Ls,disabled:!Ds||ie||s,children:ie?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create & Deploy WLAN"]})})]})]})}),o&&e.jsx(It,{open:S,onOpenChange:U,mode:o.mode,profiles:I.get(o.siteId)?.profiles||[],siteName:o.siteName,selectedProfileIds:o.mode==="INCLUDE_ONLY"?I.get(o.siteId)?.includedProfiles||[]:I.get(o.siteId)?.excludedProfiles||[],onConfirm:Ts}),e.jsx(Wt,{open:k,onOpenChange:E,sites:u,siteGroups:g,onSave:Ps})]})}const Dt=a=>{const i=a.name||a.serviceName||a.ssid||"Unknown";console.log(`[ConfigureNetworks] Checking auth for "${i}":`,{hasWpaSaeElement:!!a.WpaSaeElement,hasPrivacyWpaSaeElement:!!a.privacy?.WpaSaeElement,WpaSaeElement:a.WpaSaeElement,privacyWpaSaeElement:a.privacy?.WpaSaeElement,privacyObject:a.privacy,privacyKeys:a.privacy?Object.keys(a.privacy):[],privacyFullStructure:a.privacy?JSON.stringify(a.privacy,null,2):"No privacy object"});const l=a.WpaSaeElement||a.privacy?.WpaSaeElement||a.privacy?.wpaSaeElement||a.privacy?.sae||a.privacy?.SAE||a.WpaSae||a.privacy?.WpaSae;if(l)return console.log(`[ConfigureNetworks] Found WPA3-SAE for "${i}":`,{saeElement:l,location:a.WpaSaeElement?"service.WpaSaeElement":a.privacy?.WpaSaeElement?"service.privacy.WpaSaeElement":a.privacy?.wpaSaeElement?"service.privacy.wpaSaeElement":a.privacy?.sae?"service.privacy.sae":a.privacy?.SAE?"service.privacy.SAE":a.WpaSae?"service.WpaSae":"service.privacy.WpaSae"}),l?.pmfMode==="required"&&l?.saeMethod==="SaeH2e"?(console.log(` Returning WPA3-Personal (SAE) for "${i}"`),"WPA3-Personal (SAE)"):l?.pmfMode==="capable"?(console.log(` Returning WPA2/WPA3-Personal (Transition) for "${i}"`),"WPA2/WPA3-Personal (Transition)"):(console.log(` Returning WPA3-Personal for "${i}"`),"WPA3-Personal");if((a.beaconProtection===!0||a.privacy?.beaconProtection===!0)&&console.log(` Found beaconProtection for "${i}" - might be WPA3`),a.WpaEnterpriseElement?.mode)switch(a.WpaEnterpriseElement.mode.toLowerCase()){case"aesonly":return"WPA2-Enterprise (AES)";case"tkiponly":return"WPA-Enterprise (TKIP)";case"mixed":return"WPA/WPA2-Enterprise (Mixed)";case"wpa3only":return"WPA3-Enterprise";case"wpa3mixed":return"WPA2/WPA3-Enterprise";default:return`WPA-Enterprise (${a.WpaEnterpriseElement.mode})`}if(a.privacy?.WpaEnterpriseElement?.mode)switch(a.privacy.WpaEnterpriseElement.mode.toLowerCase()){case"aesonly":return"WPA2-Enterprise (AES)";case"tkiponly":return"WPA-Enterprise (TKIP)";case"mixed":return"WPA/WPA2-Enterprise (Mixed)";case"wpa3only":return"WPA3-Enterprise";case"wpa3mixed":return"WPA2/WPA3-Enterprise";default:return`WPA-Enterprise (${a.privacy.WpaEnterpriseElement.mode})`}if(a.WpaEnterpriseElement||a.privacy?.WpaEnterpriseElement)return(a.WpaEnterpriseElement||a.privacy?.WpaEnterpriseElement)?.pmfMode==="required"?"WPA3-Enterprise":"WPA2-Enterprise";const n=a.WpaEapElement||a.privacy?.WpaEapElement||a.eapElement||a.privacy?.eapElement||a.dot1xElement||a.privacy?.dot1xElement||a["802.1x"]||a.privacy?.["802.1x"];if(n)return console.log(` Found 802.1X/EAP element for "${i}":`,n),"WPA2-Enterprise (802.1X)";if(a.WpaPskElement?.mode)switch(a.WpaPskElement.mode.toLowerCase()){case"aesonly":return"WPA2-PSK (AES)";case"tkiponly":return"WPA-PSK (TKIP)";case"mixed":return"WPA/WPA2-PSK (Mixed)";case"wpa3only":return"WPA3-PSK";case"wpa3mixed":return"WPA2/WPA3-PSK";default:return`WPA-PSK (${a.WpaPskElement.mode})`}if(a.privacy?.WpaPskElement?.mode)switch(a.privacy.WpaPskElement.mode.toLowerCase()){case"aesonly":return"WPA2-PSK (AES)";case"tkiponly":return"WPA-PSK (TKIP)";case"mixed":return"WPA/WPA2-PSK (Mixed)";case"wpa3only":return"WPA3-PSK";case"wpa3mixed":return"WPA2/WPA3-PSK";default:return`WPA-PSK (${a.privacy.WpaPskElement.mode})`}if(a.mode)switch(a.mode.toLowerCase()){case"aesonly":return"WPA2-PSK (AES)";case"tkiponly":return"WPA-PSK (TKIP)";case"mixed":return"WPA/WPA2-PSK (Mixed)";case"wpa3only":return"WPA3-PSK";case"wpa3mixed":return"WPA2/WPA3-PSK";case"open":return"Open";default:return a.mode}if(a.security?.type)return a.security.type;if(a.securityType)return a.securityType;if(a.authType)return a.authType;if(a.privacyType)return a.privacyType;if(a.encryption){const c=a.encryption.toLowerCase();return c.includes("wpa3")?"WPA3-PSK":c.includes("wpa2")?"WPA2-PSK (AES)":c.includes("wpa")?"WPA-PSK":c.includes("aes")?"WPA2-PSK (AES)":a.encryption}if(a.passphrase||a.password||a.psk||a.privacy?.WpaSaeElement?.presharedKey)return"WPA2-PSK (Secured)";if(a.securityMode)return a.securityMode;if(a.open===!0||a.isOpen===!0)return console.log(` "${i}" explicitly marked as Open`),"Open";if(a.privacy&&typeof a.privacy=="object"&&Object.keys(a.privacy).length>0){console.log(` "${i}" has privacy config but unknown type. Privacy keys:`,Object.keys(a.privacy));const c=Object.keys(a.privacy).map(u=>u.toLowerCase());return c.some(u=>u.includes("enterprise")||u.includes("eap")||u.includes("802")||u.includes("1x")||u.includes("radius"))?"WPA2-Enterprise":c.some(u=>u.includes("psk")||u.includes("passphrase")||u.includes("key"))?"WPA2-PSK":"Secured (Unknown)"}return console.log(` "${i}" defaulting to Open - No security config found. Available fields:`,{topLevelKeys:Object.keys(a),privacyKeys:a.privacy?Object.keys(a.privacy):[],hasPrivacy:!!a.privacy,privacyType:typeof a.privacy}),"Open"},Rt=(a,i=0)=>{const l=a.name||a.serviceName||a.ssid||"Unnamed Network",n=a.ssid||a.name||a.serviceName||"Unnamed SSID",c=a.enabled!==void 0?a.enabled:a.status==="enabled"||a.status!=="disabled",u=a.hidden||a.suppressSsid||a.broadcastSSID===!1,h=Dt(a);return console.log(`[ConfigureNetworks] Network: "${n}" -> Auth: "${h}"`,{id:a.id,serviceName:a.serviceName,name:a.name,ssid:n,authType:h,hasWpaSae:!!(a.WpaSaeElement||a.privacy?.WpaSaeElement),WpaSaeElement:a.WpaSaeElement||a.privacy?.WpaSaeElement,hasWpaPsk:!!(a.WpaPskElement||a.privacy?.WpaPskElement),hasWpaEnterprise:!!(a.WpaEnterpriseElement||a.privacy?.WpaEnterpriseElement),privacyKeys:a.privacy?Object.keys(a.privacy):[]}),{id:a.id,name:l,ssid:n,authType:h,vlanId:a.dot1dPortNumber||a.vlan||a.vlanId,band:"2.4/5 GHz",enabled:c,hidden:u,maxClients:a.maxClients||a.maxUsers||0,currentClients:i,captivePortal:a.captivePortal||a.webPortal||!1,enableCaptivePortal:a.enableCaptivePortal||!1,guestAccess:a.guestAccess||a.guest||!1,description:a.description,createdAt:a.createdAt||a.createTime,updatedAt:a.updatedAt||a.updateTime,...a}};function Ht(){const[a,i]=f.useState([]),[l,n]=f.useState([]),[c,u]=f.useState([]),[h,j]=f.useState(!0),[N,g]=f.useState(null),[C,k]=f.useState(""),[E,v]=f.useState([]),[D,z]=f.useState("all"),[F,I]=f.useState("all"),[q,te]=f.useState("all"),[ae,s]=f.useState(!1),[R,S]=f.useState(null);f.useEffect(()=>{U()},[]);const U=async()=>{try{j(!0),g(null);const x=new Promise((M,Z)=>setTimeout(()=>Z(new Error("Request timed out after 15 seconds")),15e3)),[w]=await Promise.race([Promise.allSettled([ee.getServices()]),x]);let b=[];w.status==="fulfilled"?(b=w.value,n(b),console.log(" LOADED SERVICES COUNT:",b.length)):console.warn("Failed to load services:",w.reason),u([]);const T=[];for(const M of b)try{let Z=0;try{const he=new Promise((Ke,De)=>setTimeout(()=>De(new Error("Service stations request timed out")),8e3)),Ee=await Promise.race([ee.getServiceStations(M.id),he]);Z=Array.isArray(Ee)?Ee.length:0}catch(he){if(console.warn(`Failed to get stations for service ${M.id}:`,he),he instanceof Error&&he.message.includes("Session expired"))throw he;Z=0}const pe=Rt(M,Z);T.push(pe),console.log(` Transformed: "${pe.ssid}"  Auth: "${pe.authType}"`)}catch(Z){console.warn(`Failed to transform service ${M.id}:`,Z)}if(i(T),console.log(" ALL NETWORKS LOADED:"),T.forEach(M=>{console.log(`  - ${M.ssid}: ${M.authType} (Enabled: ${M.enabled})`)}),T.length===0&&b.length===0&&w.status==="rejected")throw new Error(w.reason?.message||"Failed to load network services")}catch(x){const w=x instanceof Error?x.message:"Failed to load networks";g(w),w.includes("Session expired")||K.error("Failed to load networks",{description:w})}finally{j(!1)}},o=a.filter(x=>{const w=x.name?.toLowerCase().includes(C.toLowerCase())||x.ssid?.toLowerCase().includes(C.toLowerCase())||x.description?.toLowerCase().includes(C.toLowerCase()),b=D==="all"||x.band===D||D==="Both"&&(x.band?.toLowerCase().includes("both")||x.band?.toLowerCase().includes("dual")||x.band?.toLowerCase().includes("+")),T=F==="all"||x.authType?.toLowerCase().includes(F.toLowerCase()),M=q==="all"||q==="enabled"&&x.enabled||q==="disabled"&&!x.enabled;return w&&b&&T&&M}),t=async(x,w)=>{try{const b=l.find(M=>M.id===x);if(!b)throw new Error("Service not found");const T={serviceName:b.name||b.ssid||"Unnamed Network",name:b.name||b.ssid||"Unnamed Network",ssid:b.ssid||b.name||"Unnamed SSID",enabled:!!w};if(b.preAuthenticatedIdleTimeout!==void 0){const M=Number(b.preAuthenticatedIdleTimeout);isNaN(M)||M<5||M>999999?T.preAuthenticatedIdleTimeout=300:T.preAuthenticatedIdleTimeout=M}delete T.preAuthenticatedIdleTimeout,console.log("Updating network with payload:",T),await ee.updateService(x,T),i(M=>M.map(Z=>Z.id===x?{...Z,enabled:w}:Z)),n(M=>M.map(Z=>Z.id===x?{...Z,enabled:w}:Z)),K.success(`Network ${w?"enabled":"disabled"} successfully`)}catch(b){const T=b instanceof Error?b.message:"Failed to update network status";K.error("Failed to update network status",{description:T})}},O=async x=>{const w=a.find(b=>b.id===x);if(confirm(`Are you sure you want to delete the network "${w?.name}"? This action cannot be undone.`))try{await ee.deleteService(x),i(b=>b.filter(T=>T.id!==x)),n(b=>b.filter(T=>T.id!==x)),v(b=>b.filter(T=>T!==x)),R===x&&S(null),K.success("Network deleted successfully")}catch(b){const T=b instanceof Error?b.message:"Failed to delete network";K.error("Failed to delete network",{description:T})}},H=(x,w)=>{v(w?b=>[...b,x]:b=>b.filter(T=>T!==x))},ie=x=>{v(x?o.map(w=>w.id):[])},le=x=>{S(R===x?null:x)},d=()=>{U(),K.success("Network configuration saved successfully")};return h?e.jsx("div",{className:"space-y-6",children:e.jsxs(W,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ce,{className:"h-6 w-48 mb-2"}),e.jsx(ce,{className:"h-4 w-64"})]}),e.jsx(ce,{className:"h-10 w-32"})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(ce,{className:"h-10 flex-1"}),e.jsx(ce,{className:"h-10 w-32"}),e.jsx(ce,{className:"h-10 w-32"})]}),e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((x,w)=>e.jsx(ce,{className:"h-16 w-full"},w))})]})})]})}):e.jsxs("div",{className:"space-y-6",children:[N&&e.jsxs(ss,{variant:"destructive",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx(ts,{children:N})]}),e.jsxs(W,{className:"surface-2dp",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(G,{className:"flex items-center space-x-2 text-headline-6 text-high-emphasis",children:[e.jsx(Ie,{className:"h-5 w-5"}),e.jsx("span",{children:"Network Configurations"})]}),e.jsx(V,{children:"Manage and configure wireless networks, SSIDs, and security policies"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:U,children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs($,{onClick:()=>s(!0),children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Create WLAN"]})]}),e.jsx(Lt,{open:ae,onOpenChange:s,onSuccess:()=>{s(!1),U()}})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex flex-col space-y-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(B,{placeholder:"Search networks...",value:C,onChange:x=>k(x.target.value),className:"pl-10"})]}),e.jsxs(Y,{value:D,onValueChange:z,children:[e.jsx(X,{className:"w-full sm:w-[150px]",children:e.jsx(Q,{placeholder:"All Bands"})}),e.jsxs(J,{children:[e.jsx(p,{value:"all",children:"All Bands"}),e.jsx(p,{value:"2.4GHz",children:"2.4GHz"}),e.jsx(p,{value:"5GHz",children:"5GHz"}),e.jsx(p,{value:"Both",children:"Both"})]})]}),e.jsxs(Y,{value:F,onValueChange:I,children:[e.jsx(X,{className:"w-full sm:w-[200px]",children:e.jsx(Q,{placeholder:"All Auth Types"})}),e.jsxs(J,{children:[e.jsx(p,{value:"all",children:"All Auth Types"}),e.jsx(p,{value:"Open",children:"Open"}),e.jsx(p,{value:"WPA2-PSK",children:"WPA2-PSK (AES)"}),e.jsx(p,{value:"WPA-PSK",children:"WPA-PSK (TKIP)"}),e.jsx(p,{value:"WPA/WPA2-PSK",children:"WPA/WPA2-PSK (Mixed)"}),e.jsx(p,{value:"WPA3-PSK",children:"WPA3-PSK"}),e.jsx(p,{value:"WPA3-Personal",children:"WPA3-Personal (SAE)"}),e.jsx(p,{value:"WPA2/WPA3-PSK",children:"WPA2/WPA3-PSK"}),e.jsx(p,{value:"WPA2/WPA3-Personal",children:"WPA2/WPA3-Personal (Transition)"}),e.jsx(p,{value:"WPA2-Enterprise",children:"WPA2-Enterprise (AES)"}),e.jsx(p,{value:"WPA-Enterprise",children:"WPA-Enterprise (TKIP)"}),e.jsx(p,{value:"WPA/WPA2-Enterprise",children:"WPA/WPA2-Enterprise (Mixed)"}),e.jsx(p,{value:"WPA3-Enterprise",children:"WPA3-Enterprise"}),e.jsx(p,{value:"WPA2/WPA3-Enterprise",children:"WPA2/WPA3-Enterprise"})]})]}),e.jsxs(Y,{value:q,onValueChange:te,children:[e.jsx(X,{className:"w-full sm:w-[120px]",children:e.jsx(Q,{placeholder:"All Status"})}),e.jsxs(J,{children:[e.jsx(p,{value:"all",children:"All Status"}),e.jsx(p,{value:"enabled",children:"Enabled"}),e.jsx(p,{value:"disabled",children:"Disabled"})]})]})]}),E.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-muted rounded-lg",children:[e.jsxs("span",{className:"text-sm",children:[E.length," network",E.length===1?"":"s"," selected"]}),e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Bulk Actions"]})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(Ks,{children:[e.jsx(Hs,{children:e.jsxs(ke,{children:[e.jsx(fe,{className:"w-12",children:e.jsx(Me,{checked:E.length===o.length&&o.length>0,onCheckedChange:ie,"aria-label":"Select all networks"})}),e.jsx(fe,{children:"SSID"}),e.jsx(fe,{children:"Auth Type"}),e.jsx(fe,{children:"Clients"}),e.jsx(fe,{children:"Captive Portal"}),e.jsx(fe,{children:"Status"}),e.jsx(fe,{className:"text-right",children:"Actions"})]})}),e.jsxs(qs,{children:[o.map(x=>e.jsxs(Vs.Fragment,{children:[e.jsxs(ke,{children:[e.jsx(me,{children:e.jsx(Me,{checked:E.includes(x.id),onCheckedChange:w=>H(x.id,!!w),"aria-label":`Select ${x.name}`})}),e.jsx(me,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-sm",children:x.ssid}),x.hidden&&e.jsx(Xe,{className:"h-3 w-3 text-muted-foreground",title:"Hidden SSID"})]})}),e.jsx(me,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Fe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs",children:x.authType})]})}),e.jsx(me,{children:e.jsxs("div",{className:"flex items-center space-x-1 bg-secondary/10 border border-secondary/20 rounded-full px-3 py-1.5 min-w-[60px] justify-center",children:[e.jsx(Te,{className:"h-4 w-4 text-secondary"}),e.jsx("span",{className:"text-sm font-semibold text-secondary",children:x.currentClients||0})]})}),e.jsx(me,{children:e.jsx("div",{className:"flex items-center space-x-1",children:x.captivePortal||x.enableCaptivePortal?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{className:"text-xs text-blue-500",children:"Enabled"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Disabled"})]})})}),e.jsx(me,{children:e.jsx(se,{variant:x.enabled?"default":"secondary",children:x.enabled?"Enabled":"Disabled"})}),e.jsx(me,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:()=>t(x.id,!x.enabled),title:x.enabled?"Disable Network":"Enable Network",children:x.enabled?e.jsx(Xe,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"sm",title:"Configure Network",onClick:()=>le(x.id),children:R===x.id?e.jsx(us,{className:"h-4 w-4"}):e.jsx(at,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"sm",onClick:()=>O(x.id),className:"text-destructive hover:text-destructive",title:"Delete Network",children:e.jsx(ds,{className:"h-4 w-4"})})]})})]}),R===x.id&&e.jsx(ke,{children:e.jsx(me,{colSpan:7,className:"p-0",children:e.jsx("div",{className:"border-t bg-muted/30",children:e.jsx(pt,{serviceId:x.id,onSave:d,isInline:!0})})})})]},x.id)),o.length===0&&!h&&e.jsx(ke,{children:e.jsx(me,{colSpan:7,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2 text-muted-foreground",children:[e.jsx(Ie,{className:"h-8 w-8"}),e.jsx("span",{children:"No networks found"}),C&&e.jsx("span",{className:"text-sm",children:"Try adjusting your search or filters"})]})})})]})]})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(W,{className:"surface-1dp",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Networks"})]}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:a.length})]})}),e.jsx(W,{className:"surface-1dp",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Connected Clients"})]}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:a.reduce((x,w)=>x+(w.currentClients||0),0)})]})}),e.jsx(W,{className:"surface-1dp",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Secured Networks"})]}),e.jsx("p",{className:"text-2xl font-semibold mt-1",children:a.filter(x=>x.authType!=="Open").length})]})})]})]})]})]})}export{Ht as ConfigureNetworks};
