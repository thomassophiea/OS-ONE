import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as g}from"./vendor-react-BQC692LR.js";import{a as B,t as K,B as u,A as W,l as Y,T as xe,i as ue,j as L,k as z,C as E,b as P,c as T,h as M,d as R,L as r,I as p,m as se,n as ae,o as ne,p as te,q as S,w as h,D as pe,e as ee}from"./index-CrdvL8SR.js";import{S as D}from"./switch-iy-vimzq.js";import{k as ge,ad as Ce,x as re,b5 as Se,b6 as ce,a_ as ke,N as Ee,a1 as Pe,am as Te,al as Me,S as je,f as le,a as de,a$ as fe,a0 as ve,b7 as oe,ac as me,a2 as he,aZ as Re,aq as De,R as Ie}from"./vendor-icons-DmoIqCnf.js";import{T as ye,a as Ne,b as ie,c as A,d as we,e as C}from"./table-BR47Ry2r.js";import{f as Fe}from"./units-YHb9M7pt.js";import"./vendor-charts-CCS-1Xlq.js";function Oe({networkAssistantEnabled:f=!1,onToggleNetworkAssistant:w}){const[l,I]=g.useState({hostname:"extreme-controller",domain:"local",contactEmail:"admin@example.com",location:"Data Center",managementIp:"192.168.1.10",subnetMask:"255.255.255.0",defaultGateway:"192.168.1.1",primaryDns:"8.8.8.8",secondaryDns:"8.8.4.4",timezone:"America/New_York",ntpEnabled:!0,ntpServer1:"pool.ntp.org",ntpServer2:"time.google.com",snmpEnabled:!0,snmpCommunity:"public",snmpLocation:"Data Center",snmpContact:"admin@example.com",snmpTrapServer:"",syslogEnabled:!1,syslogServer:"",syslogPort:514,syslogLevel:"info",auditLoggingEnabled:!0,auditRetentionDays:90,auditSyslogEnabled:!1}),[H,F]=g.useState(!0),[v,O]=g.useState(!1),[q,U]=g.useState("preferences"),[t,j]=g.useState(!1);g.useEffect(()=>{d()},[]);const d=async()=>{F(!0);try{const a=await B.makeAuthenticatedRequest("/v1/system/config",{method:"GET"});if(a.ok){const _=await a.json();I(G=>({...G,..._})),j(!1)}else a.status===404&&(j(!0),console.warn("System configuration API endpoint not available on this Extreme Platform ONE"))}catch(a){console.error("Failed to load system config:",a),j(!0)}finally{F(!1)}},b=async()=>{O(!0);try{if(h.info("Saving system configuration..."),(await B.makeAuthenticatedRequest("/v1/system/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)h.success("System configuration saved successfully");else throw new Error("Failed to save configuration")}catch(a){console.error("Failed to save config:",a),h.error("Failed to save configuration")}finally{O(!1)}},c=(a,_)=>{I(G=>({...G,[a]:_}))},J=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Phoenix","Pacific/Honolulu","America/Anchorage","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Australia/Sydney"];return H?e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx(K,{className:"h-8 w-64"}),e.jsx(K,{className:"h-96 w-full"})]}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ge,{className:"h-6 w-6"}),"System Administration"]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and parameters"})]}),e.jsxs(u,{onClick:b,disabled:v||t,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),v?"Saving...":"Save Configuration"]})]}),t&&e.jsxs(W,{className:"border-yellow-500",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(Y,{children:"System configuration API endpoints are not available on this Extreme Platform ONE version. This feature requires API v1/system/config support."})]}),e.jsxs(xe,{value:q,onValueChange:U,children:[e.jsxs(ue,{children:[e.jsx(L,{value:"preferences",children:"Preferences"}),e.jsx(L,{value:"general",children:"General"}),e.jsx(L,{value:"network",children:"Network"}),e.jsx(L,{value:"time",children:"Time & NTP"}),e.jsx(L,{value:"snmp",children:"SNMP"}),e.jsx(L,{value:"syslog",children:"Syslog"}),e.jsx(L,{value:"audit",children:"Audit Logs"})]}),e.jsx(z,{value:"preferences",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Feature Preferences"]}),e.jsx(M,{children:"Enable or disable optional features"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(ce,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"network-assistant",className:"text-base font-medium",children:"Network Assistant"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"AI-powered assistant for network queries and troubleshooting. Use ⌘K to toggle when enabled."})]})]}),e.jsx(D,{id:"network-assistant",checked:f,onCheckedChange:a=>w?.(a)})]}),f&&e.jsxs(W,{children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsxs(Y,{children:["Network Assistant is enabled. Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs font-mono bg-muted rounded",children:"⌘K"})," to open it, or click the chat bubble in the bottom-right corner."]})]})]})]})}),e.jsx(z,{value:"general",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"General Settings"]}),e.jsx(M,{children:"Basic system identification and contact information"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Hostname"}),e.jsx(p,{value:l.hostname,onChange:a=>c("hostname",a.target.value),placeholder:"controller-01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Domain"}),e.jsx(p,{value:l.domain,onChange:a=>c("domain",a.target.value),placeholder:"example.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Contact Email"}),e.jsx(p,{type:"email",value:l.contactEmail,onChange:a=>c("contactEmail",a.target.value),placeholder:"admin@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Location"}),e.jsx(p,{value:l.location,onChange:a=>c("location",a.target.value),placeholder:"Building A, Floor 3"})]})]})]})}),e.jsx(z,{value:"network",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Network Configuration"]}),e.jsx(M,{children:"Management interface and network settings"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Management IP Address"}),e.jsx(p,{value:l.managementIp,onChange:a=>c("managementIp",a.target.value),placeholder:"192.168.1.10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Subnet Mask"}),e.jsx(p,{value:l.subnetMask,onChange:a=>c("subnetMask",a.target.value),placeholder:"255.255.255.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Default Gateway"}),e.jsx(p,{value:l.defaultGateway,onChange:a=>c("defaultGateway",a.target.value),placeholder:"192.168.1.1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Primary DNS Server"}),e.jsx(p,{value:l.primaryDns,onChange:a=>c("primaryDns",a.target.value),placeholder:"8.8.8.8"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Secondary DNS Server"}),e.jsx(p,{value:l.secondaryDns,onChange:a=>c("secondaryDns",a.target.value),placeholder:"8.8.4.4"})]})]})]})]})}),e.jsx(z,{value:"time",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5"}),"Time and NTP Configuration"]}),e.jsx(M,{children:"Configure timezone and NTP synchronization"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Timezone"}),e.jsxs(se,{value:l.timezone,onValueChange:a=>c("timezone",a),children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsx(te,{children:J.map(a=>e.jsx(S,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enable NTP Synchronization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically sync time with NTP servers"})]}),e.jsx(D,{checked:l.ntpEnabled,onCheckedChange:a=>c("ntpEnabled",a)})]}),l.ntpEnabled&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Primary NTP Server"}),e.jsx(p,{value:l.ntpServer1,onChange:a=>c("ntpServer1",a.target.value),placeholder:"pool.ntp.org"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Secondary NTP Server"}),e.jsx(p,{value:l.ntpServer2,onChange:a=>c("ntpServer2",a.target.value),placeholder:"time.google.com"})]})]})]})]})}),e.jsx(z,{value:"snmp",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5"}),"SNMP Configuration"]}),e.jsx(M,{children:"Configure SNMP monitoring and traps"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enable SNMP"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow SNMP monitoring of the system"})]}),e.jsx(D,{checked:l.snmpEnabled,onCheckedChange:a=>c("snmpEnabled",a)})]}),l.snmpEnabled&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Community String"}),e.jsx(p,{value:l.snmpCommunity,onChange:a=>c("snmpCommunity",a.target.value),placeholder:"public",type:"password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SNMP Location"}),e.jsx(p,{value:l.snmpLocation,onChange:a=>c("snmpLocation",a.target.value),placeholder:"Data Center"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SNMP Contact"}),e.jsx(p,{value:l.snmpContact,onChange:a=>c("snmpContact",a.target.value),placeholder:"admin@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SNMP Trap Server (Optional)"}),e.jsx(p,{value:l.snmpTrapServer,onChange:a=>c("snmpTrapServer",a.target.value),placeholder:"192.168.1.100"})]})]})]})]})}),e.jsx(z,{value:"syslog",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Syslog Configuration"]}),e.jsx(M,{children:"Configure remote syslog server"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enable Syslog"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send logs to remote syslog server"})]}),e.jsx(D,{checked:l.syslogEnabled,onCheckedChange:a=>c("syslogEnabled",a)})]}),l.syslogEnabled&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Syslog Server"}),e.jsx(p,{value:l.syslogServer,onChange:a=>c("syslogServer",a.target.value),placeholder:"192.168.1.100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Port"}),e.jsx(p,{type:"number",value:l.syslogPort,onChange:a=>c("syslogPort",parseInt(a.target.value)),placeholder:"514"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Log Level"}),e.jsxs(se,{value:l.syslogLevel,onValueChange:a=>c("syslogLevel",a),children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"debug",children:"Debug"}),e.jsx(S,{value:"info",children:"Info"}),e.jsx(S,{value:"warning",children:"Warning"}),e.jsx(S,{value:"error",children:"Error"})]})]})]})]})]})]})}),e.jsx(z,{value:"audit",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Audit Logging Configuration"]}),e.jsx(M,{children:"Configure audit trail and compliance logging"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enable Audit Logging"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track administrative actions and changes"})]}),e.jsx(D,{checked:l.auditLoggingEnabled,onCheckedChange:a=>c("auditLoggingEnabled",a)})]}),l.auditLoggingEnabled&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Retention Period (Days)"}),e.jsx(p,{type:"number",value:l.auditRetentionDays,onChange:a=>c("auditRetentionDays",parseInt(a.target.value)),placeholder:"90"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Audit logs older than this will be automatically deleted"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Send to Syslog"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Forward audit logs to syslog server"})]}),e.jsx(D,{checked:l.auditSyslogEnabled,onCheckedChange:a=>c("auditSyslogEnabled",a)})]})]})]})]})})]})]})}function Le(){const[f,w]=g.useState([]),[l,I]=g.useState(!0),[H,F]=g.useState(!1),[v,O]=g.useState(null),[q,U]=g.useState(!1),[t,j]=g.useState({username:"",email:"",password:"",confirmPassword:"",role:"viewer",enabled:!0,twoFactorEnabled:!1});g.useEffect(()=>{d()},[]);const d=async()=>{I(!0);try{console.log("[AdministratorsManagement] Fetching administrators from /v1/administrators...");const n=await B.makeAuthenticatedRequest("/v1/administrators",{method:"GET"});if(console.log("[AdministratorsManagement] Response status:",n.status),console.log("[AdministratorsManagement] Response ok:",n.ok),n.ok){const x=await n.json();console.log("[AdministratorsManagement] Raw API response:",x),console.log("[AdministratorsManagement] Response type:",typeof x,"isArray:",Array.isArray(x));let N=[];if(Array.isArray(x))N=x;else if(x&&typeof x=="object"){const m=["administrators","admins","users","data","items","results"];for(const k of m)if(x[k]&&Array.isArray(x[k])){console.log("[AdministratorsManagement] Found administrators array at key:",k),N=x[k];break}N.length===0&&console.log("[AdministratorsManagement] No admins found. Available keys:",Object.keys(x))}console.log("[AdministratorsManagement] Parsed administrators count:",N.length),N.length>0&&console.log("[AdministratorsManagement] Sample admin:",N[0]);const Q=N.map(m=>{let k="viewer";return m.adminRole==="FULL"||m.adminRole==="SUPER_ADMIN"?k="super_admin":m.adminRole==="ADMIN"||m.adminRole==="NETWORK_ADMIN"?k="admin":(m.adminRole==="OPERATOR"||m.adminRole==="NETWORK_OPERATOR")&&(k="operator"),{id:m.userId||m.id||m.username||"unknown",username:m.userId||m.username||m.name||"unknown",email:m.email||m.properties?.email||`${m.userId}@unknown.local`,role:k,enabled:m.accountState==="ENABLED"||m.enabled===!0,lastLogin:m.lastLogin||m.lastLoginTime||void 0,createdAt:m.createdAt||m.createTime||new Date().toISOString(),twoFactorEnabled:m.twoFactorEnabled||m.properties?.twoFactorEnabled||!1}});console.log("[AdministratorsManagement] Transformed administrators:",Q),w(Q),U(!1)}else n.status===404?(U(!0),console.warn("[AdministratorsManagement] Administrators API endpoint not available (404)")):(console.warn("[AdministratorsManagement] Unexpected response status:",n.status),U(!0))}catch(n){console.error("[AdministratorsManagement] Failed to load administrators:",n),U(!0)}finally{I(!1)}},b=n=>{n?(O(n),j({username:n.username,email:n.email,password:"",confirmPassword:"",role:n.role,enabled:n.enabled,twoFactorEnabled:n.twoFactorEnabled})):(O(null),j({username:"",email:"",password:"",confirmPassword:"",role:"viewer",enabled:!0,twoFactorEnabled:!1})),F(!0)},c=()=>{F(!1),O(null),j({username:"",email:"",password:"",confirmPassword:"",role:"viewer",enabled:!0,twoFactorEnabled:!1})},J=async()=>{if(!t.username.trim()){h.error("Username is required");return}if(!t.email.trim()){h.error("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){h.error("Please enter a valid email address");return}if(v){if(t.password&&t.password!==t.confirmPassword){h.error("Passwords do not match");return}}else{if(!t.password){h.error("Password is required");return}if(t.password.length<8){h.error("Password must be at least 8 characters");return}if(t.password!==t.confirmPassword){h.error("Passwords do not match");return}}try{if(v){const x={username:t.username,email:t.email,role:t.role,enabled:t.enabled,twoFactorEnabled:t.twoFactorEnabled};if(t.password&&(x.password=t.password),(await B.makeAuthenticatedRequest(`/v1/administrators/${v.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)h.success("Administrator updated successfully"),await d();else throw new Error("Failed to update administrator")}else if((await B.makeAuthenticatedRequest("/v1/administrators",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email,password:t.password,role:t.role,enabled:t.enabled,twoFactorEnabled:t.twoFactorEnabled})})).ok)h.success("Administrator created successfully"),await d();else throw new Error("Failed to create administrator");c()}catch{h.error("Failed to save administrator")}},a=async n=>{if(n.role==="super_admin"){h.error("Cannot delete super admin account");return}if(window.confirm(`Are you sure you want to delete administrator "${n.username}"?`))try{if((await B.makeAuthenticatedRequest(`/v1/administrators/${n.id}`,{method:"DELETE"})).ok)h.success("Administrator deleted successfully"),await d();else throw new Error("Failed to delete administrator")}catch{h.error("Failed to delete administrator")}},_=async(n,x)=>{if(n.role==="super_admin"){h.error("Cannot disable super admin account");return}try{if((await B.makeAuthenticatedRequest(`/v1/administrators/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:x})})).ok)h.success(x?"Administrator enabled":"Administrator disabled"),await d();else throw new Error("Failed to update administrator")}catch{h.error("Failed to update administrator")}},G=n=>{const x={super_admin:"bg-purple-500",admin:"bg-blue-500",operator:"bg-green-500",viewer:"bg-gray-500"},N={super_admin:"Super Admin",admin:"Admin",operator:"Operator",viewer:"Viewer"};return e.jsx(ee,{className:x[n],children:N[n]})},Z=n=>({super_admin:"Full system access including user management",admin:"Configuration and management access",operator:"Operational access with limited configuration",viewer:"Read-only access to view system status"})[n];return l?e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx(K,{className:"h-8 w-64"}),e.jsx(K,{className:"h-96 w-full"})]}):q?e.jsx("div",{className:"space-y-6 p-6",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Administrators Management"]}),e.jsx(M,{children:"Configure system-wide user access and permissions"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(u,{variant:"default",size:"sm",disabled:!0,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Administrator"]})}),e.jsxs(W,{className:"border-2 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-600"}),e.jsx(Y,{className:"text-yellow-800 dark:text-yellow-200",children:"Administrators management API endpoints are not available on this Extreme Platform ONE version. This feature requires API v1/administrators support."})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"General"}),e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"Roles"}),e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"Permissions"}),e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"Access Logs"})]})]})]})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(le,{className:"h-6 w-6"}),"Administrators Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts and permissions"})]}),e.jsxs(u,{onClick:()=>b(),disabled:q,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Administrator"]})]}),q&&e.jsxs(W,{className:"border-yellow-500",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(Y,{children:"Administrators management API endpoints are not available on this Extreme Platform ONE version. This feature requires API v1/administrators support."})]}),e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsx(T,{children:"Administrator Accounts"}),e.jsxs(M,{children:[f.length," administrator",f.length!==1?"s":""]})]}),e.jsx(R,{children:e.jsxs(ye,{children:[e.jsx(Ne,{children:e.jsxs(ie,{children:[e.jsx(A,{children:"Username"}),e.jsx(A,{children:"Role"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Actions"})]})}),e.jsx(we,{children:f.map(n=>e.jsxs(ie,{children:[e.jsx(C,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),n.username]})}),e.jsx(C,{children:G(n.role)}),e.jsx(C,{children:e.jsx(D,{checked:n.enabled,onCheckedChange:x=>_(n,x),disabled:n.role==="super_admin"})}),e.jsx(C,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>b(n),children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(u,{size:"sm",variant:"destructive",onClick:()=>a(n),disabled:n.role==="super_admin",children:e.jsx(ve,{className:"h-4 w-4"})})]})})]},n.id))})]})})]}),e.jsx(pe,{isOpen:H,onClose:()=>F(!1),title:v?"Edit Administrator":"Add Administrator",description:v?"Update administrator account details":"Create a new administrator account",width:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Username"}),e.jsx(p,{value:t.username,onChange:n=>j({...t,username:n.target.value}),placeholder:"admin123"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Email"}),e.jsx(p,{type:"email",value:t.email,onChange:n=>j({...t,email:n.target.value}),placeholder:"admin@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:["Password ",v&&"(leave blank to keep current)"]}),e.jsx(p,{type:"password",value:t.password,onChange:n=>j({...t,password:n.target.value}),placeholder:"••••••••"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Confirm Password"}),e.jsx(p,{type:"password",value:t.confirmPassword,onChange:n=>j({...t,confirmPassword:n.target.value}),placeholder:"••••••••"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Role"}),e.jsxs(se,{value:t.role,onValueChange:n=>j({...t,role:n}),children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"super_admin",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Super Admin"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Full system access"})]})}),e.jsx(S,{value:"admin",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Admin"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Configuration access"})]})}),e.jsx(S,{value:"operator",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Operator"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Operational access"})]})}),e.jsx(S,{value:"viewer",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Viewer"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Read-only access"})]})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Z(t.role)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Account Enabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow user to log in"})]}),e.jsx(D,{checked:t.enabled,onCheckedChange:n=>j({...t,enabled:n})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require 2FA for login"})]}),e.jsx(D,{checked:t.twoFactorEnabled,onCheckedChange:n=>j({...t,twoFactorEnabled:n})})]}),e.jsxs("div",{className:"flex gap-2 pt-6 border-t mt-6",children:[e.jsx(u,{variant:"outline",onClick:c,className:"flex-1",children:"Cancel"}),e.jsx(u,{onClick:J,className:"flex-1",children:v?"Update":"Create"})]})]})})]})}function ze(){const[f,w]=g.useState([]),[l,I]=g.useState(!0),[H,F]=g.useState(!1),[v,O]=g.useState(null),[q,U]=g.useState({}),[t,j]=g.useState(!1),[d,b]=g.useState({name:"",description:"",grantType:"client_credentials",scopes:[],enabled:!0}),c=["read:devices","write:devices","read:networks","write:networks","read:clients","write:clients","read:sites","write:sites","read:reports","admin:users"];g.useEffect(()=>{J()},[]);const J=async()=>{I(!0);try{console.log("[ApplicationsManagement] Fetching applications from /platformmanager/v1/apps...");const s=await B.makeAuthenticatedRequest("/platformmanager/v1/apps",{method:"GET"});if(console.log("[ApplicationsManagement] Response status:",s.status),console.log("[ApplicationsManagement] Response ok:",s.ok),s.ok){const i=await s.json();console.log("[ApplicationsManagement] Raw API response:",i),console.log("[ApplicationsManagement] Response type:",typeof i,"isArray:",Array.isArray(i));let y=[];if(Array.isArray(i))y=i;else if(i&&typeof i=="object"){const o=["applications","apps","oauthApplications","clients","data","items","results"];for(const V of o)if(i[V]&&Array.isArray(i[V])){console.log("[ApplicationsManagement] Found applications array at key:",V),y=i[V];break}y.length===0&&console.log("[ApplicationsManagement] No apps found. Available keys:",Object.keys(i))}console.log("[ApplicationsManagement] Parsed applications count:",y.length),y.length>0&&console.log("[ApplicationsManagement] Sample app:",y[0]);const $=y.map((o,V)=>{let X="available";return o.status==="installed"||o.state==="installed"||o.installed===!0?X="installed":o.status==="running"||o.state==="running"||o.running===!0?X="running":(o.status==="stopped"||o.state==="stopped")&&(X="stopped"),{id:o.id||o.appId||o.applicationId||`app-${V}`,name:o.name||o.applicationName||o.title||`Application ${V+1}`,description:o.description||o.desc||o.summary||"",url:o.url||o.endpoint||o.dashboardUrl||void 0,version:o.version||o.appVersion||void 0,status:X,enabled:o.enabled!==void 0?o.enabled:o.status==="running"||o.status==="installed",icon:o.icon||o.iconUrl||void 0}});console.log("[ApplicationsManagement] Transformed applications:",$),w($),j(!1)}else s.status===404?(j(!0),console.warn("[ApplicationsManagement] Applications API endpoint not available (404)")):(console.warn("[ApplicationsManagement] Unexpected response status:",s.status),j(!0))}catch(s){console.error("[ApplicationsManagement] Failed to load applications:",s),j(!0)}finally{I(!1)}},a=()=>"app-"+Math.random().toString(36).substring(2,15),_=()=>"secret-"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),G=s=>{s?(O(s),b({name:s.name,description:s.description,grantType:s.grantType,scopes:s.scopes,enabled:s.enabled})):(O(null),b({name:"",description:"",grantType:"client_credentials",scopes:[],enabled:!0})),F(!0)},Z=()=>{F(!1),O(null)},n=async()=>{if(!d.name.trim()){h.error("Application name is required");return}if(d.scopes.length===0){h.error("At least one scope is required");return}try{if(v){const s=f.map(i=>i.id===v.id?{...i,name:d.name,description:d.description,grantType:d.grantType,scopes:d.scopes,enabled:d.enabled}:i);w(s),h.success("Application updated successfully")}else{const s={id:Date.now().toString(),name:d.name,description:d.description,clientId:a(),clientSecret:_(),grantType:d.grantType,scopes:d.scopes,enabled:d.enabled,createdAt:new Date().toISOString(),requestCount:0};w([...f,s]),h.success("Application created successfully. Save the client secret - it will not be shown again!")}Z()}catch{h.error("Failed to save application")}},x=s=>{window.confirm(`Are you sure you want to delete application "${s.name}"? This action cannot be undone.`)&&(w(f.filter(y=>y.id!==s.id)),h.success("Application deleted successfully"))},N=(s,i)=>{const y=f.map($=>$.id===s.id?{...$,enabled:i}:$);w(y),h.success(i?"Application enabled":"Application disabled")},Q=s=>{if(!window.confirm(`Are you sure you want to regenerate the client secret for "${s.name}"? The old secret will stop working immediately.`))return;const y=_(),$=f.map(o=>o.id===s.id?{...o,clientSecret:y}:o);w($),h.success("Client secret regenerated. Save it now - it will not be shown again!")},m=(s,i)=>{navigator.clipboard.writeText(s),h.success(`${i} copied to clipboard`)},k=s=>{U(i=>({...i,[s]:!i[s]}))},be=s=>{b(i=>({...i,scopes:i.scopes.includes(s)?i.scopes.filter(y=>y!==s):[...i.scopes,s]}))},Ae=s=>{const i={client_credentials:"bg-blue-500",password:"bg-yellow-500",authorization_code:"bg-green-500"},y={client_credentials:"Client Credentials",password:"Password",authorization_code:"Authorization Code"};return e.jsx(ee,{className:i[s],children:y[s]})};return l?e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx(K,{className:"h-8 w-64"}),e.jsx(K,{className:"h-96 w-full"})]}):t?e.jsx("div",{className:"space-y-6 p-6",children:e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Applications Management"]}),e.jsx(M,{children:"Manage API applications and OAuth clients"})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(u,{variant:"default",size:"sm",disabled:!0,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Create Application"]})}),e.jsxs(W,{className:"border-2 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20",children:[e.jsx(re,{className:"h-4 w-4 text-yellow-600"}),e.jsx(Y,{className:"text-yellow-800 dark:text-yellow-200",children:"OAuth applications management API endpoints are not available on this Extreme Platform ONE version. This feature requires API v1/oauth/applications support."})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"OAuth Apps"}),e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"API Keys"}),e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"Webhooks"}),e.jsx(u,{variant:"ghost",size:"sm",disabled:!0,className:"text-muted-foreground",children:"Integrations"})]})]})]})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(oe,{className:"h-6 w-6"}),"Applications Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage API applications and OAuth clients"})]}),e.jsxs(u,{onClick:()=>G(),disabled:t,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Create Application"]})]}),e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsx(T,{children:"API Applications"}),e.jsxs(M,{children:[f.length," application",f.length!==1?"s":""]})]}),e.jsx(R,{children:e.jsxs(ye,{children:[e.jsx(Ne,{children:e.jsxs(ie,{children:[e.jsx(A,{children:"Name"}),e.jsx(A,{children:"Grant Type"}),e.jsx(A,{children:"Client ID"}),e.jsx(A,{children:"Client Secret"}),e.jsx(A,{children:"Requests"}),e.jsx(A,{children:"Last Used"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Actions"})]})}),e.jsx(we,{children:f.map(s=>e.jsxs(ie,{children:[e.jsx(C,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.scopes.slice(0,2).map(i=>e.jsx(ee,{variant:"outline",className:"text-xs",children:i},i)),s.scopes.length>2&&e.jsxs(ee,{variant:"outline",className:"text-xs",children:["+",s.scopes.length-2]})]})]})}),e.jsx(C,{children:Ae(s.grantType)}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:s.clientId}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>m(s.clientId,"Client ID"),children:e.jsx(he,{className:"h-3 w-3"})})]})}),e.jsxs(C,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:q[s.id]?s.clientSecret:"••••••••••••"}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>k(s.id),children:q[s.id]?e.jsx(Re,{className:"h-3 w-3"}):e.jsx(De,{className:"h-3 w-3"})}),q[s.id]&&e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>m(s.clientSecret,"Client Secret"),children:e.jsx(he,{className:"h-3 w-3"})})]}),e.jsxs(u,{size:"sm",variant:"link",className:"h-auto p-0 text-xs",onClick:()=>Q(s),children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Regenerate"]})]}),e.jsx(C,{className:"text-sm",children:Fe(s.requestCount)}),e.jsx(C,{className:"text-sm",children:s.lastUsed?new Date(s.lastUsed).toLocaleString():"Never"}),e.jsx(C,{children:e.jsx(D,{checked:s.enabled,onCheckedChange:i=>N(s,i)})}),e.jsx(C,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>G(s),children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(u,{size:"sm",variant:"destructive",onClick:()=>x(s),children:e.jsx(ve,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsx(pe,{isOpen:H,onClose:()=>F(!1),title:v?"Edit Application":"Create Application",description:v?"Update application configuration":"Create a new API application",width:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Application Name"}),e.jsx(p,{value:d.name,onChange:s=>b({...d,name:s.target.value}),placeholder:"My Integration App"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Description"}),e.jsx(p,{value:d.description,onChange:s=>b({...d,description:s.target.value}),placeholder:"Brief description of what this application does"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Grant Type"}),e.jsxs(se,{value:d.grantType,onValueChange:s=>b({...d,grantType:s}),disabled:!!v,children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"client_credentials",children:"Client Credentials (M2M)"}),e.jsx(S,{value:"password",children:"Password (User Auth)"}),e.jsx(S,{value:"authorization_code",children:"Authorization Code (OAuth)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"API Scopes"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 p-3 border rounded-lg",children:c.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:s,checked:d.scopes.includes(s),onChange:()=>be(s),className:"rounded"}),e.jsx("label",{htmlFor:s,className:"text-sm cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow API requests from this application"})]}),e.jsx(D,{checked:d.enabled,onCheckedChange:s=>b({...d,enabled:s})})]}),e.jsxs("div",{className:"flex gap-2 pt-6 border-t mt-6",children:[e.jsx(u,{variant:"outline",onClick:Z,className:"flex-1",children:"Cancel"}),e.jsx(u,{onClick:n,className:"flex-1",children:v?"Update":"Create"})]})]})})]})}function He({networkAssistantEnabled:f=!1,onToggleNetworkAssistant:w}){const[l,I]=g.useState("system");return e.jsx("div",{className:"h-full",children:e.jsxs(xe,{value:l,onValueChange:I,className:"h-full",children:[e.jsx("div",{className:"border-b",children:e.jsxs(ue,{className:"h-12 px-6",children:[e.jsxs(L,{value:"system",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"System"]}),e.jsxs(L,{value:"administrators",className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"Administrators"]}),e.jsxs(L,{value:"applications",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Applications"]})]})}),e.jsx(z,{value:"system",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(Oe,{networkAssistantEnabled:f,onToggleNetworkAssistant:w})}),e.jsx(z,{value:"administrators",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(Le,{})}),e.jsx(z,{value:"applications",className:"m-0 h-[calc(100%-3rem)]",children:e.jsx(ze,{})})]})})}export{He as Administration};
