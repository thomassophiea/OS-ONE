import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as i}from"./vendor-react-BQC692LR.js";import{a as n,w as d,t as k,B as v,C as t,b as l,c as r,d as c,T as $,i as q,j as N,k as f,h as w,e as m}from"./index-CrdvL8SR.js";import{B as j,R as H,x as y,I as u,y as S,a3 as M,a1 as b}from"./vendor-icons-DmoIqCnf.js";import"./vendor-charts-CCS-1Xlq.js";function J(){const[g,E]=i.useState([]),[x,T]=i.useState([]),[o,D]=i.useState([]),[L,A]=i.useState(!0),[B,R]=i.useState("alarms");i.useEffect(()=>{h()},[]);const h=async()=>{A(!0);try{const[s,a,z]=await Promise.all([n.getEvents(),n.getAlarms(),n.getActiveAlarms()]);E(s),T(a),D(z)}catch(s){console.error("Failed to load data:",s),d.error("Failed to load events and alarms")}finally{A(!1)}},F=async s=>{try{await n.acknowledgeAlarm(s),d.success("Alarm acknowledged"),await h()}catch(a){console.error("Failed to acknowledge alarm:",a),d.error("Failed to acknowledge alarm")}},I=async s=>{try{await n.clearAlarm(s),d.success("Alarm cleared"),await h()}catch(a){console.error("Failed to clear alarm:",a),d.error("Failed to clear alarm")}},C=s=>{switch(s?.toLowerCase()){case"critical":return e.jsx(S,{className:"h-5 w-5 text-red-500"});case"warning":return e.jsx(y,{className:"h-5 w-5 text-yellow-500"});case"info":return e.jsx(u,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(j,{className:"h-5 w-5 text-muted-foreground"})}},p=s=>{switch(s?.toLowerCase()){case"critical":return e.jsx(m,{variant:"destructive",children:"Critical"});case"warning":return e.jsx(m,{className:"bg-yellow-500",children:"Warning"});case"info":return e.jsx(m,{variant:"secondary",children:"Info"});default:return e.jsx(m,{variant:"outline",children:s})}};return L?e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsx(k,{className:"h-8 w-64"}),e.jsx(k,{className:"h-96 w-full"})]}):e.jsxs("div",{className:"space-y-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(j,{className:"h-6 w-6"}),"Events & Alarms"]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor system events and manage alarms"})]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:h,"aria-label":"Refresh events and alarms",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Active Alarms"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-2xl font-bold",children:o.length})]})})]}),e.jsxs(t,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Total Alarms"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-2xl font-bold",children:x.length})]})})]}),e.jsxs(t,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Recent Events"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold",children:g.length})]})})]}),e.jsxs(t,{children:[e.jsx(l,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Critical Issues"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-2xl font-bold",children:x.filter(s=>s.severity?.toLowerCase()==="critical").length})]})})]})]}),e.jsxs($,{value:B,onValueChange:R,children:[e.jsxs(q,{children:[e.jsxs(N,{value:"alarms",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Active Alarms (",o.length,")"]}),e.jsxs(N,{value:"all-alarms",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"All Alarms (",x.length,")"]}),e.jsxs(N,{value:"events",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Events (",g.length,")"]})]}),e.jsx(f,{value:"alarms",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"Active Alarms"}),e.jsx(w,{children:"Alarms requiring attention"})]}),e.jsx(c,{children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4 opacity-50 text-green-500"}),e.jsx("p",{children:"No active alarms"}),e.jsx("p",{className:"text-sm mt-2",children:"All systems operating normally"})]}):e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsxs("div",{className:"flex items-start justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[C(s.severity),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title||s.type}),p(s.severity)]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message||s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(b,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.timestamp).toLocaleString()})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:"outline",size:"sm",onClick:()=>F(s.id),"aria-label":`Acknowledge alarm: ${s.title||s.type}`,children:"Acknowledge"}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>I(s.id),"aria-label":`Clear alarm: ${s.title||s.type}`,children:"Clear"})]})]},s.id))})})]})}),e.jsx(f,{value:"all-alarms",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"All Alarms"}),e.jsx(w,{children:"Complete alarm history"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-2",children:x.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[C(s.severity),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:s.title||s.type}),p(s.severity),s.status&&e.jsx(m,{variant:"outline",className:"text-xs",children:s.status})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.message||s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[e.jsx(b,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.timestamp).toLocaleString()})]})]})]},s.id))})})]})}),e.jsx(f,{value:"events",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"System Events"}),e.jsx(w,{children:"Recent system activity"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-2",children:g.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx(u,{className:"h-4 w-4 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:s.type||"Event"}),s.severity&&p(s.severity)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.message||s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[e.jsx(b,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.timestamp).toLocaleString()})]})]})]},a))})})]})})]})]})}export{J as EventAlarmDashboard};
