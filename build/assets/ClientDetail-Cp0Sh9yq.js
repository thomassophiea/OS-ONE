import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as u,c as us}from"./vendor-react-BQC692LR.js";import{e as M,C as z,b as U,c as K,m as ns,n as rs,o as os,p as ls,q as ds,B as ae,d as G,t as xe,a as Ce,S as hs,w as Ee}from"./index-CrdvL8SR.js";import{ai as _e,bb as ps,bc as fs,X as He,y as gs,x as Ve,I as js,bd as Ns,ax as ts,M as es,W as ss,v as ys,aj as Qe,A as Ke,a1 as Ge,C as vs,ba as ws,h as bs,i as ks,a9 as cs,R as Se,be as Xe,S as Ss,b7 as Rs,av as Ts,b as Cs,al as As,bf as Ye,k as Ps,ab as Ds,bg as Ls}from"./vendor-icons-DmoIqCnf.js";import{u as Ms,T as Fs}from"./TimelineControls-CCmpQUlq.js";import{R as le,A as Te,C as fe,X as ge,Y as je,T as de,L as Ne,n as ye,o as ve,a as A,B as $s,p as Is,i as Ws,j as Es,k as Bs}from"./vendor-charts-CCS-1Xlq.js";import{t as Os}from"./traffic-mTtwmE2a.js";import{f as Ze}from"./units-YHb9M7pt.js";const ms={0:{short:"Reserved",description:"Reserved reason code",severity:"info"},1:{short:"Unspecified",description:"Unspecified reason",severity:"warning"},2:{short:"Auth Invalid",description:"Previous authentication no longer valid",severity:"warning"},3:{short:"Leaving BSS",description:"Station is leaving (or has left) the BSS",severity:"info"},4:{short:"Inactivity",description:"Disassociated due to inactivity",severity:"info"},5:{short:"AP Overloaded",description:"AP is unable to handle all associated stations",severity:"warning"},6:{short:"Class 2 Error",description:"Class 2 frame received from non-authenticated station",severity:"error"},7:{short:"Class 3 Error",description:"Class 3 frame received from non-associated station",severity:"error"},8:{short:"Left BSS",description:"Disassociated because station is leaving BSS",severity:"info"},9:{short:"Not Authenticated",description:"Station not authenticated with responding station",severity:"warning"},10:{short:"Power Cap Invalid",description:"Disassociated - power capability unacceptable",severity:"warning"},11:{short:"Channel Invalid",description:"Disassociated - supported channels unacceptable",severity:"warning"},12:{short:"Reserved",description:"Reserved",severity:"info"},13:{short:"Invalid IE",description:"Invalid information element",severity:"error"},14:{short:"MIC Failure",description:"Message integrity code (MIC) failure",severity:"error"},15:{short:"4-Way Timeout",description:"4-way handshake timeout",severity:"error"},16:{short:"Group Key Timeout",description:"Group key handshake timeout",severity:"error"},17:{short:"IE Mismatch",description:"Information element in 4-way handshake different from association",severity:"error"},18:{short:"Group Cipher Invalid",description:"Invalid group cipher",severity:"error"},19:{short:"Pairwise Cipher Invalid",description:"Invalid pairwise cipher",severity:"error"},20:{short:"AKMP Invalid",description:"Invalid AKMP (authentication and key management protocol)",severity:"error"},21:{short:"RSN Version Unsupported",description:"Unsupported RSN information element version",severity:"error"},22:{short:"RSN Cap Invalid",description:"Invalid RSN information element capabilities",severity:"error"},23:{short:"802.1X Auth Failed",description:"IEEE 802.1X authentication failed",severity:"error"},24:{short:"Cipher Rejected",description:"Cipher suite rejected due to security policy",severity:"error"},25:{short:"TDLS Teardown Unreachable",description:"TDLS direct-link teardown - unreachable",severity:"info"},26:{short:"TDLS Teardown Unspecified",description:"TDLS direct-link teardown - unspecified",severity:"info"},27:{short:"SSP Requested",description:"Disassociated - SSP requested",severity:"info"},28:{short:"No SSP RSNIE",description:"No SSP roaming agreement RSNIE",severity:"warning"},29:{short:"Bad SSP Cipher",description:"Bad SSP cipher or AKMP",severity:"error"},30:{short:"Not Authorized",description:"Station not authorized on this location",severity:"warning"},31:{short:"Service Change Precluded",description:"Service change precludes TS",severity:"warning"},32:{short:"Unspecified QoS",description:"Unspecified QoS-related reason",severity:"warning"},33:{short:"Insufficient Bandwidth",description:"QAP lacks sufficient bandwidth for this QSTA",severity:"warning"},34:{short:"Excessive Missing ACKs",description:"Too many frames lost due to poor channel conditions",severity:"error"},35:{short:"TXOP Limit Exceeded",description:"QSTA is transmitting outside TXOPs",severity:"warning"},36:{short:"STA Leaving",description:"Requested from peer QSTA - leaving QBSS",severity:"info"},37:{short:"STA No Longer Using",description:"Requested from peer QSTA - mechanism no longer used",severity:"info"},38:{short:"Setup Required",description:"Requested from peer - setup required",severity:"info"},39:{short:"Timeout",description:"Requested from peer - timeout",severity:"warning"},40:{short:"Cipher Unsupported",description:"Peer QSTA does not support cipher suite",severity:"error"},45:{short:"PMK R0 Rejected",description:"Peerkey handshake rejected - PMK R0 not available",severity:"error"},46:{short:"TDLS Channel Switch",description:"TDLS channel switch prohibited",severity:"info"},47:{short:"Not Authorized",description:"Station not authorized to perform operation",severity:"warning"},52:{short:"Session Timeout",description:"802.1X session timeout",severity:"info"},65535:{short:"Vendor Specific",description:"Vendor-specific reason code",severity:"info"}};function zs(c){return c==null?null:ms[c]||{short:`Code ${c}`,description:`Unknown reason code: ${c}`,severity:"warning"}}function Us(c){if(c==null)return!1;const r=ms[c];return r?r.severity==="error":!1}const P={PING_PONG:"ping-pong",STICKY_CLIENT:"sticky-client",LATE_ROAM:"late-roam",AUTH_FAILURE:"auth-failure",POOR_HANDOFF:"poor-handoff",BAND_BOUNCE:"band-bounce",INTERBAND_ROAM:"interband-roam"},Ks={[P.PING_PONG]:{title:"Ping-Pong Roaming",description:"Client is rapidly switching between APs, indicating coverage overlap issues or misconfigured roaming thresholds",severity:"warning"},[P.STICKY_CLIENT]:{title:"Sticky Client",description:"Client stayed connected to AP with poor signal instead of roaming to a better AP",severity:"warning"},[P.LATE_ROAM]:{title:"Late Roaming",description:"Client roamed at very weak signal level (below -75 dBm), indicating delayed roaming decision",severity:"warning"},[P.AUTH_FAILURE]:{title:"Authentication Failure",description:"Client failed to authenticate during roaming attempt",severity:"error"},[P.POOR_HANDOFF]:{title:"Poor Handoff",description:"Roaming completed but signal quality degraded significantly",severity:"warning"},[P.BAND_BOUNCE]:{title:"Band Bounce",description:"Client is frequently switching between frequency bands (2.4/5/6 GHz)",severity:"info"},[P.INTERBAND_ROAM]:{title:"Interband Roaming",description:"Client changed frequency bands on the same access point. This indicates band steering issues, poor 5GHz coverage, or interference causing the client to fall back to a less optimal band.",severity:"error"}};function $e(c){if(c<1e3)return`${c}ms`;if(c<6e4)return`${(c/1e3).toFixed(1)}s`;if(c<36e5)return`${Math.floor(c/6e4)}m ${Math.floor(c%6e4/1e3)}s`;const r=Math.floor(c/36e5),j=Math.floor(c%36e5/6e4);return`${r}h ${j}m`}function as(c){if(!c)return"";const r=c.toLowerCase();return r.includes("2g")||r.includes("2.4")||r==="wifi0"||r==="radio0"?"2.4GHz":r.includes("5g")||r.includes("5.")||r==="wifi1"||r==="radio1"?"5GHz":r.includes("6g")||r.includes("6.")||r==="wifi2"||r==="radio2"?"6GHz":c}function ze(c){return`${c.timestamp}-${c.apSerial}-${c.eventType}`}function Gs({events:c,apEvents:r=[],rrmEvents:j=[],macAddress:l}){const[v,x]=u.useState(null),[N,y]=u.useState(null),[q,ue]=u.useState("time"),[L,$]=u.useState("24h"),[t,E]=u.useState(50),[F,V]=u.useState(!1),[B,ee]=u.useState(!1),[_,Z]=u.useState(!1),[H,X]=u.useState(!1),[S,T]=u.useState({type:"none"}),[J,ne]=u.useState(!0),[Le,Ue]=u.useState(!0),o=u.useMemo(()=>{const s=d=>{const m=(d||"").toLowerCase();return m.includes("roam")||m.includes("register")||m.includes("associate")||m.includes("state")||m.includes("connect")||m.includes("join")||m.includes("leave")||m.includes("handoff")||m.includes("auth")||m==="roam"||m==="registration"||m==="de-registration"||m==="associate"||m==="disassociate"||m==="state change"};let i=c.filter(d=>s(d.eventType));if(q==="time"&&L!=="all"){const d=Date.now(),m=L==="1h"?d-36e5:L==="24h"?d-864e5:L==="7d"?d-6048e5:0;i=i.filter(f=>parseInt(f.timestamp)>=m)}else q==="count"&&t!=="all"&&(i=i.sort((d,m)=>parseInt(m.timestamp)-parseInt(d.timestamp)).slice(0,t));const h=i.map(d=>{const m=R=>{const Oe={},xs=/(\w+)\[([^\]]+)\]/g;let qe;for(;(qe=xs.exec(R))!==null;)Oe[qe[1]]=qe[2];return Oe},f=d.details?m(d.details):{},ie=f.Signal||f.RSS||f.RSSI,C=ie?parseInt(ie):d.rssi||void 0,oe=f.Reason||f.ReasonCode||f.Code,he=oe?parseInt(oe):d.reasonCode||void 0,We=f.Channel||(d.channel?String(d.channel):void 0),De=f.Radio;let a=f.Band||d.band;if(We&&!a){const R=parseInt(We);R>=1&&R<=14?a="2.4GHz":R>=36&&R<=165?a="5GHz":R>=1&&R<=233&&(a="6GHz")}if(!a&&De){const R=De.toLowerCase();R.includes("2g")||R.includes("2.4")||R==="wifi0"||R==="radio0"?a="2.4GHz":R.includes("5g")||R.includes("5.")||R==="wifi1"||R==="radio1"?a="5GHz":(R.includes("6g")||R.includes("6.")||R==="wifi2"||R==="radio2")&&(a="6GHz")}const g=(d.eventType||"").toLowerCase(),p=(g.includes("disassoc")||g.includes("deauth")||g.includes("de-reg"))&&Us(he);let b="good";p||d.eventType==="De-registration"||d.eventType==="Disassociate"?b="bad":C&&(C>=-60?b="good":C>=-70?b="warning":b="bad");const O=C!==void 0&&C<-75&&g.includes("roam"),pe=d.ssid||f.SSID||f.Ssid||f.Network||"N/A";return{timestamp:parseInt(d.timestamp),eventType:d.eventType,apName:d.apName||"Unknown AP",apSerial:d.apSerial||"N/A",ssid:pe,details:d.details||"",cause:f.Cause,reason:f.Reason,code:f.Code,statusCode:f.Status,reasonCode:he,channel:We,band:f.Band,radio:De,frequency:a,authMethod:f.Auth||f.AuthMethod||d.authMethod,ipAddress:d.ipAddress,ipv6Address:d.ipv6Address,rssi:C,status:b,isFailedRoam:p,isLateRoam:O}}).sort((d,m)=>d.timestamp-m.timestamp);for(let d=1;d<h.length;d++){const m=h[d-1],f=h[d];f.dwell=f.timestamp-m.timestamp,f.previousApName=m.apName,f.previousFrequency=m.frequency||m.band||"",f.previousRssi=m.rssi;const ie=m.apName===f.apName||m.apSerial===f.apSerial,C=m.frequency!==f.frequency&&m.frequency&&f.frequency,oe=m.radio!==f.radio&&m.radio&&f.radio,he=m.band!==f.band&&m.band&&f.band;ie&&(C||oe||he)&&(f.isBandSteering=!0,f.bandSteeringFrom=m.frequency||m.band||as(m.radio)||"2.4GHz",f.bandSteeringTo=f.frequency||f.band||as(f.radio)||"5GHz")}return h},[c,q,L,t]),n=u.useMemo(()=>v&&o.find(s=>ze(s)===v)||null,[v,o]),w=u.useMemo(()=>{const s=o.filter(b=>b.eventType.toLowerCase().includes("roam")||b.previousApName&&b.previousApName!==b.apName),i=o.filter(b=>b.isFailedRoam).length,h=o.filter(b=>b.isBandSteering).length,d=h,m=o.slice(1).map(b=>b.dwell||0).filter(b=>b>0),f=m.length>0?m.reduce((b,O)=>b+O,0)/m.length:0,ie=m.length>0?Math.min(...m):0,C=m.length>0?Math.max(...m):0,he=(o.length>1?o[o.length-1].timestamp-o[0].timestamp:0)/36e5,We=he>0?s.length/he:0,De={good:o.filter(b=>b.status==="good").length,warning:o.filter(b=>b.status==="warning").length,bad:o.filter(b=>b.status==="bad").length},a={};for(let b=1;b<o.length;b++){const O=o[b-1],pe=o[b];if(O.apName!==pe.apName){const R=[O.apName,pe.apName].sort().join("|");a[R]=(a[R]||0)+1}}const g=Object.entries(a).filter(([b,O])=>O>=3).map(([b,O])=>{const[pe,R]=b.split("|");return{ap1:pe,ap2:R,count:O}}).sort((b,O)=>O.count-b.count),D=[];return g.length>0&&D.push(P.PING_PONG),o.some(b=>b.isLateRoam)&&D.push(P.LATE_ROAM),i>0&&D.push(P.AUTH_FAILURE),d>0&&D.push(P.INTERBAND_ROAM),h>=3&&D.push(P.BAND_BOUNCE),o.filter(b=>b.dwell&&b.dwell>6e5&&b.previousRssi&&b.previousRssi<-75).length>0&&D.push(P.STICKY_CLIENT),{totalEvents:o.length,totalRoams:s.length,failedRoams:i,bandSteers:h,interbandRoams:d,avgDwellTime:f,minDwellTime:ie,maxDwellTime:C,roamsPerHour:We,signalQuality:De,pingPongPairs:g,issues:D}},[o]),I=u.useMemo(()=>{if(!J||r.length===0)return[];let s=[...r];if(q==="time"&&L!=="all"){const i=Date.now(),h=L==="1h"?i-36e5:L==="24h"?i-864e5:L==="7d"?i-6048e5:0;s=s.filter(d=>parseInt(d.timestamp)>=h)}return s.map(i=>({...i,timestamp:parseInt(i.timestamp)}))},[r,J,q,L]),Y=u.useMemo(()=>{if(!Le||j.length===0)return[];let s=[...j];if(q==="time"&&L!=="all"){const i=Date.now(),h=L==="1h"?i-36e5:L==="24h"?i-864e5:L==="7d"?i-6048e5:0;s=s.filter(d=>parseInt(d.timestamp)>=h)}return s.map(i=>({...i,timestamp:parseInt(i.timestamp)}))},[j,Le,q,L]),{uniqueAPs:se,timeRange:Q}=u.useMemo(()=>{const s=new Set;let i=1/0,h=-1/0;return o.forEach(d=>{s.add(d.apName),i=Math.min(i,d.timestamp),h=Math.max(h,d.timestamp)}),I.forEach(d=>{d.apName&&s.add(d.apName),i=Math.min(i,d.timestamp),h=Math.max(h,d.timestamp)}),Y.forEach(d=>{d.apName&&s.add(d.apName),i=Math.min(i,d.timestamp),h=Math.max(h,d.timestamp)}),{uniqueAPs:Array.from(s),timeRange:{min:i,max:h}}},[o,I,Y]),Ae=s=>new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),re=s=>Q.max===Q.min?50:(s-Q.min)/(Q.max-Q.min)*100,te=s=>se.indexOf(s),Me=(s,i)=>{if(S.type==="none")return!1;if(S.type==="issue"&&S.issue)switch(S.issue){case P.PING_PONG:return!1;case P.LATE_ROAM:return s.isLateRoam===!0;case P.AUTH_FAILURE:return s.isFailedRoam===!0;case P.BAND_BOUNCE:return s.isBandSteering===!0;case P.INTERBAND_ROAM:return s.isBandSteering===!0;case P.STICKY_CLIENT:return(s.dwell&&s.dwell>6e5&&s.previousRssi&&s.previousRssi<-75)===!0;default:return!1}if(S.type==="pingpong"&&S.apPair){const{ap1:h,ap2:d}=S.apPair;if(i>0){const m=o[i-1];if(m.apName===h&&s.apName===d||m.apName===d&&s.apName===h)return!0}if(i<o.length-1){const m=o[i+1];if(s.apName===h&&m.apName===d||s.apName===d&&m.apName===h)return!0}}return!1},Pe=u.useMemo(()=>S.type==="none"?[]:o.filter((s,i)=>Me(s,i)),[S,o]),Be=s=>{S.type==="issue"&&S.issue===s?T({type:"none"}):(T({type:"issue",issue:s}),x(null))},Fe=(s,i)=>{S.type==="pingpong"&&S.apPair?.ap1===s&&S.apPair?.ap2===i?T({type:"none"}):(T({type:"pingpong",apPair:{ap1:s,ap2:i}}),x(null))};if(o.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground font-medium mb-2",children:"No roaming events found"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:c.length===0?"No station events available for this client":`Found ${c.length} total events, but none match roaming filters`}),c.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{className:"mb-2",children:["Event types found: ",[...new Set(c.map(s=>s.eventType))].join(", ")||"None"]}),e.jsx("p",{children:'Try selecting "All Time" filter or check the browser console for details'})]})]});const W=Math.max(80,Math.min(120,400/se.length));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-4 py-2 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold whitespace-nowrap",children:"Roaming Trail"}),e.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[Ae(Q.min)," - ",Ae(Q.max)]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{children:[e.jsx("strong",{children:w.totalEvents})," events"]}),e.jsxs("span",{children:[e.jsx("strong",{children:w.totalRoams})," roams"]}),e.jsxs("span",{children:[e.jsx("strong",{children:w.roamsPerHour.toFixed(1)}),"/hr"]}),w.failedRoams>0&&e.jsxs("span",{className:"text-red-500",children:[e.jsx("strong",{children:w.failedRoams})," failed"]}),w.interbandRoams>0&&e.jsxs("span",{className:"text-red-500",children:[e.jsx("strong",{children:w.interbandRoams})," interband"]})]}),e.jsxs("div",{className:"flex items-center gap-3 border-l pl-3 ml-1",children:[e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:J,onChange:s=>ne(s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"}),e.jsx("span",{className:"text-xs text-blue-600 group-hover:text-blue-700 font-medium whitespace-nowrap",children:"AP Events"}),I.length>0&&e.jsxs("span",{className:"text-[10px] text-blue-500",children:["(",I.length,")"]})]}),e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:Le,onChange:s=>Ue(s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500 cursor-pointer"}),e.jsx("span",{className:"text-xs text-purple-600 group-hover:text-purple-700 font-medium whitespace-nowrap",children:"RRM Events"}),Y.length>0&&e.jsxs("span",{className:"text-[10px] text-purple-500",children:["(",Y.length,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1 bg-muted rounded p-0.5",children:[e.jsx("button",{onClick:()=>V(!F),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${F?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Toggle stats panel",children:"Stats"}),e.jsx("button",{onClick:()=>ee(!B),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${B?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Toggle alerts",children:"Alerts"}),e.jsx("button",{onClick:()=>Z(!_),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${_?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Toggle legend",children:"Legend"})]}),e.jsxs("div",{className:"flex gap-1 bg-muted rounded p-0.5",children:[q==="time"?e.jsx(e.Fragment,{children:["1h","24h","7d","all"].map(s=>e.jsx("button",{onClick:()=>$(s),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${L===s?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:s==="1h"?"1H":s==="24h"?"24H":s==="7d"?"7D":"All"},s))}):e.jsx(e.Fragment,{children:[10,50,100,"all"].map(s=>e.jsx("button",{onClick:()=>E(s),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${t===s?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:s==="all"?"All":s},s))}),e.jsx("button",{onClick:()=>ue(q==="time"?"count":"time"),className:"px-2 py-1 text-xs font-medium rounded text-muted-foreground hover:text-foreground transition-colors border-l border-border ml-1",title:`Switch to ${q==="time"?"count":"time"} filter`,children:q==="time"?"#":"T"})]}),e.jsx("button",{onClick:()=>X(!H),className:`p-1.5 rounded transition-colors ${H?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"}`,title:H?"Hide details panel":"Show details panel",children:H?e.jsx(ps,{className:"h-4 w-4"}):e.jsx(fs,{className:"h-4 w-4"})})]})]})}),B&&(w.issues.length>0||w.pingPongPairs.length>0)&&e.jsxs("div",{className:"px-4 py-2 border-b bg-muted/20 flex flex-wrap items-center gap-2",children:[S.type!=="none"&&e.jsxs("button",{onClick:()=>T({type:"none"}),className:"flex items-center gap-1 px-2 py-1 rounded text-xs bg-muted hover:bg-muted/80 text-muted-foreground",children:[e.jsx(He,{className:"h-3 w-3"}),"Clear"]}),w.issues.map(s=>{const i=Ks[s],h=S.type==="issue"&&S.issue===s,d=o.filter((m,f)=>s===P.LATE_ROAM?m.isLateRoam:s===P.AUTH_FAILURE?m.isFailedRoam:s===P.BAND_BOUNCE||s===P.INTERBAND_ROAM?m.isBandSteering:s===P.STICKY_CLIENT?m.dwell&&m.dwell>6e5&&m.previousRssi&&m.previousRssi<-75:!1).length;return e.jsxs("button",{onClick:()=>Be(s),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs border cursor-pointer transition-all ${h?"ring-2 ring-offset-1 ring-primary scale-105":"hover:scale-105"} ${i.severity==="error"?"bg-red-500/10 border-red-500/30 text-red-700 dark:text-red-400":i.severity==="warning"?"bg-amber-500/10 border-amber-500/30 text-amber-700 dark:text-amber-400":"bg-blue-500/10 border-blue-500/30 text-blue-700 dark:text-blue-400"}`,children:[i.severity==="error"?e.jsx(gs,{className:"h-3 w-3"}):i.severity==="warning"?e.jsx(Ve,{className:"h-3 w-3"}):e.jsx(js,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium",children:i.title}),d>0&&e.jsxs("span",{className:"opacity-70",children:["(",d,")"]})]},s)}),w.pingPongPairs.slice(0,3).map((s,i)=>{const h=S.type==="pingpong"&&S.apPair?.ap1===s.ap1&&S.apPair?.ap2===s.ap2;return e.jsxs("button",{onClick:()=>Fe(s.ap1,s.ap2),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs bg-amber-500/10 border border-amber-500/30 text-amber-700 dark:text-amber-400 cursor-pointer transition-all ${h?"ring-2 ring-offset-1 ring-primary scale-105":"hover:scale-105"}`,children:[e.jsx(Ns,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.ap1?.split("-").pop()||s.ap1," ↔ ",s.ap2?.split("-").pop()||s.ap2,": ",s.count,"x"]})]},i)}),S.type!=="none"&&Pe.length>0&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[Pe.length," event",Pe.length!==1?"s":""," highlighted"]})]}),F&&e.jsx("div",{className:"px-4 py-2 border-b bg-muted/10",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ts,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Avg Dwell:"}),e.jsx("span",{className:"font-semibold",children:$e(w.avgDwellTime)})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"Min:"}),e.jsx("span",{className:"font-medium",children:$e(w.minDwellTime)})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"Max:"}),e.jsx("span",{className:"font-medium",children:$e(w.maxDwellTime)})]})]}),e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Signal:"}),e.jsxs("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden flex max-w-xs",children:[w.signalQuality.good>0&&e.jsx("div",{className:"h-full bg-green-500",style:{width:`${w.signalQuality.good/w.totalEvents*100}%`}}),w.signalQuality.warning>0&&e.jsx("div",{className:"h-full bg-orange-500",style:{width:`${w.signalQuality.warning/w.totalEvents*100}%`}}),w.signalQuality.bad>0&&e.jsx("div",{className:"h-full bg-red-500",style:{width:`${w.signalQuality.bad/w.totalEvents*100}%`}})]}),e.jsxs("div",{className:"flex gap-2 text-[10px]",children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),Math.round(w.signalQuality.good/w.totalEvents*100),"%"]}),e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"}),Math.round(w.signalQuality.warning/w.totalEvents*100),"%"]}),e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),Math.round(w.signalQuality.bad/w.totalEvents*100),"%"]})]})]})]})}),_&&e.jsxs("div",{className:"px-4 py-1.5 border-b bg-muted/5 flex items-center gap-6 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Signal:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Good"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Warning"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Bad"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Lines:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{width:"16",height:"2",viewBox:"0 0 16 2",children:e.jsx("line",{x1:"0",y1:"1",x2:"16",y2:"1",stroke:"currentColor",strokeWidth:"2",className:"text-primary/40"})}),"Roam"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{width:"16",height:"2",viewBox:"0 0 16 2",children:e.jsx("line",{x1:"0",y1:"1",x2:"16",y2:"1",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"3,2"})}),"Interband"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Correlation:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-blue-500"}),"AP Event"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-purple-500",style:{transform:"rotate(45deg)"}}),"RRM Event"]})]})]}),e.jsxs("div",{className:"flex-1 flex min-h-0",children:[e.jsxs("div",{className:"w-60 border-r bg-muted/20 flex-shrink-0",children:[e.jsxs("div",{className:"bg-muted/40 border-b px-3 py-2 font-semibold text-xs",style:{height:"40px",display:"flex",alignItems:"center"},children:["Access Points (",se.length,")"]}),se.map(s=>{const i=o.filter(m=>m.apName===s),d=i.filter(m=>m.dwell).map(m=>m.dwell||0).reduce((m,f)=>m+f,0);return e.jsxs("div",{className:"px-3 py-2 border-b flex items-center gap-2 hover:bg-accent/50 transition-colors",style:{height:`${W}px`},children:[e.jsx(_e,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-xs truncate",children:s}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:[i.length," events"]}),d>0&&e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Dwell: ",$e(d)]})]})]},s)})]}),e.jsx("div",{className:"flex-1 relative",onClick:()=>x(null),children:e.jsxs("div",{className:"relative w-full h-full",children:[[0,25,50,75].map(s=>e.jsx("div",{className:"absolute top-0 bottom-0 border-l border-border/40",style:{left:`${s}%`},children:e.jsx("div",{className:"text-[10px] text-muted-foreground px-1 py-2 whitespace-nowrap",style:{height:"40px",display:"flex",alignItems:"center"},children:Ae(Q.min+(Q.max-Q.min)*(s/100))})},s)),se.map((s,i)=>e.jsx("div",{className:"absolute left-0 right-0 border-b border-border/30",style:{top:`${i*W+40}px`,height:`${W}px`}},s)),o.map((s,i)=>{if(i===o.length-1)return null;const h=o[i+1],d=re(s.timestamp),m=te(s.apName)*W+40+W/2,f=re(h.timestamp),ie=te(h.apName)*W+40+W/2,C=h.isBandSteering,oe=h.isFailedRoam;return e.jsx("svg",{className:"absolute cursor-pointer",style:{left:0,top:0,width:"100%",height:"100%",zIndex:5},onClick:he=>{he.stopPropagation(),x(ze(h)),X(!0)},children:e.jsx("line",{x1:`${d}%`,y1:m,x2:`${f}%`,y2:ie,stroke:oe||C?"#ef4444":"currentColor",strokeWidth:"2",strokeDasharray:C?"6,3":oe?"3,3":"none",className:!C&&!oe?"text-primary/40":""})},`line-${i}`)}),o.map((s,i)=>{const h=re(s.timestamp),d=te(s.apName)*W+40+W/2,m=Me(s,i),f=s.isFailedRoam?"bg-red-500 ring-2 ring-red-300":s.isLateRoam?"bg-orange-500 ring-2 ring-orange-300":s.status==="good"?"bg-green-500":s.status==="warning"?"bg-orange-500":"bg-red-500",ie=S.type!=="none"&&!m;return e.jsxs(us.Fragment,{children:[e.jsx("div",{onClick:C=>{C.stopPropagation(),x(ze(s)),X(!0),T({type:"none"})},className:`
                      absolute rounded-full border-2 border-background
                      hover:scale-125 transition-all cursor-pointer z-10
                      ${f}
                      ${v===ze(s)?"ring-2 ring-primary ring-offset-1 scale-125":""}
                      ${m?"w-5 h-5 ring-2 ring-yellow-400 ring-offset-1 scale-110 z-20":"w-4 h-4"}
                      ${ie?"opacity-30":""}
                    `,style:{left:`${h}%`,top:`${d}px`,transform:"translate(-50%, -50%)"},role:"button",tabIndex:0,onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.stopPropagation(),x(ze(s)),X(!0))}}),s.isFailedRoam&&e.jsx("div",{className:"absolute z-20 pointer-events-none",style:{left:`${h}%`,top:`${d}px`,transform:"translate(-50%, -50%)"},children:e.jsx(He,{className:"h-3 w-3 text-white"})}),s.isBandSteering&&e.jsx("div",{className:"absolute z-20 cursor-pointer",style:{left:`${h}%`,top:`${d+10}px`,transform:"translate(-50%, 0)"},onClick:C=>{C.stopPropagation(),x(ze(s)),X(!0)},children:e.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",children:e.jsx("path",{d:"M 6 0 L 11 7 L 1 7 Z",fill:"#ef4444",stroke:"#fff",strokeWidth:"1"})})})]},i)}),J&&I.map((s,i)=>{const h=re(s.timestamp),d=s.apName?te(s.apName):0,m=d*W+40+W/2;return d<0?null:e.jsx("div",{onClick:f=>{f.stopPropagation(),y(s),x(null),X(!0)},className:`
                    absolute w-3.5 h-3.5 rounded-sm border-2 border-background bg-blue-500
                    hover:scale-125 transition-all cursor-pointer z-10
                    ${N===s?"ring-2 ring-blue-400 ring-offset-1 scale-125":""}
                  `,style:{left:`${h}%`,top:`${m-12}px`,transform:"translate(-50%, -50%)"},title:`AP Event: ${s.eventType||"Unknown"} at ${s.apName||"Unknown AP"}`,role:"button",tabIndex:0},`ap-${i}`)}),Le&&Y.map((s,i)=>{const h=re(s.timestamp),d=s.apName?te(s.apName):0,m=d*W+40+W/2;return d<0?null:e.jsx("div",{onClick:f=>{f.stopPropagation(),y(s),x(null),X(!0)},className:`
                    absolute w-3.5 h-3.5 bg-purple-500 border-2 border-background
                    hover:scale-125 transition-all cursor-pointer z-10
                    ${N===s?"ring-2 ring-purple-400 ring-offset-1 scale-125":""}
                  `,style:{left:`${h}%`,top:`${m+12}px`,transform:"translate(-50%, -50%) rotate(45deg)"},title:`RRM Event: ${s.eventType||"Unknown"} at ${s.apName||"Unknown AP"}`,role:"button",tabIndex:0},`rrm-${i}`)})]})}),H&&n&&e.jsxs("div",{className:"w-72 border-l bg-background p-3 flex-shrink-0 z-20 overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Event Details"}),e.jsx("button",{onClick:()=>x(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(He,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 items-end justify-end",children:[e.jsx(M,{variant:n.isFailedRoam?"destructive":n.eventType==="Registration"||n.eventType==="Associate"?"default":n.eventType==="De-registration"||n.eventType==="Disassociate"?"destructive":"secondary",children:n.eventType}),n.isFailedRoam&&e.jsx(M,{variant:"destructive",className:"text-xs",children:"Failed"}),n.isLateRoam&&e.jsx(M,{variant:"secondary",className:"text-xs bg-orange-500/20 text-orange-700",children:"Late Roam"}),n.isBandSteering&&e.jsx(M,{className:"bg-red-500 text-white text-xs",children:"Interband"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[n.dwell&&e.jsxs("div",{className:"p-2 bg-muted/50 rounded flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Dwell at previous AP:"}),e.jsx("span",{className:"font-medium",children:$e(n.dwell)})]}),n.reasonCode&&(()=>{const s=zs(n.reasonCode);return s?e.jsxs("div",{className:`p-3 rounded border-l-4 ${s.severity==="error"?"bg-red-500/10 border-red-500":s.severity==="warning"?"bg-amber-500/10 border-amber-500":"bg-blue-500/10 border-blue-500"}`,children:[e.jsxs("div",{className:"font-medium text-sm",children:["Reason Code ",n.reasonCode,": ",s.short]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}):null})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(es,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Access Point"})]}),e.jsx("div",{className:"ml-6 text-muted-foreground",children:n.apName}),e.jsx("div",{className:"ml-6 text-xs text-muted-foreground font-mono",children:n.apSerial}),n.previousApName&&n.previousApName!==n.apName&&e.jsxs("div",{className:"ml-6 text-xs text-muted-foreground mt-1",children:["From: ",n.previousApName]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"SSID"})]}),e.jsx("div",{className:"ml-6 text-muted-foreground",children:n.ssid})]}),(()=>{const s=[],i=n.previousApName&&n.previousApName!==n.apName,h=n.isBandSteering;return i?(n.previousRssi!==void 0?n.previousRssi<-75?s.push({type:"warning",title:"Signal-Triggered Roam (Late)",description:`Client roamed from ${n.previousApName} at ${n.previousRssi} dBm. This is below the optimal roaming threshold (-70 dBm). The client waited too long to roam, which may indicate sticky client behavior or aggressive roaming settings on the AP.`}):n.previousRssi<-70?s.push({type:"info",title:"Normal Signal-Triggered Roam",description:`Client roamed from ${n.previousApName} at ${n.previousRssi} dBm. This is within the expected roaming threshold range. The client properly detected a better AP and transitioned.`}):s.push({type:"info",title:"Proactive Roam (Good Signal)",description:`Client roamed from ${n.previousApName} while signal was still good (${n.previousRssi} dBm). This could be due to 802.11k/v assistance, load balancing, or the client finding a significantly better AP.`}):s.push({type:"info",title:"AP Transition",description:`Client moved from ${n.previousApName} to ${n.apName}. Signal strength data not available for detailed analysis.`}),n.dwell&&(n.dwell<3e4?s.push({type:"warning",title:"Rapid Roaming",description:`Client only stayed at previous AP for ${$e(n.dwell)}. Frequent roaming may indicate coverage gaps, interference, or misconfigured roaming thresholds.`}):n.dwell>36e5&&s.push({type:"success",title:"Stable Connection",description:`Client maintained connection to previous AP for ${$e(n.dwell)} before roaming. This indicates good network stability.`})),n.rssi!==void 0&&(n.rssi>=-60?s.push({type:"success",title:"Excellent New Connection",description:`New AP signal is excellent at ${n.rssi} dBm. Client should experience optimal performance.`}):n.rssi>=-70?s.push({type:"info",title:"Good New Connection",description:`New AP signal is acceptable at ${n.rssi} dBm. Performance should be adequate for most applications.`}):s.push({type:"warning",title:"Weak New Connection",description:`New AP signal is weak at ${n.rssi} dBm. Client may experience reduced throughput or need to roam again soon.`}))):h?(s.push({type:"error",title:"Interband Roam (Same AP)",description:`Client switched from ${n.bandSteeringFrom||"unknown band"} to ${n.bandSteeringTo||"unknown band"} on the same AP. This typically indicates interference, signal degradation, or suboptimal band steering configuration.`}),(n.bandSteeringTo?.includes("2.4")||n.bandSteeringTo?.includes("2G"))&&s.push({type:"warning",title:"Fallback to 2.4GHz",description:"Client fell back to 2.4GHz band. This usually indicates 5GHz signal issues (interference, distance, or obstacles). Consider checking 5GHz radio power and channel utilization."})):n.eventType.toLowerCase().includes("register")||n.eventType.toLowerCase().includes("associate")?(s.push({type:"info",title:"Initial Association",description:`Client associated to ${n.apName}. This appears to be a new connection rather than a roam from another AP.`}),n.rssi!==void 0&&n.rssi<-70&&s.push({type:"warning",title:"Weak Initial Signal",description:`Client associated with ${n.rssi} dBm signal. Consider why the client chose this AP over potentially closer ones. May indicate coverage issues or client roaming aggressiveness settings.`})):(n.eventType.toLowerCase().includes("de-reg")||n.eventType.toLowerCase().includes("disassoc"))&&(n.isFailedRoam?s.push({type:"error",title:"Failed Connection",description:"Client disconnection due to authentication or association failure. Check RADIUS logs and verify client credentials."}):s.push({type:"info",title:"Client Disconnection",description:`Client disconnected from ${n.apName}. This may be intentional (client left coverage) or due to network issues.`})),s.length===0?null:e.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ys,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-semibold text-sm",children:"Roam Insight"})]}),e.jsx("div",{className:"space-y-2",children:s.map((d,m)=>e.jsxs("div",{className:`p-2 rounded text-xs border-l-2 ${d.type==="success"?"bg-green-500/10 border-green-500 text-green-800 dark:text-green-300":d.type==="warning"?"bg-amber-500/10 border-amber-500 text-amber-800 dark:text-amber-300":d.type==="error"?"bg-red-500/10 border-red-500 text-red-800 dark:text-red-300":"bg-blue-500/10 border-blue-500 text-blue-800 dark:text-blue-300"}`,children:[e.jsx("div",{className:"font-medium mb-0.5",children:d.title}),e.jsx("div",{className:"opacity-90",children:d.description})]},m))})]})})(),n.isBandSteering&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-950 border-l-4 border-red-500 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ve,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-semibold text-red-700 dark:text-red-300",children:"Interband Roaming (Same AP)"})]}),e.jsxs("div",{className:"text-sm",children:[n.bandSteeringFrom," → ",n.bandSteeringTo]}),e.jsx("div",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-1",children:"Band change on the same AP indicates poor band steering configuration or interference issues."})]}),n.rssi&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Qe,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Signal Strength"})]}),e.jsxs("div",{className:"ml-6 flex items-center gap-2",children:[e.jsxs("span",{className:`font-mono ${n.rssi>=-60?"text-green-600":n.rssi>=-70?"text-orange-500":"text-red-500"}`,children:[n.rssi," dBm"]}),n.previousRssi&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(was ",n.previousRssi," dBm)"]})]})]}),(n.channel||n.frequency)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ke,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Channel/Band"})]}),e.jsxs("div",{className:"ml-6 text-muted-foreground",children:[n.channel&&`Ch ${n.channel}`,n.channel&&n.frequency&&" • ",n.frequency]})]}),n.authMethod&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Auth:"}),e.jsx("span",{className:"font-medium",children:n.authMethod})]}),(n.ipAddress||n.ipv6Address)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(es,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"IP Address"})]}),n.ipAddress&&e.jsxs("div",{className:"ml-6 flex items-center gap-2",children:[e.jsx("span",{className:`font-mono text-xs ${n.ipAddress.startsWith("169.")?"text-amber-500":"text-muted-foreground"}`,children:n.ipAddress}),n.ipAddress.startsWith("169.")&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-amber-500/20 text-amber-600 dark:text-amber-400 rounded font-medium",children:"Self-Assigned (DHCP Issue)"})]}),n.ipv6Address&&e.jsx("div",{className:"ml-6 text-muted-foreground font-mono text-xs truncate",children:n.ipv6Address})]}),(n.isFailedRoam||n.isLateRoam||n.isBandSteering||n.dwell&&n.dwell>6e5&&n.previousRssi&&n.previousRssi<-75)&&e.jsxs("div",{className:"border-t pt-3 mt-3",children:[e.jsxs("div",{className:"font-medium mb-2 text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ve,{className:"h-3 w-3"}),"Alert Analysis"]}),e.jsxs("div",{className:"space-y-2",children:[n.isFailedRoam&&e.jsxs("div",{className:"p-2 bg-red-500/10 border border-red-500/30 rounded text-xs",children:[e.jsx("div",{className:"font-medium text-red-700 dark:text-red-400",children:"Authentication Failure"}),e.jsx("div",{className:"text-red-600/80 dark:text-red-400/80 mt-1",children:"Client failed to authenticate. Check RADIUS logs, verify credentials, and ensure PMK caching is working properly."})]}),n.isLateRoam&&e.jsxs("div",{className:"p-2 bg-orange-500/10 border border-orange-500/30 rounded text-xs",children:[e.jsx("div",{className:"font-medium text-orange-700 dark:text-orange-400",children:"Late Roaming"}),e.jsxs("div",{className:"text-orange-600/80 dark:text-orange-400/80 mt-1",children:["Client roamed at ",n.rssi," dBm (below -75 dBm threshold). Consider adjusting client roaming aggressiveness or AP coverage overlap."]})]}),n.isBandSteering&&e.jsxs("div",{className:"p-2 bg-red-500/10 border border-red-500/30 rounded text-xs",children:[e.jsx("div",{className:"font-medium text-red-700 dark:text-red-400",children:"Interband Roaming (Same AP)"}),e.jsxs("div",{className:"text-red-600/80 dark:text-red-400/80 mt-1",children:["Client changed bands from ",n.bandSteeringFrom||n.previousFrequency||"unknown band"," to ",n.bandSteeringTo||n.frequency||"unknown band"," on ",e.jsx("strong",{children:n.apName}),"."]}),e.jsx("div",{className:"text-red-600/80 dark:text-red-400/80 mt-2 font-medium",children:"This is especially problematic because:"}),e.jsxs("ul",{className:"text-red-600/80 dark:text-red-400/80 mt-1 ml-3 list-disc space-y-0.5",children:[e.jsx("li",{children:"The client couldn't maintain connection on the preferred band"}),e.jsx("li",{children:"May indicate interference, poor signal, or band steering misconfiguration"}),e.jsx("li",{children:"If falling to 2.4GHz: likely 5GHz coverage/interference issues"}),e.jsx("li",{children:"Consider adjusting band steering thresholds or AP radio power"})]})]}),n.dwell&&n.dwell>6e5&&n.previousRssi&&n.previousRssi<-75&&e.jsxs("div",{className:"p-2 bg-amber-500/10 border border-amber-500/30 rounded text-xs",children:[e.jsx("div",{className:"font-medium text-amber-700 dark:text-amber-400",children:"Sticky Client Behavior"}),e.jsxs("div",{className:"text-amber-600/80 dark:text-amber-400/80 mt-1",children:["Client stayed at ",n.previousApName," for ",$e(n.dwell)," with poor signal (",n.previousRssi," dBm). Consider enabling 802.11v BSS Transition Management or adjusting minimum RSSI thresholds."]})]})]})]})]})]},n.timestamp),H&&N&&!n&&e.jsxs("div",{className:"w-72 border-l bg-background p-3 flex-shrink-0 z-20 overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"channel"in N?"RRM Event":"AP Event"}),e.jsx("button",{onClick:()=>y(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(He,{className:"h-4 w-4"})})]}),e.jsx(M,{className:"channel"in N?"bg-purple-500 text-white":"bg-blue-500 text-white",children:N.eventType||"Event"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ge,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Time"})]}),e.jsx("div",{className:"ml-6 text-muted-foreground text-xs",children:new Date(parseInt(N.timestamp)).toLocaleString()})]}),N.apName&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_e,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Access Point"})]}),e.jsx("div",{className:"ml-6 text-muted-foreground",children:N.apName}),N.apSerial&&e.jsx("div",{className:"ml-6 text-xs text-muted-foreground font-mono",children:N.apSerial})]}),"channel"in N&&N.channel&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ke,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Channel"})]}),e.jsxs("div",{className:"ml-6 text-muted-foreground",children:[N.previousChannel&&e.jsxs("span",{className:"text-red-500",children:[N.previousChannel," → "]}),e.jsx("span",{className:"text-green-600 font-medium",children:N.channel})]})]}),"txPower"in N&&N.txPower&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Qe,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Tx Power"})]}),e.jsxs("div",{className:"ml-6 text-muted-foreground",children:[N.previousTxPower&&e.jsxs("span",{className:"text-red-500",children:[N.previousTxPower," dBm → "]}),e.jsxs("span",{className:"text-green-600 font-medium",children:[N.txPower," dBm"]})]})]}),"band"in N&&N.band&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Band:"}),e.jsx("span",{className:"font-medium",children:N.band})]}),"reason"in N&&N.reason&&e.jsxs("div",{className:"p-2 bg-purple-500/10 border border-purple-500/30 rounded text-xs",children:[e.jsx("div",{className:"font-medium text-purple-700 dark:text-purple-400",children:"Reason"}),e.jsx("div",{className:"text-purple-600/80 dark:text-purple-400/80 mt-1",children:N.reason})]}),N.details&&e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-1 text-xs text-muted-foreground",children:"Details"}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono bg-background/50 p-2 rounded break-words",children:N.details})]}),N.level&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Level:"}),e.jsx(M,{variant:N.level.toLowerCase()==="error"?"destructive":N.level.toLowerCase()==="warning"?"secondary":"outline",children:N.level})]})]})]},N.timestamp)]}),e.jsx("div",{className:"px-4 py-1.5 border-t bg-muted/20 text-center",children:e.jsx("p",{className:"text-[10px] text-muted-foreground opacity-60",children:"UI Design by Metka Dragos, Sr Product Manager, Product Experience & Thomas Sophiea, Product Manager"})})]})}const Ie=[{value:"3H",label:"Last 3 Hours",resolution:15},{value:"24H",label:"Last 24 Hours",resolution:60},{value:"7D",label:"Last 7 Days",resolution:360},{value:"30D",label:"Last 30 Days",resolution:1440}],ce={backgroundColor:"hsl(var(--background) / 0.9)",border:"1px solid hsl(var(--border) / 0.3)",borderRadius:"4px",padding:"4px 6px",fontSize:"9px",backdropFilter:"blur(8px)"};function Hs(c,r){const j=new Date(c);return r==="3H"||r==="24H"?j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):j.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Re(c,r){return c>=1e9?`${(c/1e9).toFixed(1)} Gbps`:c>=1e6?`${(c/1e6).toFixed(1)} Mbps`:c>=1e3?`${(c/1e3).toFixed(1)} Kbps`:`${c.toFixed(0)} bps`}function we(c,r,j){if(!c||c.length===0||r===null)return j.reduce((x,N)=>({...x,[N]:null}),{});let l=c[0],v=Math.abs(c[0].timestamp-r);for(const x of c){const N=Math.abs(x.timestamp-r);N<v&&(v=N,l=x)}return j.reduce((x,N)=>({...x,[N]:l[N]!==void 0?l[N]:null}),{})}function be(c,r){if(!c||!c.statistics||c.statistics.length===0)return[];const j=new Map;return c.statistics.forEach(l=>{l.values&&l.values.forEach(v=>{const x=v.timestamp;j.has(x)||j.set(x,{timestamp:x,time:Hs(x,r)});const N=j.get(x);N[l.statName]=parseFloat(v.value)||0})}),Array.from(j.values()).sort((l,v)=>l.timestamp-v.timestamp)}function ke(c){return!c||c.length===0?!1:c.some(r=>Object.keys(r).filter(l=>l!=="timestamp"&&l!=="time").some(l=>{const v=r[l];return v!=null&&!isNaN(v)&&v!==0}))}const k={secondary:"hsl(var(--muted-foreground))",success:"#22c55e",warning:"#f59e0b",blue:"#3b82f6",purple:"#8b5cf6",cyan:"#06b6d4",orange:"#f97316",pink:"#ec4899"},me=["#3b82f6","#8b5cf6","#06b6d4","#22c55e","#f59e0b","#ef4444","#f97316","#ec4899","#6366f1","#14b8a6"];function Qs({macAddress:c,clientName:r,onOpenFullScreen:j}){const[l,v]=u.useState(null),[x,N]=u.useState(!0),[y,q]=u.useState("3H"),[ue,L]=u.useState(!1);Ie.find(t=>t.value===y)||Ie[0],u.useEffect(()=>{let t=!1;return(async()=>{try{N(!0);const F=Ie.find(B=>B.value===y)?.resolution||15,V=await Ce.getClientInsights(c,y,F,"default");t||v(V)}catch(F){console.error("Failed to load Client insights:",F)}finally{t||N(!1)}})(),()=>{t=!0}},[c,y]);const $=u.useMemo(()=>{if(!l)return null;const t=l.throughputReport?.[0],E=l.rfQuality?.[0],F=t?.statistics?.find(S=>S.statName==="Total")?.values,V=E?.statistics?.find(S=>S.statName==="rfQuality")?.values,B=l.topAppGroupsByThroughputReport?.[0]?.statistics||[],ee=B.length>0?B[0]:null,_=F&&F.length>0?F.reduce((S,T)=>S+(parseFloat(T.value)||0),0)/F.length:null,Z=V&&V.length>0?V.reduce((S,T)=>S+(parseFloat(T.value)||0),0)/V.length:null,H=ee?.name||null;return _!==null&&!isNaN(_)&&_>0||Z!==null&&!isNaN(Z)&&Z>0||H!==null?{avgThroughput:_,avgRfQuality:Z,topAppGroup:H}:null},[l]);return e.jsxs(z,{className:j?"cursor-pointer border-primary/30 hover:border-primary hover:bg-accent/50 hover:shadow-md transition-all":"",onClick:j,children:[e.jsx(U,{className:"pb-3",children:e.jsxs(K,{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Client Insights"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 ml-auto mr-1",children:[e.jsxs(ns,{value:y,onValueChange:q,children:[e.jsxs(rs,{className:"w-[110px] h-7 text-xs",onClick:t=>{t.preventDefault(),t.stopPropagation()},children:[e.jsx(Ge,{className:"h-3 w-3 mr-1"}),e.jsx(os,{})]}),e.jsx(ls,{children:Ie.map(t=>e.jsx(ds,{value:t.value,children:t.label},t.value))})]}),j&&e.jsx(ae,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),j()},className:"h-7 w-7 p-0",title:"Expand Full Screen",children:e.jsx(ws,{className:"h-4 w-4"})}),e.jsx(ae,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),L(!ue)},className:"h-7 w-7 p-0",children:ue?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(ks,{className:"h-4 w-4"})})]})]})}),ue&&e.jsx(G,{className:"pt-2",children:x?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(xe,{className:"h-14"}),e.jsx(xe,{className:"h-14"}),e.jsx(xe,{className:"h-14"})]}):$?e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[$.avgThroughput!==null&&!isNaN($.avgThroughput)&&$.avgThroughput>0&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold",children:Re($.avgThroughput)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Avg Throughput"})]}),$.avgRfQuality!==null&&!isNaN($.avgRfQuality)&&$.avgRfQuality>0&&e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-xl font-semibold",children:[$.avgRfQuality.toFixed(0),"%"]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"RF Quality"})]}),$.topAppGroup&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold truncate",title:$.topAppGroup,children:$.topAppGroup}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Top App Group"})]})]}):e.jsx("div",{className:"text-center py-3",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to view detailed insights"})})})]})}function qs({macAddress:c,clientName:r,onClose:j}){const[l,v]=u.useState(null),[x,N]=u.useState(!0),[y,q]=u.useState("3H"),[ue,L]=u.useState(0);Ie.find(o=>o.value===y)||Ie[0];const $=()=>L(o=>o+1),t=Ms("client-insights"),E=(o,n)=>{const w=new Date(o);return n==="3H"||n==="24H"?w.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):w.toLocaleDateString("en-US",{month:"short",day:"numeric"})};u.useEffect(()=>{let o=!1;return(async()=>{try{N(!0);const w=Ie.find(Y=>Y.value===y)?.resolution||15,I=await Ce.getClientInsights(c,y,w,"all");o||v(I)}catch(w){console.error("Failed to load Client insights:",w)}finally{o||N(!1)}})(),()=>{o=!0}},[c,y,ue]),u.useEffect(()=>{t.softReset()},[y,t.softReset]);const F=u.useMemo(()=>{const o=l?.throughputReport?.[0];return be(o,y)},[l,y]),V=u.useMemo(()=>{const o=l?.rfQuality?.[0];return be(o,y)},[l,y]),B=u.useMemo(()=>(l?.topAppGroupsByThroughputReport?.[0]?.statistics||[]).map((n,w)=>({name:n.name,value:n.value,color:me[w%me.length]})),[l]),ee=u.useMemo(()=>{const o=l?.appGroupsThroughputDetails?.[0];return be(o,y)},[l,y]),_=u.useMemo(()=>{const o=l?.baseliningRFQI?.[0];return be(o,y)},[l,y]),Z=u.useMemo(()=>{const o=l?.baseliningWirelessRTT?.[0];return be(o,y)},[l,y]),H=u.useMemo(()=>{const o=l?.baseliningNetworkRTT?.[0];return be(o,y)},[l,y]),X=u.useMemo(()=>{const o=l?.baseliningRss?.[0];return be(o,y)},[l,y]),S=u.useMemo(()=>{const o=l?.baseliningRxRate?.[0];return be(o,y)},[l,y]),T=u.useMemo(()=>{const o=l?.baseliningTxRate?.[0];return be(o,y)},[l,y]),J=u.useMemo(()=>{const o=l?.muEvent?.[0];return be(o,y)},[l,y]),ne=u.useMemo(()=>{const o=l?.dlRetries?.[0];return be(o,y)},[l,y]),Le=u.useMemo(()=>{const o=["rfQuality","rfqi","wirelessRtt","networkRtt"];return[{id:"throughput",title:"Throughput (Band: All)",data:F,hasData:ke(F)},{id:"appGroups",title:"Top Categories by Throughput",data:B,hasData:B.length>0&&B.some(w=>w.value>0)},{id:"appGroupsDetail",title:"App Group Detail",data:ee,hasData:ke(ee)},{id:"rss",title:"RSS",data:X,hasData:ke(X)},{id:"rxRate",title:"RxRate",data:S,hasData:ke(S)},{id:"txRate",title:"TxRate",data:T,hasData:ke(T)},{id:"events",title:"Events",data:J,hasData:ke(J)},{id:"dlRetries",title:"DL Retries",data:ne,hasData:ke(ne)},{id:"rfQuality",title:"RF Quality (Band: All)",data:V,hasData:ke(V)},{id:"rfqi",title:"RFQI",data:_,hasData:ke(_)},{id:"wirelessRtt",title:"WirelessRTT (Requires Test)",data:Z,hasData:ke(Z)},{id:"networkRtt",title:"NetworkRTT (Requires Test)",data:H,hasData:ke(H)}].sort((w,I)=>{const Y=o.includes(w.id),se=o.includes(I.id);return Y&&!se?1:!Y&&se||w.hasData&&!I.hasData?-1:!w.hasData&&I.hasData?1:0})},[F,V,B,ee,_,Z,H,X,S,T,J,ne]),Ue=o=>{if(!o.hasData)return null;switch(o.id){case"throughput":const n=t.isLocked&&t.currentTime!==null?we(F,t.currentTime,["Total","Upload","Download"]):null;return e.jsxs(z,{className:"col-span-2",children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),n&&e.jsxs("div",{className:"flex gap-3 text-xs",children:[n.Total!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-blue-500 font-semibold mr-1",children:"Total:"})," ",Re(n.Total)]}),n.Upload!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-cyan-500 font-semibold mr-1",children:"Up:"})," ",Re(n.Upload)]}),n.Download!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-pink-500 font-semibold mr-1",children:"Down:"})," ",Re(n.Download)]})]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:F,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorTotalClient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.blue,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:k.blue,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>Re(s),width:70}),e.jsx(de,{formatter:s=>[Re(s),""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"Total",stroke:k.blue,fill:"url(#colorTotalClient)",name:"Total"}),e.jsx(A,{type:"monotone",dataKey:"Upload",stroke:k.cyan,fill:"transparent",name:"Upload"}),e.jsx(A,{type:"monotone",dataKey:"Download",stroke:k.pink,fill:"transparent",name:"Download"})]})})})})]},o.id);case"rfQuality":const w=t.isLocked&&t.currentTime!==null?we(V,t.currentTime,["rfQuality"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),w&&w.rfQuality!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-emerald-500 font-semibold mr-1",children:"Quality:"})," ",w.rfQuality.toFixed(0),"%"]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:V,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRfQuality",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.success,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:k.success,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s}%`,width:40,domain:[0,100]}),e.jsx(de,{formatter:s=>[`${s.toFixed(0)}%`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"rfQuality",stroke:k.success,fill:"url(#colorRfQuality)",name:"RF Quality"})]})})})})]},o.id);case"appGroups":return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsx(K,{className:"text-sm font-medium",children:o.title})}),e.jsx(G,{children:e.jsxs("div",{className:"h-64 flex items-center",children:[e.jsx(le,{width:"50%",height:"100%",children:e.jsxs(Ws,{children:[e.jsx(Es,{data:B,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:B.map((s,i)=>e.jsx(Bs,{fill:s.color},`cell-${i}`))}),e.jsx(de,{formatter:s=>[Re(s),""],labelFormatter:()=>"",contentStyle:ce})]})}),e.jsx("div",{className:"flex-1 space-y-1 max-h-56 overflow-auto",children:B.slice(0,8).map((s,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:s.color}}),e.jsx("span",{className:"truncate flex-1",children:s.name}),e.jsx("span",{className:"text-muted-foreground",children:Re(s.value)})]},i))})]})})]},o.id);case"appGroupsDetail":const I=ee.length>0?Object.keys(ee[0]).filter(s=>s!=="timestamp"&&s!=="time").slice(0,5):[],Y=t.isLocked&&t.currentTime!==null&&I.length>0?we(ee,t.currentTime,I):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),Y&&e.jsx("div",{className:"flex gap-2 text-xs flex-wrap",children:I.map((s,i)=>{const h=Y[s];return h!=null?e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsxs("span",{className:"font-semibold mr-1",style:{color:me[i%me.length]},children:[s,":"]}),Re(h)]},s):null})})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:ee,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>Re(s),width:70}),e.jsx(de,{formatter:s=>[Re(s),""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),Object.keys(ee[0]||{}).filter(s=>s!=="timestamp"&&s!=="time").slice(0,5).map((s,i)=>e.jsx(A,{type:"monotone",dataKey:s,stackId:"1",stroke:me[i%me.length],fill:me[i%me.length],fillOpacity:.6},s))]})})})})]},o.id);case"rfqi":const se=t.isLocked&&t.currentTime!==null?we(_,t.currentTime,["Rfqi"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),se&&se.Rfqi!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-purple-500 font-semibold mr-1",children:"RFQI:"})," ",se.Rfqi.toFixed(1)]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:_,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRfqi",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.purple,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.purple,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},domain:[0,100],width:40}),e.jsx(de,{labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"Rfqi Upper",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Upper"}),e.jsx(A,{type:"monotone",dataKey:"Rfqi",stroke:k.purple,fill:"url(#colorRfqi)",name:"RFQI"}),e.jsx(A,{type:"monotone",dataKey:"Rfqi Lower",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Lower"})]})})})})]},o.id);case"wirelessRtt":const Q=t.isLocked&&t.currentTime!==null?we(Z,t.currentTime,["WirelessRtt"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),Q&&Q.WirelessRtt!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-amber-500 font-semibold mr-1",children:"RTT:"})," ",Q.WirelessRtt.toFixed(1)," ms"]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:Z,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorWirelessRtt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.cyan,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.cyan,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s} ms`,width:50}),e.jsx(de,{formatter:s=>[`${s.toFixed(1)} ms`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"WirelessRtt Upper",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Upper"}),e.jsx(A,{type:"monotone",dataKey:"WirelessRtt",stroke:k.cyan,fill:"url(#colorWirelessRtt)",name:"Wireless RTT"}),e.jsx(A,{type:"monotone",dataKey:"WirelessRtt Lower",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Lower"})]})})})})]},o.id);case"networkRtt":const Ae=t.isLocked&&t.currentTime!==null?we(H,t.currentTime,["NetworkRtt"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),Ae&&Ae.NetworkRtt!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-orange-500 font-semibold mr-1",children:"RTT:"})," ",Ae.NetworkRtt.toFixed(1)," ms"]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:H,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorNetworkRtt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.orange,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.orange,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s} ms`,width:50}),e.jsx(de,{formatter:s=>[`${s.toFixed(1)} ms`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"NetworkRtt Upper",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Upper"}),e.jsx(A,{type:"monotone",dataKey:"NetworkRtt",stroke:k.orange,fill:"url(#colorNetworkRtt)",name:"Network RTT"}),e.jsx(A,{type:"monotone",dataKey:"NetworkRtt Lower",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Lower"})]})})})})]},o.id);case"rss":const re=t.isLocked&&t.currentTime!==null?we(X,t.currentTime,["Rss"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),re&&re.Rss!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-red-500 font-semibold mr-1",children:"RSS:"})," ",re.Rss.toFixed(0)," dBm"]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:X,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRssClient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.blue,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.blue,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s} dBm`,width:60,domain:["auto","auto"]}),e.jsx(de,{formatter:s=>[`${s.toFixed(0)} dBm`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"Rss Upper",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Upper"}),e.jsx(A,{type:"monotone",dataKey:"Rss",stroke:k.blue,fill:"url(#colorRssClient)",name:"RSS"}),e.jsx(A,{type:"monotone",dataKey:"Rss Lower",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Lower"})]})})})})]},o.id);case"rxRate":const te=t.isLocked&&t.currentTime!==null?we(S,t.currentTime,["RxRate"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),te&&te.RxRate!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-green-500 font-semibold mr-1",children:"RxRate:"})," ",te.RxRate.toFixed(1)," Mbps"]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:S,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRxRate",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.success,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.success,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s} Mbps`,width:60}),e.jsx(de,{formatter:s=>[`${s.toFixed(1)} Mbps`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"RxRate Upper",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Upper"}),e.jsx(A,{type:"monotone",dataKey:"RxRate",stroke:k.success,fill:"url(#colorRxRate)",name:"RX Rate"}),e.jsx(A,{type:"monotone",dataKey:"RxRate Lower",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Lower"})]})})})})]},o.id);case"txRate":const Me=t.isLocked&&t.currentTime!==null?we(T,t.currentTime,["TxRate"]):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),Me&&Me.TxRate!==null&&e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsx("span",{className:"text-blue-500 font-semibold mr-1",children:"TxRate:"})," ",Me.TxRate.toFixed(1)," Mbps"]})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:T,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorTxRate",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.pink,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.pink,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s} Mbps`,width:60}),e.jsx(de,{formatter:s=>[`${s.toFixed(1)} Mbps`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),e.jsx(A,{type:"monotone",dataKey:"TxRate Upper",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Upper"}),e.jsx(A,{type:"monotone",dataKey:"TxRate",stroke:k.pink,fill:"url(#colorTxRate)",name:"TX Rate"}),e.jsx(A,{type:"monotone",dataKey:"TxRate Lower",stroke:k.secondary,fill:"transparent",strokeDasharray:"3 3",name:"Lower"})]})})})})]},o.id);case"events":const Pe=J.length>0?Object.keys(J[0]).filter(s=>s!=="timestamp"&&s!=="time").slice(0,5):[],Be=t.isLocked&&t.currentTime!==null&&Pe.length>0?we(J,t.currentTime,Pe):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),Be&&e.jsx("div",{className:"flex gap-2 text-xs flex-wrap",children:Pe.map((s,i)=>{const h=Be[s];return h!=null?e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsxs("span",{className:"font-semibold mr-1",style:{color:me[i%me.length]},children:[s,":"]}),h.toFixed(0)]},s):null})})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs($s,{data:J,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},width:40}),e.jsx(de,{labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),Object.keys(J[0]||{}).filter(s=>s!=="timestamp"&&s!=="time").slice(0,5).map((s,i)=>e.jsx(Is,{dataKey:s,fill:me[i%me.length],stackId:"events"},s))]})})})})]},o.id);case"dlRetries":const Fe=ne.length>0?Object.keys(ne[0]).filter(s=>s!=="timestamp"&&s!=="time"):[],W=t.isLocked&&t.currentTime!==null&&Fe.length>0?we(ne,t.currentTime,Fe):null;return e.jsxs(z,{children:[e.jsx(U,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{className:"text-sm font-medium",children:o.title}),W&&e.jsx("div",{className:"flex gap-2 text-xs flex-wrap",children:Fe.slice(0,3).map((s,i)=>{const h=W[s];return h!=null?e.jsxs(M,{variant:"secondary",className:"font-mono",children:[e.jsxs("span",{className:"font-semibold mr-1",style:{color:i===0?k.warning:k.secondary},children:[s,":"]}),h.toFixed(1),"%"]},s):null})})]})}),e.jsx(G,{children:e.jsx("div",{className:"h-64",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Te,{data:ne,margin:{top:5,right:5,left:0,bottom:5},syncId:"client-insights-charts",onClick:s=>{if(s&&s.activePayload&&s.activePayload[0]){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.toggleLock()}},onMouseDown:s=>{s&&s.activePayload&&s.activePayload[0]&&s.shiftKey&&t.startTimeWindow(s.activePayload[0].payload.timestamp)},onMouseMove:s=>{if(s&&s.activePayload&&s.activePayload[0]&&!t.isLocked){const i=s.activePayload[0].payload.timestamp;t.setCurrentTime(i),t.updateTimeWindow(i)}},onMouseUp:()=>t.endTimeWindow(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorDlRetries",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:k.warning,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:k.warning,stopOpacity:0})]})}),e.jsx(fe,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ge,{dataKey:"timestamp",tick:{fontSize:11},tickFormatter:s=>E(s,y)}),e.jsx(je,{tick:{fontSize:11},tickFormatter:s=>`${s}%`,width:40}),e.jsx(de,{formatter:s=>[`${s.toFixed(1)}%`,""],labelFormatter:()=>"",contentStyle:ce}),e.jsx(Ne,{}),t.currentTime!==null&&e.jsx(ye,{x:t.currentTime,stroke:t.isLocked?"#8b5cf6":"#3b82f6",strokeWidth:t.isLocked?2:1.5,strokeDasharray:t.isLocked?void 0:"4 4"}),t.timeWindow.start!==null&&t.timeWindow.end!==null&&e.jsx(ve,{x1:Math.min(t.timeWindow.start,t.timeWindow.end),x2:Math.max(t.timeWindow.start,t.timeWindow.end),fill:"hsl(var(--primary))",fillOpacity:.15,stroke:"hsl(var(--primary))",strokeOpacity:.3}),Object.keys(ne[0]||{}).filter(s=>s!=="timestamp"&&s!=="time").map((s,i)=>e.jsx(A,{type:"monotone",dataKey:s,stroke:i===0?k.warning:k.secondary,fill:i===0?"url(#colorDlRetries)":"transparent",strokeDasharray:i===0?void 0:"3 3"},s))]})})})})]},o.id);default:return null}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-background",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"border-b bg-background px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ae,{variant:"ghost",size:"sm",onClick:j,children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Client Insights"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r||c})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ns,{value:y,onValueChange:q,children:[e.jsxs(rs,{className:"w-[150px] h-8 text-xs",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),e.jsx(os,{})]}),e.jsx(ls,{children:Ie.map(o=>e.jsx(ds,{value:o.value,children:o.label},o.value))})]}),e.jsxs(ae,{variant:"outline",size:"sm",onClick:$,disabled:x,children:[e.jsx(Se,{className:`h-4 w-4 mr-1 ${x?"animate-spin":""}`}),"Refresh"]})]})]}),e.jsx(Fs,{currentTime:t.currentTime,isLocked:t.isLocked,hasTimeWindow:t.timeWindow.start!==null&&t.timeWindow.end!==null,onToggleLock:t.toggleLock,onClearTimeWindow:t.clearTimeWindow,onCopyTimeline:()=>{t.syncFromScope("ap-insights")},sourceLabel:"AP Insights"}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6 pb-12",children:[x?e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(xe,{className:"h-64"}),e.jsx(xe,{className:"h-64"}),e.jsx(xe,{className:"h-64"}),e.jsx(xe,{className:"h-64"}),e.jsx(xe,{className:"h-64"}),e.jsx(xe,{className:"h-64"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-6",children:Le.map(o=>Ue(o))}),e.jsx("div",{className:"text-center pt-4 border-t mt-6",children:e.jsx("p",{className:"text-[10px] text-muted-foreground opacity-60",children:"UI Design by Karl Benedict, Mgr of Systems Engineering"})})]})})]})})}class _s{sitesCache=new Map;isLoading=!1;lastLoadTime=0;cacheTimeout=300*1e3;loadAttempts=0;maxLoadAttempts=3;async loadSites(){const r=Date.now();if(!(this.isLoading||r-this.lastLoadTime<this.cacheTimeout&&this.sitesCache.size>0)){if(this.loadAttempts>=this.maxLoadAttempts){console.warn(`Reached maximum load attempts (${this.maxLoadAttempts}) for sites - skipping`);return}this.isLoading=!0,this.loadAttempts++;try{console.log(`Loading sites from /v3/sites for mapping (attempt ${this.loadAttempts}/${this.maxLoadAttempts})...`);const j=await Ce.getSites();this.sitesCache.clear(),j&&j.length>0?(j.forEach(l=>{this.sitesCache.set(l.id,l),l.id==="c7395471-aa5c-46dc-9211-3ed24c5789bd"&&console.log("Found target site in mapping:",{id:l.id,name:l.name,siteName:l.siteName,allFields:l})}),this.lastLoadTime=r,this.loadAttempts=0,console.log(`Successfully loaded ${j.length} sites for mapping`)):console.warn("No sites returned from /v3/sites endpoint")}catch(j){console.warn(`Failed to load sites for mapping from /v3/sites (attempt ${this.loadAttempts}/${this.maxLoadAttempts}):`,j),j instanceof Error&&console.warn("Site mapping error details:",{message:j.message,stack:j.stack,endpoint:"/v3/sites",attempt:this.loadAttempts})}finally{this.isLoading=!1}}}async getSiteName(r){if(!r)return null;console.log(`Getting site name for ID: ${r}`);const j=this.sitesCache.get(r);if(j){const v=j.siteName||j.name||null;return console.log(`Found site in cache: ${r} -> ${v}`),v}console.log(`Site ${r} not in cache, loading sites...`),console.log("Current cache status:",{size:this.sitesCache.size,keys:Array.from(this.sitesCache.keys()).slice(0,5),isLoading:this.isLoading,lastLoadTime:this.lastLoadTime}),await this.loadSites();const l=this.sitesCache.get(r);if(l){const v=l.siteName||l.name||null;return console.log(`Site found after loading: ${r} -> ${v}`),v}else{console.warn(`Site ${r} not found even after loading ${this.sitesCache.size} sites from sites API`),console.warn("Available site IDs:",Array.from(this.sitesCache.keys()).slice(0,10)),console.log(`Attempting individual site lookup for ${r}...`);try{const x=await Ce.getSiteById(r);if(x){const N=x.siteName||x.name||null;return console.log(`Found site via individual lookup: ${r} -> ${N}`),this.sitesCache.set(r,x),N}}catch(x){console.warn(`Individual site lookup failed for ${r}:`,x)}console.log(`Attempting to extract site info from clients for ${r}...`);try{const x=await this.extractSiteNameFromClients(r);if(x)return console.log(`Extracted site name from clients: ${r} -> ${x}`),x}catch(x){console.warn(`Site name extraction from clients failed for ${r}:`,x)}return`Site ${r.split("-")[0].toUpperCase()}`}}async extractSiteNameFromClients(r){try{const l=(await Ce.getStations()).find(v=>v.siteId===r&&(v.siteName||v.site));if(l){const v=l.siteName||l.site;console.log(`Extracted site name from station data: ${v}`);const x={id:r,name:v||`Site ${r.split("-")[0].toUpperCase()}`,siteName:v};return this.sitesCache.set(r,x),v}return null}catch(j){return console.warn("Failed to extract site name from client data:",j),null}}async getSite(r){if(!r)return null;const j=this.sitesCache.get(r);return j||(await this.loadSites(),this.sitesCache.get(r)||null)}getAllSites(){return Array.from(this.sitesCache.values())}async refreshCache(){this.lastLoadTime=0,this.loadAttempts=0,await this.loadSites()}clearCache(){this.sitesCache.clear(),this.lastLoadTime=0,this.loadAttempts=0}getCacheStatus(){const j=Date.now()-this.lastLoadTime>this.cacheTimeout;return{isLoading:this.isLoading,size:this.sitesCache.size,lastLoadTime:this.lastLoadTime,isStale:j,loadAttempts:this.loadAttempts,maxAttempts:this.maxLoadAttempts}}async diagnoseSiteMapping(r){console.log("=== Site Mapping Diagnostic ==="),console.log(`Target Site ID: ${r}`);const j=this.getCacheStatus();console.log("Cache Status:",j),console.log("Cached Sites:"),Array.from(this.sitesCache.entries()).forEach(([v,x])=>{console.log(`  ${v}: ${x.name||x.siteName||"No Name"}`)}),console.log("Attempting to load sites..."),await this.loadSites();const l=this.sitesCache.get(r);if(l)console.log("Target site found:",l);else{console.log("Target site NOT found"),console.log("Attempting individual site lookup...");try{const v=await Ce.getSiteById(r);v?console.log("Individual lookup successful:",v):console.log("Individual lookup also failed")}catch(v){console.log("Individual lookup error:",v)}}console.log("=== End Diagnostic ===")}}const Je=new _s;class Vs{services=new Map;roles=new Map;loaded=!1;async getServiceDetails(r){if(!r)return{ssid:"N/A",networkName:"N/A",vlan:"N/A"};if(this.services.has(r))return this.services.get(r);if(!this.loaded&&(await this.loadData(),this.services.has(r)))return this.services.get(r);const j=r.substring(0,8);return{ssid:`Service ${j}`,networkName:`Service ${j}`,vlan:"N/A"}}async getRoleName(r){return r?this.roles.has(r)?this.roles.get(r):!this.loaded&&(await this.loadData(),this.roles.has(r))?this.roles.get(r):`Role ${r.substring(0,8)}`:"N/A"}async loadData(){if(this.loaded)return;const r=localStorage.getItem("access_token");if(!r){this.loaded=!0;return}const j={Authorization:`Bearer ${r}`,Accept:"application/json"};try{const l=await fetch("https://tsophiea.ddns.net:443/management/v1/services",{headers:j,signal:AbortSignal.timeout(5e3)});if(l.ok){const v=await l.json();Array.isArray(v)&&(v.forEach(x=>{x&&x.id&&this.services.set(x.id,{ssid:x.ssid||"N/A",networkName:x.name||"N/A",vlan:(x.vlan||x.dot1dPortNumber||"N/A").toString()})}),console.log(`Loaded ${v.length} services for mapping`))}}catch{console.log("Services not available for mapping")}try{const l=await fetch("https://tsophiea.ddns.net:443/management/roles",{headers:j,signal:AbortSignal.timeout(5e3)});if(l.ok){const v=await l.json();Array.isArray(v)&&(v.forEach(x=>{x&&x.id&&x.name&&this.roles.set(x.id,x.name)}),console.log(`Loaded ${v.length} roles for mapping`))}}catch{}this.loaded=!0}getStatus(){return{loaded:this.loaded,servicesCount:this.services.size,rolesCount:this.roles.size}}}const is=new Vs;function it({macAddress:c}){const[r,j]=u.useState(null),[l,v]=u.useState(null),[x,N]=u.useState(null),[y,q]=u.useState(null),[ue,L]=u.useState(null),[$,t]=u.useState(!0),[E,F]=u.useState(!1),[V,B]=u.useState(!1),[ee,_]=u.useState(!1),[Z,H]=u.useState(!1),[X,S]=u.useState(!1),[T,J]=u.useState([]),[ne,Le]=u.useState([]),[Ue,o]=u.useState([]),[n,w]=u.useState(!1),[I,Y]=u.useState("all"),[se,Q]=u.useState(!1),[Ae,re]=u.useState(!1),te=async()=>{try{t(!0);const a=await Ce.getStation(c);j(a),console.log("Station details for",c,":",{ssid:a.ssid,networkName:a.networkName,essid:a.essid,network:a.network,profileName:a.profileName,serviceName:a.serviceName,serviceId:a.serviceId,roleId:a.roleId,vlan:a.vlan,vlanId:a.vlanId,vlanTag:a.vlanTag,dot1dPortNumber:a.dot1dPortNumber,channel:a.channel,radioChannel:a.radioChannel,channelNumber:a.channelNumber,apName:a.apName,apDisplayName:a.apDisplayName,apHostname:a.apHostname,accessPointName:a.accessPointName,apSerial:a.apSerial,apSerialNumber:a.apSerialNumber,apSn:a.apSn,accessPointSerial:a.accessPointSerial,siteId:a.siteId,siteName:a.siteName,rxRate:a.rxRate,dataRate:a.dataRate,txRate:a.txRate}),console.log("All station fields:",a),a.siteId&&Me(a.siteId),a.serviceId&&Pe(a.serviceId),a.roleId&&Be(a.roleId)}catch(a){console.error("Failed to load client details:",a),a instanceof Error&&a.message.includes("not found")?Ee.error("Client not found",{description:`No client with MAC address ${c} was found in the system.`}):Ee.error("Failed to load client details",{description:a instanceof Error?a.message:"An unknown error occurred"})}finally{t(!1)}},Me=async a=>{try{_(!0),console.log(`ClientDetail: Loading site name for siteId: ${a}`),a==="c7395471-aa5c-46dc-9211-3ed24c5789bd"&&(console.log("Running diagnostic for problematic site ID..."),await Je.diagnoseSiteMapping(a));const g=await Je.getSiteName(a);console.log(`ClientDetail: Resolved site name: ${a} -> ${g}`),N(g)}catch(g){console.warn("Failed to resolve site name:",g)}finally{_(!1)}},Pe=async a=>{try{H(!0),console.log(`ClientDetail: Loading service details for serviceId: ${a}`);const g=await is.getServiceDetails(a);console.log(`ClientDetail: Resolved service details: ${a} ->`,g),q(g)}catch(g){console.warn("Failed to resolve service details:",g)}finally{H(!1)}},Be=async a=>{try{S(!0),console.log(`ClientDetail: Loading role name for roleId: ${a}`);const g=await is.getRoleName(a);console.log(`ClientDetail: Resolved role name: ${a} -> ${g}`),L(g)}catch(g){console.warn("Failed to resolve role name:",g)}finally{S(!1)}},Fe=async()=>{try{B(!0);const a=await Os.getStationTrafficStats(c);v(a)}catch(a){console.warn("Failed to load traffic statistics:",a)}finally{B(!1)}},W=async()=>{try{w(!0),console.log("[ClientDetail] Loading station events with correlation for:",c);const a=await Ce.fetchStationEventsWithCorrelation(c,"24H");console.log("[ClientDetail] Loaded correlated events:",{station:a.stationEvents.length,ap:a.apEvents.length,rrm:a.smartRfEvents.length}),J(a.stationEvents),Le(a.apEvents),o(a.smartRfEvents)}catch(a){console.warn("Failed to load station events:",a)}finally{w(!1)}},s=async()=>{F(!0),await Promise.all([te(),Fe(),W()]),F(!1),Ee.success("Client details refreshed")},i=async()=>{try{await Ce.disassociateStations([c]),Ee.success("Client disassociated successfully"),await te()}catch{Ee.error("Failed to disassociate client")}},h=async()=>{try{await Ce.reauthenticateStation(c),Ee.success("Client reauthentication initiated")}catch{Ee.error("Failed to reauthenticate client")}};if(u.useEffect(()=>{Je.loadSites().catch(a=>{console.warn("Failed to preload sites for mapping:",a)}),te(),Fe(),W()},[c]),$)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(xe,{className:"h-32 w-full"}),e.jsx(xe,{className:"h-48 w-full"}),e.jsx(xe,{className:"h-32 w-full"})]});if(!r)return e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"rounded-full bg-muted/20 p-4",children:e.jsx(Xe,{className:"h-8 w-8 text-muted-foreground"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Client not found"}),e.jsxs("p",{className:"text-muted-foreground text-sm max-w-md mx-auto",children:["The client with MAC address ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:c})," could not be found. It may have been disconnected or the MAC address may be incorrect."]})]}),e.jsxs(ae,{variant:"outline",size:"sm",onClick:te,disabled:$,className:"mt-4",children:[e.jsx(Se,{className:`h-4 w-4 mr-2 ${$?"animate-spin":""}`}),"Try Again"]})]});const d=a=>{if(!a)return"secondary";const g=a.toLowerCase();return g==="connected"||g==="associated"||g==="online"?"default":g==="disconnected"||g==="offline"?"destructive":"secondary"},m=a=>{if(a==null||a===0)return"0 B";if(a<0)return"N/A";const g=["B","KB","MB","GB","TB"];let D=a,p=0;for(;D>=1024&&p<g.length-1;)D/=1024,p++;return`${p===0?D.toString():D.toFixed(D<10?2:1)} ${g[p]}`},f=a=>{if(!a)return"N/A";try{let g;return typeof a=="string"?g=isNaN(Date.parse(a))?new Date(parseInt(a)*1e3):new Date(a):g=a>1e10?new Date(a):new Date(a*1e3),isNaN(g.getTime())?"N/A":g.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return"N/A"}},ie=a=>y?.ssid&&y.ssid!=="N/A"?y.ssid:a.ssid||a.networkName||a.essid||"N/A",C=a=>{if(y?.vlan&&y.vlan!=="N/A")return y.vlan;const g=a.vlan||a.vlanId||a.vlanTag||a.dot1dPortNumber;return g==null?"N/A":g.toString()},oe=a=>ue&&ue!=="N/A"?ue:a.role||"N/A",he=a=>{const g=a.channel||a.radioChannel||a.channelNumber;return g==null?"N/A":g.toString()},We=a=>a.apName||a.apDisplayName||a.apHostname||a.accessPointName||"N/A",De=({label:a,value:g,icon:D,isMono:p=!1})=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[D&&e.jsx(D,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:[a,":"]})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("span",{className:`font-medium ${p?"font-mono text-xs":""} ${g==="N/A"?"text-muted-foreground":""}`,children:g})})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Client Details"})]}),e.jsxs(ae,{variant:"outline",size:"sm",onClick:s,disabled:E,children:[e.jsx(Se,{className:`h-4 w-4 mr-2 ${E?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs(z,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.01] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-cyan-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-6 -top-6 w-20 h-20 bg-blue-500/10 rounded-full blur-2xl group-hover:bg-blue-500/20 transition-all"}),e.jsx(U,{className:"relative",children:e.jsxs(K,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Connection Status"}),e.jsx(M,{variant:d(r.status),children:r.status||"Unknown"})]})}),e.jsx(G,{className:"space-y-4 relative",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Qe,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Signal Strength"}),e.jsx("p",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:l?.rss||l?.signalStrength||r.signalStrength?`${l?.rss||l?.signalStrength||r.signalStrength} dBm`:"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-emerald-500 to-green-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Ss,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Protocol"}),e.jsx("p",{className:"text-lg font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:r.protocol||"N/A"})]})]})]})})]}),e.jsx(Qs,{macAddress:c,clientName:r.hostName||c,onOpenFullScreen:()=>re(!0)}),e.jsxs(z,{children:[e.jsx(U,{children:e.jsxs(K,{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Device Information"})]})}),e.jsx(G,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Hostname:"}),e.jsx("span",{className:"font-medium",children:r.hostName||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"MAC Address:"}),e.jsx("span",{className:"font-mono text-xs",children:r.macAddress})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"IP Address:"}),e.jsx("span",{className:"font-mono text-xs",children:r.ipAddress||"N/A"})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{className:"text-muted-foreground shrink-0",children:"IPv6 Address:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:r.ipv6Address||"N/A",children:r.ipv6Address||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Device Type:"}),e.jsx("span",{className:"font-medium",children:r.deviceType||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Manufacturer:"}),e.jsx("span",{className:"font-medium",children:r.manufacturer||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Username:"}),e.jsx("span",{className:"font-medium",children:r.username||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Role:"}),e.jsx("div",{className:"flex items-center space-x-2",children:X?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Se,{className:"h-3 w-3 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading..."})]}):e.jsx("span",{className:`font-medium ${oe(r)==="N/A"?"text-muted-foreground":""}`,children:oe(r)})})]}),e.jsx(De,{label:"Last Seen",value:f(r.lastSeen),icon:Ge})]})})]}),e.jsxs(z,{children:[e.jsx(U,{children:e.jsxs(K,{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Network Information"})]})}),e.jsx(G,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"SSID:"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:Z?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Se,{className:"h-3 w-3 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading..."})]}):e.jsx("span",{className:`font-medium ${ie(r)==="N/A"?"text-muted-foreground":""}`,children:ie(r)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rs,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"VLAN:"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:Z?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Se,{className:"h-3 w-3 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading..."})]}):e.jsx("span",{className:`font-medium ${C(r)==="N/A"?"text-muted-foreground":""}`,children:C(r)})})]}),e.jsx(De,{label:"Channel",value:he(r),icon:Qe}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(es,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Site:"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:ee?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Se,{className:"h-3 w-3 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading..."})]}):e.jsx("span",{className:"font-medium",children:x||r.siteName||"N/A"})})]}),e.jsx(De,{label:"Access Point",value:We(r),icon:Ke})]})})]}),e.jsxs(z,{children:[e.jsx(U,{children:e.jsxs(K,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Traffic Statistics"})]}),V&&e.jsx(Se,{className:"h-3 w-3 animate-spin text-muted-foreground"})]})}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-3 p-3 rounded-lg bg-muted/20 border",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ts,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Upload (TX)"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Bytes:"}),e.jsx("span",{className:"font-medium",children:m(l?.txBytes||l?.outBytes||r.txBytes)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Packets:"}),e.jsx("span",{className:"font-medium",children:Ze(l?.outPackets||r.outPackets)})]})]})]}),e.jsxs("div",{className:"space-y-3 p-3 rounded-lg bg-muted/20 border",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Download (RX)"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Bytes:"}),e.jsx("span",{className:"font-medium",children:m(l?.rxBytes||l?.inBytes||r.rxBytes)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Packets:"}),e.jsx("span",{className:"font-medium",children:Ze(l?.packets||r.packets)})]})]})]})]}),l&&e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Data:"}),e.jsx("span",{className:"font-medium",children:m((l.txBytes||l.outBytes||0)+(l.rxBytes||l.inBytes||0))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Packets:"}),e.jsx("span",{className:"font-medium",children:Ze((l.outPackets||0)+(l.packets||0))})]}),l.rss&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Signal (RSS):"}),e.jsxs("span",{className:"font-medium",children:[l.rss," dBm"]})]})]})})]})]}),e.jsxs(z,{children:[e.jsx(U,{children:e.jsxs(K,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{children:"Recent Events"}),T.length>0&&e.jsx(M,{variant:"secondary",className:"ml-2",children:T.length})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n&&e.jsx(Se,{className:"h-3 w-3 animate-spin text-muted-foreground"}),T.length>0&&e.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>Q(!0),className:"h-8 px-2 flex items-center gap-1.5 text-xs",title:"View Roaming Trail",children:[e.jsx(Ye,{className:"h-3.5 w-3.5"}),"Roaming Trail"]})]})]})}),e.jsx(G,{children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground font-medium mb-2",children:"No station events available"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Station ",c]}),e.jsxs("div",{className:"text-xs text-muted-foreground max-w-md mx-auto space-y-1 mt-4",children:[e.jsx("p",{children:"Station events may be unavailable if:"}),e.jsx("p",{children:"• Your Extreme Platform ONE doesn't support the station events API"}),e.jsx("p",{children:"• No events have been logged for this station in the last 30 days"}),e.jsx("p",{children:"• Audit logging is not enabled"})]}),e.jsxs(ae,{variant:"outline",size:"sm",className:"mt-4",onClick:W,children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(ae,{variant:I==="all"?"default":"outline",size:"sm",onClick:()=>Y("all"),children:["All (",T.length,")"]}),Array.from(new Set(T.map(g=>g.eventType).filter(Boolean))).map(g=>e.jsxs(ae,{variant:I===g?"default":"outline",size:"sm",onClick:()=>Y(g),children:[g," (",T.filter(D=>D.eventType===g).length,")"]},g))]}),e.jsxs(ae,{variant:"default",size:"sm",onClick:()=>Q(!0),className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"View Roaming Trail"]})]}),e.jsx(hs,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-2",children:T.filter(a=>I==="all"||a.eventType===I).map((a,g)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(M,{variant:a.eventType==="Associate"||a.eventType==="Authenticate"||a.eventType==="Registration"?"default":a.eventType==="Disassociate"||a.eventType==="De-registration"?"destructive":"secondary",className:"text-xs",children:a.eventType||"Event"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ge,{className:"h-3 w-3"}),(()=>{if(!a.timestamp)return"N/A";const D=parseInt(a.timestamp);return isNaN(D)?"N/A":new Date(D).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})()]})]}),a.details&&(()=>{const p=(O=>{const pe={},R=/(\w+)\[([^\]]+)\]/g;let Oe;for(;(Oe=R.exec(O))!==null;)pe[Oe[1]]=Oe[2];return pe})(a.details),b=Object.keys(p).length>0;return e.jsx("div",{className:"mb-2",children:b?e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs mb-2",children:[p.Cause&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cause: "}),e.jsx("span",{className:"font-medium",children:p.Cause})]}),p.Reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Reason: "}),e.jsx("span",{className:"font-medium",children:p.Reason})]}),p.Status&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status: "}),e.jsx("span",{className:"font-medium",children:p.Status})]}),p.Code&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Code: "}),e.jsx("span",{className:"font-mono font-medium",children:p.Code})]}),p.DevFamily&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Device: "}),e.jsx("span",{className:"font-medium",children:p.DevFamily})]}),p.Hostname&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hostname: "}),e.jsx("span",{className:"font-medium",children:p.Hostname})]}),p.Port&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Port: "}),e.jsx("span",{className:"font-medium",children:p.Port})]}),p.Network&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Network: "}),e.jsx("span",{className:"font-medium",children:p.Network})]}),p.FT&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Fast Transition: "}),e.jsx("span",{className:"font-medium",children:p.FT})]}),(p.Signal||p.RSS||p.RSSI)&&(()=>{const O=parseInt(p.Signal||p.RSS||p.RSSI);if(isNaN(O))return null;const pe=O>=-60?"text-green-600":O>=-70?"text-orange-500":"text-red-500";return e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Signal: "}),e.jsxs("span",{className:`font-medium ${pe}`,children:[O," dBm"]})]})})(),p.Channel&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Channel: "}),e.jsx("span",{className:"font-medium",children:p.Channel})]}),(p.Band||p.Radio)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Band: "}),e.jsx("span",{className:"font-medium",children:p.Band||p.Radio})]}),(p.Auth||p.AuthMethod)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auth: "}),e.jsx("span",{className:"font-medium",children:p.Auth||p.AuthMethod})]}),(p.From||p.FromAP||p.PrevAP)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"From AP: "}),e.jsx("span",{className:"font-medium",children:p.From||p.FromAP||p.PrevAP})]}),p.SNR&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SNR: "}),e.jsxs("span",{className:"font-medium",children:[p.SNR," dB"]})]}),(p.Rate||p.DataRate||p.PhyRate)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate: "}),e.jsxs("span",{className:"font-medium",children:[p.Rate||p.DataRate||p.PhyRate," Mbps"]})]})]}):e.jsx("p",{className:"text-sm text-foreground mb-2",children:a.details})})})(),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[a.apName&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"AP: "}),e.jsx("span",{className:"font-medium",children:a.apName})]}),a.apSerial&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"AP Serial: "}),e.jsx("span",{className:"font-mono text-xs font-medium",children:a.apSerial})]}),a.ssid&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SSID: "}),e.jsx("span",{className:"font-medium",children:a.ssid})]}),a.ipAddress&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"IP: "}),e.jsx("span",{className:"font-mono font-medium",children:a.ipAddress})]}),a.ipv6Address&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"IPv6: "}),e.jsx("span",{className:"font-mono text-xs font-medium",children:a.ipv6Address})]}),a.type&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type: "}),e.jsx("span",{className:"font-medium",children:a.type})]}),a.level&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Level: "}),e.jsx("span",{className:"font-medium",children:a.level})]}),a.category&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Category: "}),e.jsx("span",{className:"font-medium",children:a.category})]}),a.context&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Context: "}),e.jsx("span",{className:"font-medium",children:a.context})]}),a.rssi&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Signal: "}),e.jsxs("span",{className:`font-medium ${a.rssi>=-60?"text-green-600":a.rssi>=-70?"text-orange-500":"text-red-500"}`,children:[a.rssi," dBm"]})]}),a.channel&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Channel: "}),e.jsx("span",{className:"font-medium",children:a.channel})]}),a.band&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Band: "}),e.jsx("span",{className:"font-medium",children:a.band})]}),a.dataRate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate: "}),e.jsxs("span",{className:"font-medium",children:[a.dataRate," Mbps"]})]}),a.previousAp&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"From AP: "}),e.jsx("span",{className:"font-medium",children:a.previousAp})]}),a.authMethod&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auth: "}),e.jsx("span",{className:"font-medium",children:a.authMethod})]}),a.reasonCode&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Reason Code: "}),e.jsx("span",{className:"font-mono font-medium",children:a.reasonCode})]}),a.id&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Event ID: "}),e.jsx("span",{className:"font-mono text-xs",children:a.id})]})]})]},a.id||g))})})]})})]}),e.jsxs(z,{children:[e.jsx(U,{children:e.jsxs(K,{className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Client Actions"})]})}),e.jsx(G,{children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(ae,{variant:"outline",size:"sm",onClick:h,className:"flex items-center space-x-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Reauthenticate"})]}),e.jsxs(ae,{variant:"destructive",size:"sm",onClick:i,className:"flex items-center space-x-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{children:"Disassociate"})]})]})})]}),Ae&&e.jsx(qs,{macAddress:c,clientName:r?.hostName||c,onClose:()=>re(!1)}),se&&e.jsx("div",{className:"fixed inset-0 z-50 bg-background",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"border-b bg-background px-6 py-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>Q(!1),className:"mr-2",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(Ye,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Roaming Trail - ",r?.hostName||c]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Visual timeline showing how this client roamed between access points"})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx(Gs,{events:T,apEvents:ne,rrmEvents:Ue,macAddress:c,hostName:r?.hostName})})]})})]})}export{it as ClientDetail};
