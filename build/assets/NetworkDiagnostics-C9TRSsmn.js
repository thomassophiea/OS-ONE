import{j as e}from"./vendor-ui-CO0mBmim.js";import{a as r}from"./vendor-react-BQC692LR.js";import{T as V,i as Q,j as v,k as y,C as l,b as i,c,h as b,d,L as p,I as N,B as w,e as o,w as a,a as k}from"./index-CrdvL8SR.js";import{A as x,bf as U,a_ as B,bC as K,a3 as W,P as X,J as Y}from"./vendor-icons-DmoIqCnf.js";import"./vendor-charts-CCS-1Xlq.js";function ne(){const[_,$]=r.useState("ping"),[h,q]=r.useState(""),[P,M]=r.useState("4"),[R,T]=r.useState(!1),[n,S]=r.useState(null),[u,G]=r.useState(""),[C,D]=r.useState(!1),[j,I]=r.useState(null),[g,J]=r.useState(""),[F,L]=r.useState(!1),[m,A]=r.useState(null),H=s=>{const t=/^(\d{1,3}\.){3}\d{1,3}$/,f=/^[a-zA-Z0-9][a-zA-Z0-9-_.]*[a-zA-Z0-9]$/;return t.test(s)||f.test(s)},E=async()=>{if(!h.trim()){a.error("Please enter a hostname or IP address");return}if(!H(h)){a.error("Please enter a valid hostname or IP address");return}T(!0),S(null);try{const s=await k.networkPing(h,parseInt(P)||4);S({...s,timestamp:new Date().toLocaleString()}),a.success("Ping completed successfully")}catch(s){console.error("Ping failed:",s),a.error("Ping failed. Please check the hostname and try again.")}finally{T(!1)}},z=async()=>{if(!u.trim()){a.error("Please enter a hostname or IP address");return}if(!H(u)){a.error("Please enter a valid hostname or IP address");return}D(!0),I(null);try{const s=await k.networkTraceroute(u);I({...s,timestamp:new Date().toLocaleString()}),a.success("Traceroute completed successfully")}catch(s){console.error("Traceroute failed:",s),a.error("Traceroute failed. Please check the hostname and try again.")}finally{D(!1)}},Z=async()=>{if(!g.trim()){a.error("Please enter a hostname");return}if(!/^[a-zA-Z0-9][a-zA-Z0-9-_.]*[a-zA-Z0-9]$/.test(g)){a.error("Please enter a valid hostname");return}L(!0),A(null);try{const t=await k.networkDnsLookup(g);A({...t,timestamp:new Date().toLocaleString()}),a.success("DNS lookup completed successfully")}catch(t){console.error("DNS lookup failed:",t),a.error("DNS lookup failed. Please check the hostname and try again.")}finally{L(!1)}};return e.jsxs("div",{className:"space-y-6 p-4 md:p-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(x,{className:"h-6 w-6"}),"Network Diagnostics"]}),e.jsx("p",{className:"text-muted-foreground",children:"Test network connectivity with ping, traceroute, and DNS lookup"})]}),e.jsxs(V,{value:_,onValueChange:$,children:[e.jsxs(Q,{className:"grid w-full grid-cols-3",children:[e.jsxs(v,{value:"ping",children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Ping"]}),e.jsxs(v,{value:"traceroute",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Traceroute"]}),e.jsxs(v,{value:"dns",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"DNS Lookup"]})]}),e.jsxs(y,{value:"ping",className:"space-y-4",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Ping Test"}),e.jsx(b,{children:"Test network connectivity and measure round-trip time"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"ping-host",children:"Hostname or IP Address"}),e.jsx(N,{id:"ping-host",value:h,onChange:s=>q(s.target.value),placeholder:"8.8.8.8 or google.com",onKeyPress:s=>s.key==="Enter"&&E(),"aria-label":"Enter hostname or IP address for ping test"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"ping-count",children:"Packet Count"}),e.jsx(N,{id:"ping-count",type:"number",value:P,onChange:s=>M(s.target.value),min:"1",max:"100","aria-label":"Set number of ping packets"})]})]}),e.jsx(w,{onClick:E,disabled:R,"aria-label":"Run ping test",children:R?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"h-4 w-4 mr-2 animate-pulse"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Run Ping"]})})]})]}),n&&e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Results"}),e.jsx(o,{variant:"outline",children:n.timestamp})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:n.packets.transmitted}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transmitted"})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.packets.received}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Received"})]}),e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[n.packets.loss,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Packet Loss"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Round-Trip Time (RTT)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Min:"})," ",e.jsxs("span",{className:"font-medium",children:[n.rtt.min.toFixed(2)," ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg:"})," ",e.jsxs("span",{className:"font-medium",children:[n.rtt.avg.toFixed(2)," ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Max:"})," ",e.jsxs("span",{className:"font-medium",children:[n.rtt.max.toFixed(2)," ms"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Individual Pings"}),e.jsx("div",{className:"space-y-1",children:n.results.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/20 rounded",children:[e.jsxs("span",{className:"text-sm",children:["Sequence ",s.seq]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{children:["TTL: ",s.ttl]}),e.jsxs("span",{className:"font-medium",children:[s.time.toFixed(2)," ms"]}),e.jsx(W,{className:"h-4 w-4 text-green-500"})]})]},t))})]})]})]})]}),e.jsxs(y,{value:"traceroute",className:"space-y-4",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Traceroute"}),e.jsx(b,{children:"Trace the network path to a destination"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"trace-host",children:"Hostname or IP Address"}),e.jsx(N,{id:"trace-host",value:u,onChange:s=>G(s.target.value),placeholder:"8.8.8.8 or google.com",onKeyPress:s=>s.key==="Enter"&&z(),"aria-label":"Enter hostname or IP address for traceroute"})]}),e.jsx(w,{onClick:z,disabled:C,"aria-label":"Run traceroute",children:C?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"h-4 w-4 mr-2 animate-pulse"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Run Traceroute"]})})]})]}),j&&e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(c,{children:["Route to ",j.host]}),e.jsx(o,{variant:"outline",children:j.timestamp})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:j.hops.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg",children:[e.jsx(o,{variant:"outline",className:"w-12 justify-center",children:s.hop}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.hostname||s.ip}),s.hostname&&s.ip&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.ip})]}),e.jsx("div",{className:"text-right",children:s.rtt.map((f,O)=>e.jsxs(o,{variant:"secondary",className:"ml-1",children:[f.toFixed(2)," ms"]},O))})]},t))})})]})]}),e.jsxs(y,{value:"dns",className:"space-y-4",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"DNS Lookup"}),e.jsx(b,{children:"Resolve hostname to IP addresses"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"dns-hostname",children:"Hostname"}),e.jsx(N,{id:"dns-hostname",value:g,onChange:s=>J(s.target.value),placeholder:"example.com",onKeyPress:s=>s.key==="Enter"&&Z(),"aria-label":"Enter hostname for DNS lookup"})]}),e.jsx(w,{onClick:Z,disabled:F,"aria-label":"Perform DNS lookup",children:F?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"h-4 w-4 mr-2 animate-pulse"}),"Looking up..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Lookup DNS"]})})]})]}),m&&e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(c,{children:["DNS Records for ",m.hostname]}),e.jsx(o,{variant:"outline",children:m.timestamp})]})}),e.jsx(d,{children:m.addresses.length===0?e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:[e.jsx(Y,{className:"h-4 w-4 text-yellow-600"}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"No DNS records found for this hostname"})]}):e.jsx("div",{className:"space-y-2",children:m.addresses.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-mono",children:s})]}),e.jsx(o,{variant:"secondary",children:s.includes(":")?"IPv6":"IPv4"})]},t))})})]})]})]})]})}export{ne as NetworkDiagnostics};
