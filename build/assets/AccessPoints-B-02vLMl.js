import{j as e,a1 as Ls,a2 as Us,a3 as Es,a4 as Ts,a5 as Ds,a6 as Ms,a7 as Is,a8 as Vs,a9 as Fs,aa as Os}from"./vendor-ui-CO0mBmim.js";import{a as o}from"./vendor-react-BQC692LR.js";import{f as H,a as g,C as y,b as C,t as q,d as v,B as S,A as Rs,l as zs,D as je,c as I,h as Bs,I as G,m as W,n as Q,o as Z,p as X,q as f,w as u,T as $s,i as _s,j as be,k as Ne,e as $e,L as V}from"./index-CrdvL8SR.js";import{T as _e,a as He,b as le,c as O,d as Je,e as R}from"./table-BR47Ry2r.js";import{i as Hs,R as qe,f as Y,an as Ge,az as Js,J as qs,W as ye,A as K,w as We,aw as Gs,aA as Ws,k as Qe,aB as Qs,b as Ze,P as Zs,ah as Xs,_ as Ys,aC as Ks,aq as et,S as Xe,K as st,M as Ye,x as tt,ab as at,aD as rt,ap as nt,a0 as it,H as lt,aj as ot,V as Ke,y as ct}from"./vendor-icons-DmoIqCnf.js";import{S as es}from"./switch-iy-vimzq.js";import{T as L,a as U,b as E}from"./tooltip-8iq8-UkY.js";import{C as _}from"./checkbox-DKtTTixp.js";import"./vendor-charts-CCS-1Xlq.js";function dt({...x}){return e.jsx(Ls,{"data-slot":"dropdown-menu",...x})}function mt({...x}){return e.jsx(Us,{"data-slot":"dropdown-menu-trigger",...x})}function ut({className:x,sideOffset:c=4,...k}){return e.jsx(Es,{children:e.jsx(Ts,{"data-slot":"dropdown-menu-content",sideOffset:c,className:H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",x),...k})})}function w({className:x,inset:c,variant:k="default",...p}){return e.jsx(Is,{"data-slot":"dropdown-menu-item","data-inset":c,"data-variant":k,className:H("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",x),...p})}function ht({className:x,inset:c,...k}){return e.jsx(Ds,{"data-slot":"dropdown-menu-label","data-inset":c,className:H("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",x),...k})}function oe({className:x,...c}){return e.jsx(Ms,{"data-slot":"dropdown-menu-separator",className:H("bg-border -mx-1 my-1 h-px",x),...c})}function xt({...x}){return e.jsx(Vs,{"data-slot":"dropdown-menu-sub",...x})}function ft({className:x,inset:c,children:k,...p}){return e.jsxs(Fs,{"data-slot":"dropdown-menu-sub-trigger","data-inset":c,className:H("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",x),...p,children:[k,e.jsx(Hs,{className:"ml-auto size-4"})]})}function gt({className:x,...c}){return e.jsx(Os,{"data-slot":"dropdown-menu-sub-content",className:H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",x),...c})}const A=[{key:"connection",label:"Connection Status",defaultVisible:!0,category:"basic"},{key:"apName",label:"AP Name",defaultVisible:!0,category:"basic"},{key:"serialNumber",label:"Serial Number",defaultVisible:!0,category:"basic"},{key:"hostSite",label:"Site/Location",defaultVisible:!0,category:"basic"},{key:"model",label:"Model",defaultVisible:!0,category:"basic"},{key:"ipAddress",label:"IP Address",defaultVisible:!0,category:"basic"},{key:"clients",label:"Connected Clients",defaultVisible:!0,category:"basic"},{key:"macAddress",label:"MAC Address",defaultVisible:!1,category:"network"},{key:"ethMode",label:"Ethernet Mode",defaultVisible:!1,category:"network"},{key:"ethSpeed",label:"Ethernet Speed",defaultVisible:!1,category:"network"},{key:"tunnel",label:"Tunnel",defaultVisible:!1,category:"network"},{key:"wiredClients",label:"Wired Clients",defaultVisible:!1,category:"network"},{key:"status",label:"Status",defaultVisible:!1,category:"status"},{key:"uptime",label:"Uptime",defaultVisible:!1,category:"status"},{key:"adoptedBy",label:"Adopted By",defaultVisible:!1,category:"status"},{key:"home",label:"Home Platform",defaultVisible:!1,category:"status"},{key:"cpuUsage",label:"CPU %",defaultVisible:!1,category:"performance"},{key:"memoryUsage",label:"Memory %",defaultVisible:!1,category:"performance"},{key:"pwrUsage",label:"Power Usage (W)",defaultVisible:!1,category:"performance"},{key:"pwrSource",label:"Power Source",defaultVisible:!1,category:"performance"},{key:"channelUtilization",label:"Avg Channel Util %",defaultVisible:!1,category:"performance"},{key:"softwareVersion",label:"Firmware Version",defaultVisible:!1,category:"hardware"},{key:"platformName",label:"Platform",defaultVisible:!1,category:"hardware"},{key:"environment",label:"Environment",defaultVisible:!1,category:"hardware"},{key:"ethPowerStatus",label:"Ethernet Power Status",defaultVisible:!1,category:"hardware"},{key:"profileName",label:"Profile Name",defaultVisible:!1,category:"advanced"},{key:"rfMgmtPolicyName",label:"RF Management Policy",defaultVisible:!1,category:"advanced"},{key:"switchPorts",label:"Switch Ports",defaultVisible:!1,category:"advanced"},{key:"source",label:"Location Source",defaultVisible:!1,category:"advanced"},{key:"floorName",label:"Floor Name",defaultVisible:!1,category:"advanced"},{key:"description",label:"Description",defaultVisible:!1,category:"advanced"},{key:"afcAnchor",label:"AFC Anchor",defaultVisible:!1,category:"advanced"}];function Pt({onShowDetail:x}){const[c,k]=o.useState([]),[p,ce]=o.useState([]),[h,ss]=o.useState("all"),[de,ve]=o.useState({}),[ee,me]=o.useState({}),[ts,we]=o.useState(!0),[Ce,Se]=o.useState(!1),[J,Ae]=o.useState(!1),[T,ue]=o.useState(!1),[ke,z]=o.useState(""),[D,as]=o.useState(""),[se,rs]=o.useState("all"),[te,ns]=o.useState("all"),[m,is]=o.useState(null),[ae,ls]=o.useState([]),[os,Pe]=o.useState(!1),[cs,Le]=o.useState(!1),[pt,Ue]=o.useState([]),[he,ds]=o.useState(null),[xe,Ee]=o.useState(!1),[ms,re]=o.useState(!1),[j,P]=o.useState({provider:"redsky",username:"",password:"",location:"",description:"",masking:!0,autoSync:!0,syncInterval:60,lastSync:null}),[,us]=o.useState(0),[b,Te]=o.useState(()=>{const s=localStorage.getItem("apVisibleColumns");if(s)try{return JSON.parse(s)}catch(t){console.error("Failed to parse saved columns:",t)}return A.filter(t=>t.defaultVisible).map(t=>t.key)}),[hs,fe]=o.useState(!1),[ne,xs]=o.useState(null),[fs,De]=o.useState("asc");o.useEffect(()=>{Me()},[]),o.useEffect(()=>{ie()},[h]),o.useEffect(()=>{const t=setInterval(()=>{document.visibilityState==="visible"&&(console.log("Auto-refreshing AP data..."),Ee(!0),ie().finally(()=>{Ee(!1)}))},6e4);return()=>clearInterval(t)},[h]),o.useEffect(()=>{const s=()=>{document.visibilityState==="visible"&&(console.log("Tab became active, refreshing AP data..."),ie())};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[h]),o.useEffect(()=>{const s=setInterval(()=>{us(t=>t+1)},1e4);return()=>clearInterval(s)},[]),o.useEffect(()=>{localStorage.setItem("apVisibleColumns",JSON.stringify(b))},[b]);const B=s=>{Te(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},gs=()=>{const s=A.filter(t=>t.defaultVisible).map(t=>t.key);Te(s)},Me=async()=>{z("");try{await ps();try{const s=await g.getAPQueryColumns();Ue(Array.isArray(s)?s:[])}catch(s){console.log("Query columns not available:",s),Ue([])}}catch(s){z(s instanceof Error?s.message:"Failed to load access points data"),console.error("Error loading access points:",s)}},ps=async()=>{Se(!0);try{if(!g.isAuthenticated()){ce([]);return}const s=await g.getSites(),t=Array.isArray(s)?s:[];ce(t)}catch{ce([])}finally{Se(!1)}},ie=async()=>{we(!0),z("");try{let s;!h||h==="all"?s=await g.getAccessPoints():s=await g.getAccessPointsBySite(h);const t=Array.isArray(s)?s:[],a=t.map(r=>({...r,uptime:r.sysUptime?As(r.sysUptime):r.uptime,channelUtilization:r.radios&&r.radios.length>0?Math.round(r.radios.reduce((l,n)=>l+(n.channelUtilization||0),0)/r.radios.length):void 0}));k(a),ds(new Date),Ie(t),Ve(t)}catch(s){const t=s instanceof Error?s.message:"Failed to load access points for selected site";!t.includes("timeout")&&!t.includes("timed out")?z(t):z("Loading access points is taking longer than expected. Extreme Platform ONE may be slow to respond.")}finally{we(!1)}},Ie=async s=>{if(s.length===0)return;Ae(!0);const t={};s.forEach(a=>{t[a.serialNumber]=0});try{const a=s.map(async l=>{try{const n=await g.getAccessPointStations(l.serialNumber),i=Array.isArray(n)?n.length:0;return{serialNumber:l.serialNumber,count:i}}catch{return{serialNumber:l.serialNumber,count:0}}});(await Promise.all(a)).forEach(({serialNumber:l,count:n})=>{t[l]=n}),ve(t)}catch(a){console.error("Error loading client counts:",a),ve(t)}finally{Ae(!1)}},Ve=async s=>{if(s.length===0)return;ue(!0);const t={};try{const a=await g.getAllAPInterfaceStats();if(a&&a.length>0&&(console.log("[AP Metrics] Using bulk ifstats endpoint, received",a.length,"entries"),a[0]&&console.log("[AP Metrics] Sample ifstats entry fields:",Object.keys(a[0])),a.forEach(n=>{const i=n.serialNumber||n.serial||n.apSerial||n.apSerialNumber;if(i){const F=n.cpuUsage??n.cpuUtilization??n.cpu??n.cpuPercent??n.cpuLoad,d=n.memoryUsage??n.memUtilization??n.memory??n.memPercent??n.memUsed??n.memoryPercent;(F!==void 0||d!==void 0)&&(t[i]={cpuUsage:F,memoryUsage:d})}}),Object.keys(t).length>0)){console.log("[AP Metrics] Found metrics for",Object.keys(t).length,"APs from ifstats"),me(t),ue(!1);return}console.log("[AP Metrics] Bulk ifstats did not return CPU/Memory, trying individual AP details...");const r=s.map(async n=>{try{const i=await g.getAccessPointDetails(n.serialNumber);return s.indexOf(n)===0&&console.log("[AP Metrics] Sample AP details fields:",Object.keys(i)),{serialNumber:n.serialNumber,cpuUsage:i.cpuUsage??i.cpuUtilization??i.cpu??i.cpuPercent,memoryUsage:i.memoryUsage??i.memUtilization??i.memory??i.memPercent}}catch{return{serialNumber:n.serialNumber,cpuUsage:void 0,memoryUsage:void 0}}});(await Promise.all(r)).forEach(({serialNumber:n,cpuUsage:i,memoryUsage:F})=>{(i!==void 0||F!==void 0)&&(t[n]={cpuUsage:i,memoryUsage:F})}),console.log("[AP Metrics] Found metrics for",Object.keys(t).length,"APs from individual details"),me(t)}catch(a){console.error("[AP Metrics] Error loading metrics:",a),me(t)}finally{ue(!1)}},Fe=async s=>{Pe(!0);try{let t;try{t=await g.getAccessPointDetails(s)}catch(r){console.warn("Detailed AP info not available, using basic info:",r);const l=c.find(n=>n.serialNumber===s);if(!l)throw new Error("Access point not found");t=l}let a=[];try{const r=await g.getAccessPointStations(s);a=Array.isArray(r)?r:[]}catch(r){console.warn("Station data not available for AP:",s,r),a=[]}is(t),ls(a),Le(!0)}catch(t){console.error("Error loading AP details:",t),z(t instanceof Error?t.message:"Failed to load AP details")}finally{Pe(!1)}},js=s=>{switch(s?.toLowerCase()){case"online":case"connected":case"up":case"in-service":case"inservice":return"default";case"offline":case"disconnected":case"down":return"destructive";case"warning":case"limited":return"secondary";default:return"outline"}},$=c.filter(s=>{const t=!D||s.serialNumber?.toLowerCase().includes(D.toLowerCase())||N(s)?.toLowerCase().includes(D.toLowerCase())||s.model?.toLowerCase().includes(D.toLowerCase())||s.ipAddress?.toLowerCase().includes(D.toLowerCase())||Be(s)?.toLowerCase().includes(D.toLowerCase()),a=se==="all"||s.status?.toLowerCase()===se.toLowerCase(),r=te==="all"||s.hardwareType===te;return t&&a&&r}),ge=s=>{const t=s;return!!(t.gpsAnchor===!0||t.anchorLocSrc==="GPS"||t.radios&&Array.isArray(t.radios)&&t.radios.some(r=>r.afc===!0)||t.pwrMode==="SP"||t.afcAnchor===!0||t.isAfcAnchor===!0)},Oe=(s,t)=>{const a=s;switch(t){case"connection":return M(s)?1:0;case"apName":return(N(s)||"").toLowerCase();case"serialNumber":return(s.serialNumber||"").toLowerCase();case"hostSite":return(Be(s)||"").toLowerCase();case"model":return(s.model||s.hardwareType||"").toLowerCase();case"ipAddress":return s.ipAddress||"";case"clients":return de[s.serialNumber]??a.stationCount??a.clientCount??0;case"status":return(s.status||"").toLowerCase();case"hardwareType":return(s.hardwareType||"").toLowerCase();case"firmwareVersion":return(a.firmwareVersion||a.fwVersion||"").toLowerCase();case"macAddress":return(a.macAddress||a.mac||"").toLowerCase();case"lastSeen":return a.lastSeen||a.lastSeenTime||"";case"uptime":return a.uptime||a.uptimeSeconds||0;case"channel24":return a.channel24||a.radio24Channel||0;case"channel5":return a.channel5||a.radio5Channel||0;case"txPower24":return a.txPower24||0;case"txPower5":return a.txPower5||0;case"noiseFloor":return a.noiseFloor||0;case"cpuUsage":return ee[s.serialNumber]?.cpuUsage??a.cpuUsage??a.cpuUtilization??0;case"memoryUsage":return ee[s.serialNumber]?.memoryUsage??a.memoryUsage??a.memUtilization??0;case"switchPorts":return(a.switchPorts||"").toLowerCase();case"source":return(a.source||"").toLowerCase();case"floorName":return(a.floorName||"").toLowerCase();case"description":return(a.description||"").toLowerCase();case"afcAnchor":return ge(s)?1:0;default:return""}},bs=s=>{ne===s?De(t=>t==="asc"?"desc":"asc"):(xs(s),De("asc"))},Re=[...$].sort((s,t)=>{if(!ne)return 0;const a=Oe(s,ne),r=Oe(t,ne);let l=0;return typeof a=="number"&&typeof r=="number"?l=a-r:l=String(a).localeCompare(String(r)),fs==="asc"?l:-l}),Ns=()=>{const s=new Set(c.map(t=>t.status).filter(Boolean));return Array.from(s)},ze=()=>{const s=new Set(c.map(t=>t.hardwareType).filter(Boolean));return Array.from(s)},N=s=>{if(!s)return"Unknown AP";const t=["displayName","name","apName","ap_name","hostname","deviceName","device_name","friendlyName","friendly_name","label","identifier","title"];for(const a of t){const r=s[a];if(typeof r=="string"&&r.trim().length>0)return r.trim()}return s.serialNumber||""},Be=s=>{const t=["hostSite","location","locationName","apLocation","ap_location","site","siteName","site_name","campus","building","siteId","site_id","place","area","zone"];for(const a of t){const r=s[a];if(typeof r=="string"&&r.trim().length>0)return r.trim()}if(h!=="all"&&p.length>0){const a=p.find(r=>r.id===h);if(a)return a.name||a.siteName||"Selected Site"}return c.indexOf(s)<3&&console.log(`AP ${s.serialNumber} COMPLETE FIELD ANALYSIS:`,{allAPFields:Object.keys(s).sort().map(a=>`${a}: ${s[a]}`),locationRelatedFields:Object.keys(s).filter(a=>a.toLowerCase().includes("site")||a.toLowerCase().includes("location")||a.toLowerCase().includes("campus")||a.toLowerCase().includes("building")||a.toLowerCase().includes("place")||a.toLowerCase().includes("area")||a.toLowerCase().includes("zone")||a.toLowerCase().includes("address")||a.toLowerCase().includes("room")||a.toLowerCase().includes("floor")).map(a=>`${a}: ${s[a]}`),locationFieldsChecked:t.map(a=>`${a}: ${s[a]}`),selectedSite:h,sitesAvailable:p.length,rawAPObject:s}),""},M=s=>{const t=pe(s);if(typeof t=="number"&&t>0)return!0;const a=(s.status||s.connectionState||s.operationalState||s.state||"").toLowerCase(),r=s.isUp,l=s.online;return a==="inservice"||a.includes("up")||a.includes("online")||a.includes("connected")||r===!0||l===!0||!a&&r!==!1&&l!==!1},ys=()=>{try{const s=$;if(s.length===0){u.error("No access points to export");return}const t=["BSSID","AP Name","Serial Number","MAC Address","Site Name","Building","Floor","IP Address","Model","Status","Latitude","Longitude"],a=s.map(d=>[d.macAddress||d.bssid||d.serialNumber||"",N(d),d.serialNumber||"",d.macAddress||"",d.hostSite||d.siteName||"",d.buildingName||d.building||"",d.floorName||d.floor||"",d.ipAddress||"",d.model||d.hardwareType||"",d.status||(M(d)?"Online":"Offline"),d.latitude||d.lat||"",d.longitude||d.lng||d.lon||""].map(Ps=>`"${String(Ps).replace(/"/g,'""')}"`).join(",")),r=[t.join(","),...a].join(`
`),l=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(l),i=document.createElement("a");i.href=n;const F=h!=="all"?p.find(d=>d.id===h||d.name===h)?.name?.replace(/[^a-zA-Z0-9]/g,"-")||"selected-site":"all-sites";i.download=`e911-bssids-${F}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),u.success(`Exported ${s.length} BSSID${s.length>1?"s":""} for E911`)}catch(s){console.error("[AccessPoints] Error exporting BSSIDs:",s),u.error("Failed to export BSSIDs")}},vs=()=>{try{const s=$;if(s.length===0){u.error("No access points to export");return}const t={exportDate:new Date().toISOString(),exportType:"E911_BSSID_LOCATION_DATA",totalAccessPoints:s.length,siteName:h!=="all"&&p.find(i=>i.id===h||i.name===h)?.name||"All Sites",accessPoints:s.map(i=>({bssid:i.macAddress||i.bssid||"",apName:N(i),serialNumber:i.serialNumber,macAddress:i.macAddress,location:{siteName:i.hostSite||i.siteName||"",buildingName:i.buildingName||i.building||"",floorName:i.floorName||i.floor||"",coordinates:{latitude:i.latitude||i.lat||null,longitude:i.longitude||i.lng||i.lon||null}},networkInfo:{ipAddress:i.ipAddress,model:i.model||i.hardwareType,status:i.status||(M(i)?"Online":"Offline")}}))},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r;const n=h!=="all"?p.find(i=>i.id===h||i.name===h)?.name?.replace(/[^a-zA-Z0-9]/g,"-")||"selected-site":"all-sites";l.download=`e911-bssids-${n}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r),u.success(`Exported ${s.length} BSSID${s.length>1?"s":""} for E911 (JSON)`)}catch(s){console.error("[AccessPoints] Error exporting BSSIDs JSON:",s),u.error("Failed to export BSSIDs")}},ws=s=>M(s)?e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsx(We,{className:"h-4 w-4 text-green-500 cursor-help"})}),e.jsxs(E,{children:[e.jsx("p",{className:"font-medium",children:"Online"}),e.jsx("p",{className:"text-xs opacity-80",children:"Access Point is connected and operational"})]})]}):e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsx(ct,{className:"h-4 w-4 text-red-500 cursor-help"})}),e.jsxs(E,{children:[e.jsx("p",{className:"font-medium",children:"Offline"}),e.jsx("p",{className:"text-xs opacity-80",children:"Access Point is not responding or disconnected"})]})]}),pe=s=>{const t=de[s.serialNumber];if(t!==void 0)return t;const a=["clientCount","associatedClients","clients","connectedClients","numClients","client_count","associated_clients","stations","numStations","stationCount","totalClients","numberOfClients","activeClients","clientsConnected"];for(const r of a){const l=s[r];if(typeof l=="number"&&l>=0)return l}return Array.isArray(s.stations)?s.stations.length:Array.isArray(s.clients)?s.clients.length:J?"...":0},Cs=()=>Object.values(de).reduce((s,t)=>s+t,0),Ss=()=>{if(!he)return"Never";const s=Math.floor((new Date().getTime()-he.getTime())/1e3);if(s<10)return"Just now";if(s<60)return`${s}s ago`;const t=Math.floor(s/60);if(t<60)return`${t}m ago`;const a=Math.floor(t/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`},As=s=>{if(s===0||!s)return"N/A";const t=Math.floor(s/86400),a=Math.floor(s%86400/3600),r=Math.floor(s%3600/60),l=s%60,n=[];return t>0&&n.push(`${t}d`),a>0&&n.push(`${a}h`),r>0&&n.push(`${r}m`),l>0&&t===0&&a===0&&n.push(`${l}s`),n.length>0?n.join(" "):"N/A"},ks=(s,t)=>{switch(s){case"connection":return e.jsx("div",{className:"flex items-center justify-center",children:ws(t)});case"apName":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:N(t)}),ge(t)&&e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsx(Ke,{className:"h-4 w-4 text-blue-500 cursor-help"})}),e.jsxs(E,{children:[e.jsx("p",{className:"font-medium",children:"AFC Anchor"}),e.jsx("p",{className:"text-xs opacity-80",children:"6 GHz Standard Power - This AP provides GPS location for AFC (Automated Frequency Coordination)"})]})]})]});case"serialNumber":return e.jsx("span",{className:"font-mono text-sm",children:t.serialNumber});case"hostSite":return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ye,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.hostSite||"Unknown Location"})]});case"model":return e.jsx("span",{children:t.model||t.hardwareType||"-"});case"ipAddress":return e.jsx("span",{className:"font-mono text-sm",children:t.ipAddress||"-"});case"clients":return e.jsxs("div",{className:"flex items-center space-x-1 bg-secondary/10 border border-secondary/20 rounded-full px-3 py-1.5 min-w-[60px] justify-center",children:[e.jsx(Y,{className:"h-4 w-4 text-secondary"}),e.jsx("span",{className:"text-sm font-semibold text-secondary",children:pe(t)}),J&&e.jsx(K,{className:"h-3 w-3 text-secondary/60 animate-pulse ml-1"})]});case"macAddress":return e.jsx("span",{className:"font-mono text-sm",children:t.macAddress||"-"});case"ethMode":return e.jsx("span",{className:"text-sm",children:t.ethMode||"-"});case"ethSpeed":return e.jsx("span",{className:"text-sm",children:t.ethSpeed||"-"});case"tunnel":return e.jsx("span",{className:"text-sm",children:t.tunnel||"-"});case"wiredClients":return e.jsx("span",{className:"text-sm",children:t.wiredClients||"0"});case"status":return e.jsx($e,{variant:js(t.status||""),children:t.status||"-"});case"uptime":return e.jsx("span",{className:"text-sm",children:t.uptime||"-"});case"adoptedBy":return e.jsx("span",{className:"text-sm",children:t.adoptedBy||"-"});case"home":return e.jsx("span",{className:"text-sm",children:t.home||"-"});case"pwrUsage":return e.jsx("span",{className:"text-sm",children:t.pwrUsage?`${t.pwrUsage}W`:"-"});case"pwrSource":return e.jsx("span",{className:"text-sm",children:t.pwrSource||"-"});case"channelUtilization":return e.jsx("span",{className:"text-sm",children:t.channelUtilization!==void 0?`${t.channelUtilization}%`:"-"});case"softwareVersion":return e.jsx("span",{className:"font-mono text-xs",children:t.softwareVersion||"-"});case"platformName":return e.jsx("span",{className:"text-sm",children:t.platformName||"-"});case"environment":return e.jsx("span",{className:"text-sm",children:t.environment||"-"});case"ethPowerStatus":return e.jsx("span",{className:"text-sm",children:t.ethPowerStatus||"-"});case"profileName":return e.jsx("span",{className:"text-sm",children:t.profileName||"-"});case"rfMgmtPolicyName":return e.jsx("span",{className:"text-sm",children:t.rfMgmtPolicyName||"-"});case"switchPorts":return e.jsx("span",{className:"text-sm",children:t.switchPorts||"-"});case"source":return e.jsx("span",{className:"text-sm",children:t.source||"-"});case"floorName":return e.jsx("span",{className:"text-sm",children:t.floorName||"-"});case"description":return e.jsx("span",{className:"text-sm",children:t.description||"-"});case"cpuUsage":const r=ee[t.serialNumber]?.cpuUsage??t.cpuUsage??t.cpuUtilization??t.cpu??null;return r===null?e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1",children:[T&&e.jsx(K,{className:"h-3 w-3 text-muted-foreground animate-pulse"}),e.jsx("span",{className:"text-sm text-muted-foreground cursor-help",children:T?"...":"-"})]})}),e.jsx(E,{children:e.jsx("p",{className:"text-xs",children:T?"Loading CPU data...":"CPU data not available. Click AP for details."})})]}):e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx("div",{className:"w-16 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${r>80?"bg-red-500":r>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(r,100)}%`}})}),e.jsxs("span",{className:`text-sm font-medium ${r>80?"text-red-600":r>60?"text-yellow-600":""}`,children:[r,"%"]})]})}),e.jsxs(E,{children:[e.jsx("p",{className:"font-medium",children:"CPU Utilization"}),e.jsx("p",{className:"text-xs opacity-80",children:r>80?"High load - may impact performance":r>60?"Moderate load":"Normal operation"})]})]});case"memoryUsage":const n=ee[t.serialNumber]?.memoryUsage??t.memoryUsage??t.memUtilization??t.memory??null;return n===null?e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1",children:[T&&e.jsx(K,{className:"h-3 w-3 text-muted-foreground animate-pulse"}),e.jsx("span",{className:"text-sm text-muted-foreground cursor-help",children:T?"...":"-"})]})}),e.jsx(E,{children:e.jsx("p",{className:"text-xs",children:T?"Loading memory data...":"Memory data not available. Click AP for details."})})]}):e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-2 cursor-help",children:[e.jsx("div",{className:"w-16 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${n>85?"bg-red-500":n>70?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(n,100)}%`}})}),e.jsxs("span",{className:`text-sm font-medium ${n>85?"text-red-600":n>70?"text-yellow-600":""}`,children:[n,"%"]})]})}),e.jsxs(E,{children:[e.jsx("p",{className:"font-medium",children:"Memory Utilization"}),e.jsx("p",{className:"text-xs opacity-80",children:n>85?"High memory usage - may cause issues":n>70?"Elevated memory usage":"Normal memory usage"})]})]});case"afcAnchor":return ge(t)?e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1 cursor-help",children:[e.jsx(Ke,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-500 font-medium",children:"Yes"})]})}),e.jsxs(E,{children:[e.jsx("p",{className:"font-medium",children:"AFC Anchor"}),e.jsx("p",{className:"text-xs opacity-80",children:"This AP has GPS and provides location data for AFC (Automated Frequency Coordination) to enable 6 GHz Standard Power operation"})]})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"No"});default:return e.jsx("span",{className:"text-sm",children:"-"})}};return ts?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(q,{className:"h-4 w-20"})}),e.jsx(v,{children:e.jsx(q,{className:"h-8 w-16"})})]},s))}),e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(q,{className:"h-6 w-32"})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(s=>e.jsx(q,{className:"h-12 w-full"},s))})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Configure and monitor access points across your network infrastructure"}),he&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Last updated: ",Ss(),xe&&e.jsxs("span",{className:"ml-2 inline-flex items-center",children:[e.jsx(qe,{className:"h-3 w-3 animate-spin mr-1"}),"Auto-refreshing..."]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(S,{onClick:()=>{Me(),ie()},variant:"outline",size:"sm",disabled:xe,children:[e.jsx(qe,{className:`mr-2 h-4 w-4 ${xe?"animate-spin":""}`}),"Refresh APs"]}),e.jsxs(S,{onClick:()=>Ie(c),variant:"outline",size:"sm",disabled:J,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),J?"Loading...":"Refresh Clients"]}),e.jsxs(S,{onClick:()=>Ve(c),variant:"outline",size:"sm",disabled:T,children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),T?"Loading...":"Refresh Metrics"]}),e.jsxs(S,{onClick:()=>fe(!0),variant:"outline",size:"sm",children:[e.jsx(Js,{className:"mr-2 h-4 w-4"}),"Customize Columns"]})]})]}),ke&&e.jsxs(Rs,{variant:"destructive",children:[e.jsx(qs,{className:"h-4 w-4"}),e.jsx(zs,{children:ke})]}),e.jsx(je,{isOpen:hs,onClose:()=>fe(!1),title:"Customize Table Columns",description:"Select which columns you want to display in the Access Points table",width:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm uppercase text-muted-foreground",children:"Basic Information"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.filter(s=>s.category==="basic").map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:s.key,checked:b.includes(s.key),onCheckedChange:()=>B(s.key)}),e.jsx("label",{htmlFor:s.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.label})]},s.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm uppercase text-muted-foreground",children:"Network"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.filter(s=>s.category==="network").map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:s.key,checked:b.includes(s.key),onCheckedChange:()=>B(s.key)}),e.jsx("label",{htmlFor:s.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.label})]},s.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm uppercase text-muted-foreground",children:"Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.filter(s=>s.category==="status").map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:s.key,checked:b.includes(s.key),onCheckedChange:()=>B(s.key)}),e.jsx("label",{htmlFor:s.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.label})]},s.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm uppercase text-muted-foreground",children:"Performance"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.filter(s=>s.category==="performance").map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:s.key,checked:b.includes(s.key),onCheckedChange:()=>B(s.key)}),e.jsx("label",{htmlFor:s.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.label})]},s.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm uppercase text-muted-foreground",children:"Hardware"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.filter(s=>s.category==="hardware").map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:s.key,checked:b.includes(s.key),onCheckedChange:()=>B(s.key)}),e.jsx("label",{htmlFor:s.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.label})]},s.key))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm uppercase text-muted-foreground",children:"Advanced"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.filter(s=>s.category==="advanced").map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:s.key,checked:b.includes(s.key),onCheckedChange:()=>B(s.key)}),e.jsx("label",{htmlFor:s.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.label})]},s.key))})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t mt-6",children:[e.jsx(S,{variant:"outline",onClick:gs,children:"Reset to Default"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[b.length," of ",A.length," columns selected"]}),e.jsx(S,{onClick:()=>fe(!1),children:"Done"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(y,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-cyan-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl group-hover:bg-blue-500/20 transition-all"}),e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(I,{className:"text-sm font-semibold",children:"Total Access Points"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(ye,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsxs(v,{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Managed devices"})]})]}),e.jsxs(y,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-green-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-emerald-500/10 rounded-full blur-2xl group-hover:bg-emerald-500/20 transition-all"}),e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(I,{className:"text-sm font-semibold",children:"AP Status"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-emerald-500 to-green-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(K,{className:"h-3.5 w-3.5 text-white animate-pulse"})})]}),e.jsx(v,{className:"relative",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Online"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:c.filter(s=>M(s)).length}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",c.length>0?`${Math.round(c.filter(s=>M(s)).length/c.length*100)}%`:"0%",")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:c.filter(s=>!M(s)).length}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",c.length>0?`${Math.round(c.filter(s=>!M(s)).length/c.length*100)}%`:"0%",")"]})]})]})]})})]}),e.jsxs(y,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-500 to-purple-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-violet-500/10 rounded-full blur-2xl group-hover:bg-violet-500/20 transition-all"}),e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(I,{className:"text-sm font-semibold",children:"Total Clients"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(Y,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsxs(v,{className:"relative",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:Cs()}),J&&e.jsx("div",{className:"animate-pulse",children:e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected devices"})]})]}),e.jsxs(y,{className:"relative overflow-hidden border-0 bg-gradient-to-br from-card to-card/50 hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500 to-orange-500 opacity-[0.08] group-hover:opacity-[0.12] transition-opacity"}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-amber-500/10 rounded-full blur-2xl group-hover:bg-amber-500/20 transition-all"}),e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative",children:[e.jsx(I,{className:"text-sm font-semibold",children:"Hardware Types"}),e.jsx("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 shadow-md group-hover:scale-110 transition-transform",children:e.jsx(ye,{className:"h-3.5 w-3.5 text-white"})})]}),e.jsxs(v,{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:ze().length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Different models"})]})]})]}),e.jsx(y,{className:"border border-red-500/50 bg-gradient-to-r from-red-50/50 to-orange-50/50 dark:from-red-950/20 dark:to-orange-950/20",children:e.jsx(v,{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-medium text-sm",children:"E911 BSSID Export"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",$.length," APs)"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("button",{onClick:()=>re(!0),className:"relative p-1 hover:opacity-80 transition-opacity cursor-pointer",children:[e.jsx("span",{className:"absolute inset-0 bg-red-500/30 rounded-full animate-ping"}),e.jsx(Qe,{className:"h-4 w-4 text-red-600 relative animate-[spin_4s_linear_infinite]"})]})}),e.jsx(E,{children:e.jsx("p",{children:"Configure Live E911 Updates"})})]}),e.jsxs(S,{onClick:ys,size:"sm",variant:"outline",className:"h-7 text-xs border-red-500/50 text-red-600 hover:bg-red-50 dark:hover:bg-red-950/50",disabled:$.length===0,children:[e.jsx(Qs,{className:"mr-1 h-3 w-3"}),"CSV"]}),e.jsxs(S,{onClick:vs,size:"sm",variant:"outline",className:"h-7 text-xs border-red-500/50 text-red-600 hover:bg-red-50 dark:hover:bg-red-950/50",disabled:$.length===0,children:[e.jsx(Ze,{className:"mr-1 h-3 w-3"}),"JSON"]})]})]})})}),e.jsxs(y,{className:"surface-2dp",children:[e.jsxs(C,{children:[e.jsx(I,{className:"text-headline-6 text-high-emphasis",children:"Access Points"}),e.jsx(Bs,{children:h!=="all"?`Access points in ${p.find(s=>s.id===h)?.name||"selected site"}. Click any access point for details.`:"Click any access point to view detailed information and connected clients"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Search by serial number, name, model, IP, or site...",value:D,onChange:s=>as(s.target.value),className:"pl-8"})]})}),e.jsxs(W,{value:h,onValueChange:s=>{console.log("Site selection changed to:",s),ss(s)},children:[e.jsxs(Q,{className:"w-48",children:[e.jsx(Xs,{className:"mr-2 h-4 w-4"}),e.jsx(Z,{placeholder:"Select Site"})]}),e.jsxs(X,{children:[e.jsx(f,{value:"all",children:"All Sites"}),p.map(s=>e.jsxs(f,{value:s.name||s.siteName||s.id,children:[s.name||s.siteName," ",s.aps?`(${s.aps} APs)`:""]},s.id)),p.length===0&&!Ce&&e.jsx(f,{value:"no-sites",disabled:!0,children:"No sites available"}),Ce&&e.jsx(f,{value:"loading",disabled:!0,children:"Loading sites..."})]})]}),e.jsxs(W,{value:se,onValueChange:rs,children:[e.jsxs(Q,{className:"w-32",children:[e.jsx(Ys,{className:"mr-2 h-4 w-4"}),e.jsx(Z,{placeholder:"Status"})]}),e.jsxs(X,{children:[e.jsx(f,{value:"all",children:"All Status"}),Ns().map(s=>e.jsx(f,{value:s,children:s},s))]})]}),e.jsxs(W,{value:te,onValueChange:ns,children:[e.jsx(Q,{className:"w-40",children:e.jsx(Z,{placeholder:"Hardware"})}),e.jsxs(X,{children:[e.jsx(f,{value:"all",children:"All Hardware"}),ze().map(s=>e.jsx(f,{value:s,children:s},s))]})]})]})]}),e.jsx(v,{children:Re.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Access Points Found"}),e.jsx("p",{className:"text-muted-foreground",children:D||se!=="all"||te!=="all"?"No access points match your current filters.":"No access points are currently configured."})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(_e,{children:[e.jsx(He,{children:e.jsxs(le,{children:[b.map(s=>{const t=A.find(a=>a.key===s);return e.jsx(O,{className:"cursor-pointer select-none hover:bg-muted/50 transition-colors",onClick:()=>bs(s),children:t?.label||s},s)}),e.jsx(O,{children:"Actions"})]})}),e.jsx(Je,{children:Re.map(s=>e.jsxs(le,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>{x?x(s.serialNumber,N(s)):Fe(s.serialNumber)},children:[b.map(t=>e.jsx(R,{children:ks(t,s)},t)),e.jsx(R,{children:e.jsxs(dt,{children:[e.jsxs(mt,{onClick:t=>t.stopPropagation(),className:"flex h-8 w-8 items-center justify-center rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]}),e.jsxs(ut,{align:"end",className:"w-48",children:[e.jsx(ht,{children:"AP Actions"}),e.jsx(oe,{}),e.jsxs(w,{onClick:t=>{t.stopPropagation(),Fe(s.serialNumber)},children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsx(oe,{}),e.jsxs(xt,{children:[e.jsxs(ft,{children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Manage Certificate"]}),e.jsxs(gt,{children:[e.jsxs(w,{onClick:async t=>{t.stopPropagation();try{const a=await g.generateCSR(s.serialNumber);u.success("CSR generated successfully"),console.log("[AccessPoints] Generated CSR:",a)}catch(a){u.error(a instanceof Error?a.message:"Failed to generate CSR")}},children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Generate CSR"]}),e.jsxs(w,{onClick:t=>{t.stopPropagation(),u.info("Certificate upload feature coming soon")},children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Apply Signed Certificates"]})]})]}),e.jsxs(w,{onClick:t=>{t.stopPropagation(),u.info("Site assignment dialog coming soon")},children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Assign to Site"]}),e.jsxs(w,{onClick:t=>{t.stopPropagation(),u.info("Adoption preference dialog coming soon")},children:[e.jsx(Qe,{className:"mr-2 h-4 w-4"}),"Adoption Preference"]}),e.jsxs(w,{onClick:t=>{t.stopPropagation(),u.info("Event level dialog coming soon")},children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Event Level"]}),e.jsxs(w,{onClick:async t=>{t.stopPropagation();try{await g.upgradeAPImage(s.serialNumber),u.success("Firmware upgrade initiated")}catch(a){u.error(a instanceof Error?a.message:"Failed to upgrade firmware")}},children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Image Upgrade"]}),e.jsx(oe,{}),e.jsxs(w,{onClick:async t=>{if(t.stopPropagation(),confirm(`Reset ${N(s)} to factory defaults? This cannot be undone.`))try{await g.resetAPToDefault(s.serialNumber),u.success("Factory reset initiated")}catch(a){u.error(a instanceof Error?a.message:"Failed to reset AP")}},children:[e.jsx(at,{className:"mr-2 h-4 w-4"}),"Reset to Default"]}),e.jsxs(w,{onClick:async t=>{t.stopPropagation();try{await g.rebootAP(s.serialNumber),u.success("AP reboot initiated")}catch(a){u.error(a instanceof Error?a.message:"Failed to reboot AP")}},children:[e.jsx(rt,{className:"mr-2 h-4 w-4"}),"Reboot"]}),e.jsx(oe,{}),e.jsxs(w,{onClick:async t=>{if(t.stopPropagation(),confirm(`Release ${N(s)} to cloud management?`))try{await g.releaseToCloud(s.serialNumber),u.success("AP released to cloud")}catch(a){u.error(a instanceof Error?a.message:"Failed to release to cloud")}},children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Release to Cloud"]}),e.jsxs(w,{onClick:async t=>{if(t.stopPropagation(),confirm(`Delete ${N(s)}? This will remove the AP from Extreme Platform ONE.`))try{await g.deleteAP(s.serialNumber),u.success("AP deleted successfully"),loadAccessPoints()}catch(a){u.error(a instanceof Error?a.message:"Failed to delete AP")}},className:"text-destructive focus:text-destructive",children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.serialNumber))})]})})})]}),e.jsx(je,{isOpen:cs,onClose:()=>Le(!1),title:`Access Point Details${m?.status?` - ${m.status}`:""}`,description:N(m),width:"xl",children:e.jsx("div",{className:"space-y-4",children:os?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsx(q,{className:"h-12 w-full"},s))}):m?e.jsxs($s,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(_s,{className:"grid w-full grid-cols-3",children:[e.jsx(be,{value:"overview",children:"Overview"}),e.jsxs(be,{value:"clients",children:["Clients (",ae.length,")"]}),e.jsx(be,{value:"technical",children:"Technical"})]}),e.jsx(Ne,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(I,{className:"text-base",children:"Basic Information"})}),e.jsxs(v,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Serial Number:"}),e.jsx("span",{className:"font-mono",children:m.serialNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"AP Name:"}),e.jsx("span",{children:N(m)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Model:"}),e.jsx("span",{children:m.model||m.hardwareType||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"IP Address:"}),e.jsx("span",{className:"font-mono",children:m.ipAddress||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"MAC Address:"}),e.jsx("span",{className:"font-mono",children:m.macAddress||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("span",{children:m.location||m.site||"N/A"})]})]})]}),e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(I,{className:"text-base",children:"Performance Metrics"})}),e.jsxs(v,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Connected Clients:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:m?pe(m):ae.length})]})]}),m.uptime&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Uptime:"}),e.jsx("span",{children:m.uptime})]}),m.channel&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Channel:"}),e.jsx("span",{children:m.channel})]}),m.txPower&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"TX Power:"}),e.jsxs("span",{children:[m.txPower," dBm"]})]}),m.channelUtilization!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Channel Utilization:"}),e.jsxs("span",{children:[m.channelUtilization,"%"]})]}),m.cpuUsage!==void 0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"CPU Usage:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsxs("span",{children:[m.cpuUsage,"%"]})]})]}),m.memoryUsage!==void 0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Memory Usage:"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(lt,{className:"h-4 w-4"}),e.jsxs("span",{children:[m.memoryUsage,"%"]})]})]})]})]})]})}),e.jsx(Ne,{value:"clients",className:"space-y-4",children:ae.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Connected Clients"}),e.jsx("p",{className:"text-muted-foreground",children:"This access point currently has no connected client devices."})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(_e,{children:[e.jsx(He,{children:e.jsxs(le,{children:[e.jsx(O,{children:"MAC Address"}),e.jsx(O,{children:"Name"}),e.jsx(O,{children:"Status"}),e.jsx(O,{children:"Signal Strength"}),e.jsx(O,{children:"Connected Time"})]})}),e.jsx(Je,{children:ae.map((s,t)=>e.jsxs(le,{children:[e.jsx(R,{className:"font-mono text-sm",children:s.macAddress||"N/A"}),e.jsx(R,{children:s.name||s.hostname||"Unknown Device"}),e.jsx(R,{children:e.jsx($e,{variant:s.status==="connected"?"default":"secondary",children:s.status||"Connected"})}),e.jsx(R,{children:s.rssi&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.rssi," dBm"]})]})}),e.jsx(R,{children:s.connectedTime||s.uptime||"N/A"})]},s.macAddress||t))})]})})}),e.jsx(Ne,{value:"technical",className:"space-y-4",children:e.jsxs(y,{children:[e.jsx(C,{children:e.jsx(I,{className:"text-base",children:"Technical Details"})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(m).map(([s,t])=>["serialNumber","displayName","model","hardwareType","ipAddress","macAddress","location","site","status"].includes(s)||t==null||t===""?null:e.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-100 last:border-b-0",children:[e.jsxs("span",{className:"text-muted-foreground capitalize",children:[s.replace(/([A-Z])/g," $1").trim(),":"]}),e.jsx("span",{className:"font-mono text-xs",children:typeof t=="object"?JSON.stringify(t):String(t)})]},s))})})]})})]}):null})}),e.jsx(je,{isOpen:ms,onClose:()=>re(!1),title:"E911 Live Update Configuration",description:"Configure automatic BSSID sync to E911 location services",width:"md",children:e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border border-green-500/40 bg-green-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("span",{className:"absolute h-3 w-3 bg-green-500 rounded-full animate-ping opacity-75"}),e.jsx("span",{className:"relative h-2.5 w-2.5 bg-green-500 rounded-full"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Live Sync Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j.lastSync?`Last synced: ${j.lastSync.toLocaleTimeString()}`:"Ready to sync BSSID data"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"e911-provider",className:"text-sm font-semibold text-foreground",children:"E911 Service Provider"}),e.jsxs(W,{value:j.provider,onValueChange:s=>P(t=>({...t,provider:s})),children:[e.jsx(Q,{id:"e911-provider",className:"bg-background",children:e.jsx(Z,{placeholder:"Select provider"})}),e.jsxs(X,{children:[e.jsx(f,{value:"redsky",children:"RedSky (Intrado)"}),e.jsx(f,{value:"bandwidth",children:"Bandwidth"}),e.jsx(f,{value:"911enable",children:"911 Enable"}),e.jsx(f,{value:"custom",children:"Custom API"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 rounded-lg border bg-muted/20",children:[e.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Authentication"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"e911-username",className:"text-sm font-medium text-foreground",children:"Username"}),e.jsx(G,{id:"e911-username",placeholder:"Enter your RedSky username",value:j.username,onChange:s=>P(t=>({...t,username:s.target.value})),className:"bg-background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"e911-password",className:"text-sm font-medium text-foreground",children:"Password"}),e.jsx(G,{id:"e911-password",type:"password",placeholder:"Enter your RedSky password",value:j.password,onChange:s=>P(t=>({...t,password:s.target.value})),className:"bg-background"})]})]}),e.jsxs("div",{className:"space-y-4 p-4 rounded-lg border bg-muted/20",children:[e.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"BSSID Discovery Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"e911-location",className:"text-sm font-medium text-foreground",children:"Location"}),e.jsx(G,{id:"e911-location",placeholder:"RedSky Location ID or address",value:j.location,onChange:s=>P(t=>({...t,location:s.target.value})),className:"bg-background"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The RedSky location to associate with discovered BSSIDs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"e911-description",className:"text-sm font-medium text-foreground",children:"Description"}),e.jsx(G,{id:"e911-description",placeholder:"Optional description for BSSID entries",value:j.description,onChange:s=>P(t=>({...t,description:s.target.value})),className:"bg-background"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(V,{htmlFor:"e911-masking",className:"text-sm font-medium text-foreground",children:"Enable Masking"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Apply masking to BSSID data for privacy"})]}),e.jsx(es,{id:"e911-masking",checked:j.masking,onCheckedChange:s=>P(t=>({...t,masking:s}))})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-muted/20",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(V,{htmlFor:"e911-autosync",className:"text-sm font-semibold text-foreground",children:"Automatic Sync"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically push BSSID updates to E911 service"})]}),e.jsx(es,{id:"e911-autosync",checked:j.autoSync,onCheckedChange:s=>P(t=>({...t,autoSync:s}))})]}),j.autoSync&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"e911-interval",className:"text-sm font-semibold text-foreground",children:"Sync Interval"}),e.jsxs(W,{value:j.syncInterval.toString(),onValueChange:s=>P(t=>({...t,syncInterval:parseInt(s)})),children:[e.jsx(Q,{id:"e911-interval",className:"bg-background",children:e.jsx(Z,{})}),e.jsxs(X,{children:[e.jsx(f,{value:"15",children:"Every 15 minutes"}),e.jsx(f,{value:"30",children:"Every 30 minutes"}),e.jsx(f,{value:"60",children:"Every hour"}),e.jsx(f,{value:"360",children:"Every 6 hours"}),e.jsx(f,{value:"1440",children:"Once daily"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t mt-6",children:[e.jsx(S,{variant:"outline",className:"flex-1 h-11 text-sm font-medium",onClick:()=>re(!1),children:"Cancel"}),e.jsx(S,{className:"flex-1 h-11 text-sm font-semibold bg-red-600 hover:bg-red-700 text-white shadow-md",onClick:()=>{u.success("E911 configuration saved"),P(s=>({...s,lastSync:new Date})),re(!1)},children:"Save Configuration"})]})]})})]})}export{Pt as AccessPoints};
